var W=Object.defineProperty,K=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var w=(e,s,t)=>s in e?W(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,a=(e,s)=>{for(var t in s||(s={}))Z.call(s,t)&&w(e,t,s[t]);if(S)for(var t of S(s))Q.call(s,t)&&w(e,t,s[t]);return e},l=(e,s)=>K(e,X(s));import{a0 as u,j as g,p,a1 as v}from"./vendor.f6bbc087.js";import"./ToolsSettings.7cc9335c.js";import"./index.2a722b10.js";import{R as ee,a as te}from"./RequiresUpdate.46609516.js";import{n as c}from"./vueComponentNormalizer.4c221f82.js";import{C as se}from"./Index.16bfea40.js";import{i as re,S as U}from"./index.0c09686e.js";import{C as d}from"./Card.75bef818.js";import{C as b}from"./SettingsRow.e87657d6.js";import{S as y,C as ie}from"./Redirects.97854774.js";import{C as h}from"./Tooltip.b5773cff.js";import{S as I}from"./Plus.4a10b727.js";import{S as f}from"./Trash.12a3da09.js";import{C as m}from"./Index.d771a71f.js";import{S as z,R as oe}from"./Redirects.4364c066.js";import{B as ae}from"./Checkbox.985acf88.js";import{G as F,a as N}from"./Row.de5121b5.js";import{S as ne}from"./Upload.84ae48fc.js";import{S as V}from"./Download.61fcd6f0.js";import{J as Y}from"./JsonValues.08065e69.js";import{C as j}from"./Modal.b51725b4.js";import{C as J}from"./Table.a478865a.js";import{S as B}from"./Information.da04dcfb.js";import{S as le}from"./Redirect.d30fa3bc.js";import{T as ce}from"./Slide.c8a2867c.js";import{B as de,S as ue}from"./Php.6068d316.js";import{C as pe}from"./PostTypeOptions.f3e27f1d.js";import{S as ge}from"./QuestionMark.4dbc0d97.js";import{T as he,a as _e}from"./Row.abb8d63b.js";import"./RequiresUpdate.da2c50c1.js";/* empty css             */import"./params.bea1a08d.js";import"./Header.806e3abd.js";import"./LicenseKeyBar.874ca635.js";import"./LogoGear.2daf1a8e.js";import"./AnimatedNumber.b8ee56f4.js";import"./Logo.62cb78b4.js";import"./Support.2f044557.js";import"./Tabs.d639cede.js";import"./TruSeoScore.a520926e.js";import"./Close.952d41b7.js";import"./Exclamation.32e01d31.js";import"./Url.781a1d48.js";import"./Gear.c545cf72.js";import"./Index.3946845a.js";import"./ProBadge.53877254.js";import"./External.c6f0b2ea.js";import"./Blur.4b173825.js";import"./Checkmark.1b8c121b.js";import"./HighlightToggle.2608187f.js";import"./Radio.d442f79d.js";var fe=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("core-card",{attrs:{slug:"fullSiteRedirectsRelocate",toggles:e.redirectOptions.fullSite.relocate.enabled,disabled:!e.redirectOptions.fullSite.relocate.enabled},scopedSlots:e._u([{key:"header",fn:function(){return[t("base-toggle",{model:{value:e.redirectOptions.fullSite.relocate.enabled,callback:function(r){e.$set(e.redirectOptions.fullSite.relocate,"enabled",r)},expression:"redirectOptions.fullSite.relocate.enabled"}}),e._v(" "+e._s(e.strings.relocateSite)+" ")]},proxy:!0},e.redirectOptions.fullSite.relocate.enabled?null:{key:"disabled",fn:function(){return[e._v(" "+e._s(e.strings.descriptionClosed)+" ")]},proxy:!0}],null,!0)},[e.redirectOptions.fullSite.relocate.enabled?t("div",[t("div",{staticClass:"urls aioseo-row"},[t("div",{staticClass:"relocate-address"},[t("div",{staticClass:"desc"},[e._v(e._s(e.strings.oldSiteAddress)+":")]),t("div",{staticClass:"address"},[e._v(e._s(e.$aioseo.urls.mainSiteUrl))])]),t("div",{staticClass:"right-arrow"},[t("svg-right-arrow")],1),t("div",{staticClass:"relocate-address"},[t("div",{staticClass:"desc"},[e._v(e._s(e.strings.newSiteAddress)+":")]),t("div",{staticClass:"address"},[e._v(e._s(e.redirectOptions.fullSite.relocate.newDomain))])])]),t("div",{staticClass:"aioseo-section-description"},[e._v(" "+e._s(e.strings.description)+" ")]),t("core-settings-row",{attrs:{name:e.strings.relocateToDomain,align:""},scopedSlots:e._u([{key:"content",fn:function(){return[t("base-input",{class:{"aioseo-error":e.validateUrl(e.redirectOptions.fullSite.relocate.newDomain)===!1,"aioseo-active":e.validateUrl(e.redirectOptions.fullSite.relocate.newDomain)===!0},attrs:{type:"text",size:"medium",spellcheck:!1,"append-icon":"circle-check"},model:{value:e.redirectOptions.fullSite.relocate.newDomain,callback:function(r){e.$set(e.redirectOptions.fullSite.relocate,"newDomain",r)},expression:"redirectOptions.fullSite.relocate.newDomain"}})]},proxy:!0}],null,!1,1732356028)})],1):e._e()])},me=[];const ve={components:{CoreCard:d,CoreSettingsRow:b,SvgRightArrow:y},data(){return{strings:{relocateSite:"Relocate Site",descriptionClosed:"Would you like to relocate your entire site to a new domain? Everything will be redirected except WordPress login and admin. Enabling this option will disable any site aliases or canonical settings.",description:"By enabling this option you disabled any site aliases or canonical settings. Enter a domain to redirect everything, except WordPress login and admin.",oldSiteAddress:"Your old site address",newSiteAddress:"Your new site address",relocateToDomain:"Relocate to domain:"}}},computed:a({},u("redirects",["redirectOptions"])),methods:{validateUrl:function(e){return e.length===0?null:re(e)}}},$={};var be=c(ve,fe,me,!1,ye,"2040c408",null,null);function ye(e){for(let s in $)this[s]=$[s]}var Se=function(){return be.exports}(),we=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("core-card",{attrs:{slug:"fullSiteRedirectsAliases",disabled:e.redirectOptions.fullSite.relocate.enabled},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.strings.siteAliases)+" ")]},proxy:!0},{key:"disabled",fn:function(){return[e._v(" "+e._s(e.strings.descriptionClosed)+" ")]},proxy:!0}])},[t("div",{staticClass:"aioseo-section-description"},[e._v(" "+e._s(e.strings.description)+" ")]),t("table",{staticClass:"redirects-options-table",attrs:{cellspacing:"0",cellpadding:"0"}},[t("thead",[t("tr",[t("td",[e._v(e._s(e.strings.aliasedDomain))]),t("td"),t("td",[e._v(e._s(e.strings.alias))]),t("td")])]),t("tbody",[e.parsedAliases.length?e._e():t("tr",{staticClass:"even"},[t("td",{attrs:{colspan:"4"}},[e._v(e._s(e.strings.addAliasesMessage))])]),e._l(e.parsedAliases,function(r,i){return t("tr",{key:i,class:{even:i%2===0}},[t("td",{staticClass:"aliased-domain"},[t("base-input",{attrs:{size:"medium"},on:{input:function(o){return e.updatePage("aliasedDomain",o,i)}},model:{value:r.aliasedDomain,callback:function(o){e.$set(r,"aliasedDomain",o)},expression:"row.aliasedDomain"}})],1),t("td",{staticClass:"arrow-col"},[t("div",[t("svg-right-arrow")],1)]),t("td",[e._v(" "+e._s(e.$aioseo.urls.mainSiteUrl)+" ")]),t("td",{staticClass:"actions"},[t("core-tooltip",{attrs:{type:"action"},scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v(" "+e._s(e.strings.delete)+" ")]},proxy:!0}],null,!0)},[t("svg-trash",{nativeOn:{click:function(o){return e.removeRow(i)}}})],1)],1)])})],2),t("tfoot",[t("tr",[t("td",{attrs:{colspan:"4"}},[t("base-button",{attrs:{size:"small-table",type:"black"},on:{click:e.addRow}},[t("svg-circle-plus"),e._v(" "+e._s(e.strings.addNew)+" ")],1)],1)])])])])},$e=[];const Oe={aliasedDomain:null},xe={components:{CoreCard:d,CoreTooltip:h,SvgCirclePlus:I,SvgRightArrow:y,SvgTrash:f},data(){return{strings:{siteAliases:"Site Aliases",descriptionClosed:"Site aliases are disabled because you have relocated your site to another domain.",description:"A site alias is another domain that you want to be redirected to this site. For example, an old domain, or a subdomain. This will redirect all URLs, including WordPress login and admin. You will need to configure your system (DNS and server) to pass requests for these domains to this WordPress install.",aliasedDomain:"Aliased Domain",alias:"Alias",addNew:"Add New",delete:"Delete",addAliasesMessage:"Add an alias redirect by clicking in 'Add New'."},validRelocationURL:null}},computed:l(a({},u("redirects",["redirectOptions"])),{parsedAliases(){return this.redirectOptions.fullSite.aliases.map(e=>e?JSON.parse(e):{})}}),methods:{removeRow(e){this.$delete(this.redirectOptions.fullSite.aliases,e),this.redirectOptions.fullSite.aliases.length===0&&this.addRow()},addRow(){this.redirectOptions.fullSite.aliases.push(JSON.stringify(a({},Oe)))},updatePage(e,s,t){const r=JSON.parse(this.redirectOptions.fullSite.aliases[t]);r[e]=s,this.$set(this.redirectOptions.fullSite.aliases,t,JSON.stringify(r))}},mounted(){this.redirectOptions.fullSite.aliases.length===0&&this.addRow()}},O={};var Ce=c(xe,we,$e,!1,Re,null,null,null);function Re(e){for(let s in O)this[s]=O[s]}var ke=function(){return Ce.exports}(),De=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("core-card",{attrs:{slug:"fullSiteRedirectsCanonical",toggles:e.redirectOptions.fullSite.canonical.enabled,disabled:e.redirectOptions.fullSite.relocate.enabled},scopedSlots:e._u([{key:"header",fn:function(){return[e.redirectOptions.fullSite.relocate.enabled?e._e():t("base-toggle",{model:{value:e.redirectOptions.fullSite.canonical.enabled,callback:function(r){e.$set(e.redirectOptions.fullSite.canonical,"enabled",r)},expression:"redirectOptions.fullSite.canonical.enabled"}}),e._v(" "+e._s(e.strings.canonicalSettings)+" ")]},proxy:!0},{key:"disabled",fn:function(){return[e._v(" "+e._s(e.strings.descriptionClosed)+" ")]},proxy:!0}])},[e.redirectOptions.fullSite.canonical.enabled?t("div",[t("div",{staticClass:"urls aioseo-row"},[t("div",{staticClass:"preview"},[t("div",{staticClass:"canonical-address"},[t("div",{staticClass:"desc"},[e._v(e._s(e.strings.currentSiteAddress)+":")]),t("div",{staticClass:"address"},[e._v(e._s(e.$aioseo.urls.mainSiteUrl))])]),t("div",{staticClass:"right-arrow"},[t("svg-right-arrow")],1),t("div",{staticClass:"canonical-address"},[t("div",{staticClass:"desc"},[e._v(e._s(e.strings.newSiteAddress)+":")]),t("div",{staticClass:"address"},[e._v(e._s(e.canonicalSiteAddress))])])]),e.canonicalSiteAddress!==e.$aioseo.urls.mainSiteUrl?t("div",[t("core-alert",{attrs:{type:"red"},domProps:{innerHTML:e._s(e.strings.configureSiteUrl)}})],1):e._e()]),t("core-settings-row",{staticClass:"http-to-https",attrs:{name:e.strings.httpToHttps},scopedSlots:e._u([{key:"content",fn:function(){return[t("base-toggle",{model:{value:e.redirectOptions.fullSite.canonical.httpToHttps,callback:function(r){e.$set(e.redirectOptions.fullSite.canonical,"httpToHttps",r)},expression:"redirectOptions.fullSite.canonical.httpToHttps"}}),e._v(" "+e._s(e.strings.httpToHttpsDesc)+" "),e.redirectOptions.fullSite.canonical.httpToHttps?t("core-alert",{attrs:{type:"yellow"},domProps:{innerHTML:e._s(e.strings.httpsAlert)}}):e._e()]},proxy:!0}],null,!1,3691266634)}),t("core-settings-row",{attrs:{name:e.strings.preferredDomain,align:""},scopedSlots:e._u([{key:"content",fn:function(){return[t("base-select",{attrs:{size:"large",options:e.preferredDomainOptions,value:e.preferredDomainValue},on:{input:function(r){return e.redirectOptions.fullSite.canonical.preferredDomain=r.value}}})]},proxy:!0}],null,!1,313125584)})],1):e._e()])},Le=[];const Te={components:{CoreAlert:m,CoreCard:d,CoreSettingsRow:b,SvgRightArrow:y},data(){return{strings:{canonicalSettings:"Canonical Settings",descriptionClosed:"Canonical Settings are disabled because you have relocated your site to another domain.",currentSiteAddress:"Your current site address",newSiteAddress:"Your new site address",httpToHttps:"Redirect from HTTP to HTTPS",httpToHttpsDesc:"Force a redirect from HTTP to HTTPS",preferredDomain:"Preferred domain",configureSiteUrl:this.$t.sprintf("You'll need to update your Site Address URL to match your new site address. %1$sUpdate Site Address URL%2$s.",`<a href="${this.$aioseo.urls.admin.generalSettings}">`,"</a>"),httpsAlert:this.$t.sprintf("%1$sWarning:%2$s ensure your HTTPS is working before forcing a redirect. %3$s","<strong>","</strong>",this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"redirectCanonicalHttps",!0))},preferredDomainOptions:[{label:"Leave domain as-is",value:""},{label:"Add www to domain",value:"add-www"},{label:"Remove www from domain",value:"remove-www"}]}},computed:l(a({},u("redirects",["redirectOptions"])),{canonicalSiteAddress(){let e=this.$aioseo.urls.mainSiteUrl;switch(this.redirectOptions.fullSite.canonical.httpToHttps&&(e=e.replace(/^http:/,"https:")),this.redirectOptions.fullSite.canonical.preferredDomain){case"add-www":e=e.match(/:\/\/www./)?e:e.replace(/:\/\//,"://www.");break;case"remove-www":e=e.replace(/:\/\/www./,"://");break}return e},preferredDomainValue(){let e=this.preferredDomainOptions.filter(s=>s.value===this.redirectOptions.fullSite.canonical.preferredDomain);return e||(e=this.preferredDomainOptions.filter(s=>s.value==="")),e}})},x={};var He=c(Te,De,Le,!1,Ae,"67820d5d",null,null);function Ae(e){for(let s in x)this[s]=x[s]}var Pe=function(){return He.exports}(),Ee=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("core-card",{attrs:{slug:"fullSiteRedirectsHttpHeaders"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.strings.httpHeaders)+" ")]},proxy:!0}])},[t("div",{staticClass:"aioseo-section-description"},[e._v(" "+e._s(e.strings.description)+" ")]),t("table",{staticClass:"redirects-options-table",attrs:{cellspacing:"0",cellpadding:"0"}},[t("thead",[t("tr",[t("td",[e._v(e._s(e.strings.location))]),t("td",[e._v(e._s(e.strings.header))]),t("td",[e._v(e._s(e.strings.value))]),t("td")])]),t("tbody",[e.parsedHeaders.length?e._e():t("tr",{staticClass:"even"},[t("td",{attrs:{colspan:"4"}},[e._v(e._s(e.strings.addHeadersMessage))])]),e._l(e.parsedHeaders,function(r,i){return t("tr",{key:i,class:{even:i%2===0}},[t("td",{staticClass:"location"},[t("base-select",{attrs:{size:"medium",options:e.locationOptions,value:e.getHeaderValue("location",i)},on:{input:function(o){return e.updateHeader("location",o,i)}}})],1),t("td",{staticClass:"httpHeader"},[e.getHeaderValue("header",i,!0)!=="custom"?t("base-select",{attrs:{size:"medium",filterable:!0,options:e.headerOptions,"group-label":"groupLabel","group-values":"options",value:e.getHeaderValue("header",i),placeholder:e.strings.headerPlaceholder},on:{input:function(o){return e.updateHeader("header",o,i)}}}):e._e(),e.getHeaderValue("header",i,!0)==="custom"?t("base-input",{attrs:{size:"medium",value:e.getHeaderValue("customHeader",i),"append-icon":"circle-close"},on:{input:function(o){return e.updateHeader("customHeader",o,i)},"append-icon-click":function(o){return e.updateHeader("header","",i)}}}):e._e()],1),t("td",{staticClass:"value",class:{custom:e.isHeaderValueCustom(i)}},[e.getHeaderOptions(i).length?e._e():t("base-input",{attrs:{size:"medium",value:e.getHeaderValue("value",i)},on:{input:function(o){return e.updateHeader("value",o,i)}}}),e.getHeaderOptions(i).length?t("base-select",{attrs:{size:"medium",filterable:!0,options:e.getHeaderOptions(i),value:e.getHeaderValue("value",i),multiple:e.getHeaderMultiple(i)},on:{input:function(o){return e.updateHeader("value",o,i)}}}):e._e(),e.isHeaderValueCustom(i)?t("base-input",{attrs:{size:"medium",value:e.getHeaderValue("customValue",i)},on:{input:function(o){return e.updateHeader("customValue",o,i)}}}):e._e()],1),t("td",{staticClass:"actions"},[t("core-tooltip",{attrs:{type:"action"},scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v(" "+e._s(e.strings.delete)+" ")]},proxy:!0}],null,!0)},[t("svg-trash",{nativeOn:{click:function(o){return e.removeRow(i)}}})],1)],1)])})],2),t("tfoot",[t("tr",[t("td",{attrs:{colspan:"4"}},[t("base-button",{attrs:{size:"small-table",type:"black"},on:{click:function(r){return e.addRow(null)}}},[t("svg-circle-plus"),e._v(" "+e._s(e.strings.addHeader)+" ")],1),t("base-button",{attrs:{size:"small-table",type:"black"},on:{click:e.addSecurityPresets}},[t("svg-circle-plus"),e._v(" "+e._s(e.strings.addSecurityPresets)+" ")],1),t("base-button",{attrs:{size:"small-table",type:"black"},on:{click:e.addCorsPresets}},[t("svg-circle-plus"),e._v(" "+e._s(e.strings.addCorsPresets)+" ")],1)],1)])])])])},Me=[];const Ue={location:"site",header:null,value:null},Ie={components:{CoreCard:d,CoreTooltip:h,SvgCirclePlus:I,SvgTrash:f},data(){return{strings:{httpHeaders:"HTTP Headers",description:"Site headers are added across your site, including redirects. Redirect headers are only added to redirects.",location:"Location",header:"Header",value:"Value",delete:"Delete",addHeader:"Add Header",addSecurityPresets:"Add Security Presets",addCorsPresets:"Add CORS Presets",addHeadersMessage:"Add headers by clicking in the options below.",headerPlaceholder:"Select a header"}}},computed:l(a({},u("redirects",["redirectOptions"])),{parsedHeaders(){return this.redirectOptions.fullSite.httpHeaders.map(e=>e?JSON.parse(e):{})},locationOptions(){return[{label:"Site",value:"site"},{label:"Redirect",value:"redirect"}]},headerOptions(){const e=this.$constants.HTTP_RESPONSE_HEADERS;return e.find(s=>s.groupLabel==="Custom")||e.push({groupLabel:"Custom",options:[{label:"Custom",value:"custom"}]}),e}}),methods:{removeRow(e){this.$delete(this.redirectOptions.fullSite.httpHeaders,e),this.redirectOptions.fullSite.httpHeaders.length===0&&this.addRow()},addRow(e,s=!1){e||(e=Ue),e=JSON.stringify(a({},e)),(!s||s&&this.redirectOptions.fullSite.httpHeaders.filter(t=>t===e).length===0)&&this.redirectOptions.fullSite.httpHeaders.push(e)},addRows(e,s=!1){e.forEach(t=>this.addRow(t,s))},updateHeader(e,s,t){const r=JSON.parse(this.redirectOptions.fullSite.httpHeaders[t]);s=typeof s.value!="undefined"?s.value:s,s=typeof s=="object"&&s.length?s.map(i=>i.value):s,r[e]=s,e==="header"&&(r.value=""),this.$set(this.redirectOptions.fullSite.httpHeaders,t,JSON.stringify(r))},getHeaderValue(e,s,t=!1){let i=JSON.parse(this.redirectOptions.fullSite.httpHeaders[s])[e],o=null;if(t)return i;switch(e){case"location":i=this.locationOptions.find(n=>i===n.value),i||(i=this.locationOptions.find(n=>n.value==="site"));break;case"header":this.$constants.HTTP_RESPONSE_HEADERS.forEach(n=>{const _=n.options.find(G=>i===G.value);_&&(i=_)});break;case"value":o=this.getHeaderValue("header",s),i&&typeof o.options!="undefined"&&(typeof i=="object"?i=i.map(n=>o.options.find(_=>n===_.value)).filter(n=>!!n):i=o.options.find(n=>i===n.value));break}return i},getHeaderOptions(e){const s=this.getHeaderValue("header",e);return s&&typeof s.options!="undefined"?s.options:[]},getHeaderMultiple(e){const s=this.getHeaderValue("header",e);return s&&typeof s.multiple!="undefined"?s.multiple:!1},isHeaderValueCustom(e){return typeof this.getHeaderValue("value",e,!0)=="string"&&this.getHeaderValue("value",e,!0).match(/\[[a-zA-Z0-9_-]+\]/)},addSecurityPresets(){this.addRows([{location:"site",header:"X-Frame-Options",value:"deny"},{location:"site",header:"X-XSS-Protection",value:"1; mode=block"},{location:"site",header:"X-Content-Type-Options",value:"nosniff"},{location:"site",header:"Content-Security-Policy",value:"default-src 'self'; script-src 'unsafe-inline' 'unsafe-eval' http:; style-src 'unsafe-inline' http:; img-src http: data:; font-src http: data:; sandbox allow-forms allow-scripts"},{location:"site",header:"Referrer-Policy",value:"no-referrer-when-downgrade"}],!0)},addCorsPresets(){this.addRows([{location:"site",header:"Access-Control-Allow-Origin",value:"*"},{location:"site",header:"Access-Control-Allow-Credentials",value:"true"},{location:"site",header:"Access-Control-Allow-Methods",value:["GET","POST","OPTIONS"]},{location:"site",header:"Access-Control-Allow-Headers",value:"origin"},{location:"site",header:"Referrer-Policy",value:"no-referrer-when-downgrade"},{location:"site",header:"P3P",value:'CP="CAO PSA OUR"'}],!0)}},mounted(){this.redirectOptions.fullSite.httpHeaders.length===0&&this.addRow()}},C={};var ze=c(Ie,Ee,Me,!1,Fe,"b107bc90",null,null);function Fe(e){for(let s in C)this[s]=C[s]}var Ne=function(){return ze.exports}(),Ve=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"aioseo-full-site-redirects"},[t("server-config-reload-warning"),t("relocate-site"),t("site-aliases"),t("canonical-settings"),t("http-headers")],1)},Ye=[];const je={components:{RelocateSite:Se,SiteAliases:ke,CanonicalSettings:Pe,HttpHeaders:Ne,ServerConfigReloadWarning:z}},R={};var Je=c(je,Ve,Ye,!1,Be,null,null,null);function Be(e){for(let s in R)this[s]=R[s]}var qe=function(){return Je.exports}(),Ge=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("core-card",{staticClass:"aioseo-export-redirects",attrs:{slug:"exportRedirects",toggles:!1,"no-slide":"","header-text":e.strings.exportRedirects},scopedSlots:e._u([{key:"header-icon",fn:function(){return[t("svg-upload")]},proxy:!0}])},[t("div",{staticClass:"export-redirects aioseo-settings-row"},[t("div",{staticClass:"export-description"},[e._v(" "+e._s(e.strings.exportDescription)+" ")]),t("grid-row",[t("grid-column",{staticClass:"export-logs"},[t("base-checkbox",{attrs:{size:"medium"},model:{value:e.exportOptions.all,callback:function(r){e.$set(e.exportOptions,"all",r)},expression:"exportOptions.all"}},[e._v(" "+e._s(e.strings.allRedirects)+" ")])],1),e._l(e.$constants.REDIRECT_GROUPS,function(r,i){return t("grid-column",{key:i,attrs:{sm:"12"}},[e.exportOptions.all?e._e():t("base-checkbox",{attrs:{size:"medium"},model:{value:e.exportOptions[r.value],callback:function(o){e.$set(e.exportOptions,r.value,o)},expression:"exportOptions[group.value]"}},[e._v(" "+e._s(r.label)+" ")]),r.value!=="all"&&e.exportOptions.all?t("base-checkbox",{attrs:{size:"medium",value:!0,disabled:""}},[e._v(" "+e._s(r.label)+" ")]):e._e()],1)})],2),t("base-select",{attrs:{size:"medium",options:e.exportTypes},model:{value:e.exportType,callback:function(r){e.exportType=r},expression:"exportType"}}),t("base-button",{staticClass:"import",attrs:{type:"blue",size:"medium",disabled:!e.canExport,loading:e.loading},on:{click:e.processExportRedirects}},[e._v(" "+e._s(e.strings.exportRedirects)+" ")])],1),t("div",{staticClass:"export-logs-wrapper"},[t("div",{staticClass:"export-logs"},[e._v(" "+e._s(e.strings.logs)+" ")]),e.options.logs.redirects.enabled&&e.options.main.method!=="server"?t("base-button",{attrs:{type:"gray",size:"medium",loading:e.exportingRedirectLogs},on:{click:function(r){return e.processExportLogs("redirect")}}},[e._v(" "+e._s(e.strings.exportRedirectLogs)+" ")]):e._e(),e.options.logs.log404.enabled?t("base-button",{attrs:{type:"gray",size:"medium",loading:e.exporting404Logs},on:{click:function(r){return e.processExportLogs("404")}}},[e._v(" "+e._s(e.strings.export404Logs)+" ")]):e._e()],1)])},We=[];const Ke={components:{BaseCheckbox:ae,CoreCard:d,GridColumn:F,GridRow:N,SvgUpload:ne},data(){return{exportingRedirectLogs:!1,exporting404Logs:!1,exportOptions:{},postOptions:{},loading:!1,exportType:{label:"Complete Data (JSON)",value:"json"},exportTypes:[{label:"Complete Data (JSON)",value:"json"},{label:"Apache Redirects (.htaccess)",value:"htaccess"},{label:"Nginx Redirects (.nginx)",value:"nginx"}],strings:{exportRedirects:"Export Redirects",exportDescription:"Export to JSON, .htaccess or .nginx. The JSON format contains full information (and can be re-imported), while the other formats only contain partial information relavant to that format.",allRedirects:"Export All Redirects",logs:"Logs",exportRedirectLogs:"Export Redirect Logs",export404Logs:"Export 404 Logs"}}},computed:l(a({},g("redirects",["options"])),{settings(){const e=[{value:"webmasterTools",label:"Webmaster Tools"},{value:"rssContent",label:"RSS Content"},{value:"advanced",label:"Advanced"},{value:"searchAppearance",label:"Search Appearance"},{value:"social",label:"Social Networks"},{value:"sitemap",label:"Sitemaps"},{value:"tools",label:"Tools"}];return this.$isPro&&e.push({value:"accessControl",label:"Access Control"}),!this.isUnlicensed&&this.showImageSeoReset&&e.push({value:"image",label:"Image SEO"}),!this.isUnlicensed&&this.showLocalBusinessReset&&e.push({value:"localBusiness",label:"Local Business SEO"}),!this.isUnlicensed&&this.showLinkAssistantReset&&e.push({value:"linkAssistant",label:"Link Assistant"}),e},canExport(){const e=[];return Object.keys(this.exportOptions).forEach(s=>{e.push(this.exportOptions[s])}),Object.keys(this.postOptions).forEach(s=>{e.push(this.postOptions[s])}),e.some(s=>s)}}),methods:l(a({},p("redirects",["exportRedirects","exportLogs"])),{processExportRedirects(){const e=[];this.exportOptions.all?this.$constants.REDIRECT_GROUPS.filter(t=>t.value!=="all").forEach(t=>{e.push(t.value)}):Object.keys(this.exportOptions).forEach(t=>{this.exportOptions[t]&&e.push(t)});const s=this.exportType.value;this.loading=!0,this.exportRedirects({groups:e,type:s}).then(t=>{let r=new Blob([t.body.redirects]);s==="json"&&(r=new Blob([JSON.stringify(t.body.redirects)],{type:"application/json"})),this.loading=!1,this.exportOptions={},this.postOptions={};const i=document.createElement("a");i.href=URL.createObjectURL(r),i.download=`aioseo-export-redirects-${this.$moment().format("YYYY-MM-DD")}.${s}`,i.click(),URL.revokeObjectURL(i.href)})},processExportLogs(e){this["exporting"+e.charAt(0).toUpperCase()+e.slice(1)+"Logs"]=!0,this.exportLogs(e).then(s=>{this["exporting"+e.charAt(0).toUpperCase()+e.slice(1)+"Logs"]=!1;const t=new Blob([s.body.redirects]),r=document.createElement("a");r.href=URL.createObjectURL(t),r.download=`aioseo-export-redirects-log-${e}-${this.$moment().format("YYYY-MM-DD")}.log`,r.click(),URL.revokeObjectURL(r.href)})}})},k={};var Xe=c(Ke,Ge,We,!1,Ze,null,null,null);function Ze(e){for(let s in k)this[s]=k[s]}var Qe=function(){return Xe.exports}(),et=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("core-card",{staticClass:"aioseo-redirects-import-aioseo",attrs:{slug:"importAioseoRedirects",toggles:!1,"no-slide":"","header-text":e.strings.importRestoreAioseoRedirects},scopedSlots:e._u([{key:"header-icon",fn:function(){return[t("svg-download")]},proxy:!0}])},[e.uploadError?t("core-alert",{staticClass:"import-error",attrs:{type:"red"}},[e._v(" "+e._s(e.uploadError)+" ")]):e._e(),e.uploadSuccess?t("core-alert",{staticClass:"import-error",attrs:{type:"green"}},[e._v(" "+e._s(e.strings.fileUploadedSuccessfully)+" ")]):e._e(),t("div",{staticClass:"file-upload"},[t("base-input",{class:{"aioseo-error":e.uploadError},attrs:{size:"medium",placeholder:e.strings.fileUploadPlaceholder},on:{focus:e.triggerFileUpload},model:{value:e.filename,callback:function(r){e.filename=r},expression:"filename"}}),t("base-button",{attrs:{type:"black",size:"medium"}},[e._v(" "+e._s(e.strings.chooseAFile)+" "),t("base-input",{ref:"file",attrs:{type:"file"},on:{click:e.reset,change:e.handleFileUpload},model:{value:e.inputFile,callback:function(r){e.inputFile=r},expression:"inputFile"}})],1)],1),t("div",{staticClass:"aioseo-description"},[e._v(" "+e._s(e.strings.fileUploadDescription)+" ")]),t("base-button",{staticClass:"import",attrs:{type:"blue",size:"medium",disabled:!e.file||!e.importValidated,loading:e.loading},on:{click:e.submitFile}},[e._v(" "+e._s(e.strings.import)+" ")])],1)},tt=[];const st={components:{CoreAlert:m,CoreCard:d,SvgDownload:V},data(){return{inputFile:null,filename:null,file:null,uploadError:!1,uploadSuccess:!1,loading:!1,strings:{importRestoreAioseoRedirects:this.$t.sprintf("Import Redirects from %1$s File","AIOSEO"),fileUploadPlaceholder:"Import from a JSON file...",chooseAFile:"Choose a File",fileUploadDescription:"Imported redirects will overwrite existing redirects and will not be merged.",import:"Import",jsonFileTypeRequired:"A JSON file is required to import redirects.",fileUploadedSuccessfully:"Success! Your redirects have been imported.",fileUploadFailed:"There was an error importing your redirects. Please make sure you are uploading the correct file or it is in the proper format."}}},computed:{importValidated(){return!!(this.file.type==="application/json"||this.file.name.endsWith(".ini"))}},methods:l(a({},p("redirects",["uploadFile"])),{reset(){this.uploadError=!1,this.filename=null,this.file=null,this.inputFile=null},triggerFileUpload(){this.reset(),this.$refs.file.$el.querySelector("input").focus(),this.$refs.file.$el.querySelector("input").click()},submitFile(){this.loading=!0,this.uploadFile({file:this.file,filename:this.filename}).then(()=>{this.reset(),this.uploadSuccess=!0,this.loading=!1}).catch(()=>{this.reset(),this.loading=!1,this.uploadError=this.strings.fileUploadFailed})},handleFileUpload(){this.reset(),this.file=this.$refs.file.$el.querySelector("input").files[0],this.file&&(this.filename=this.file.name,this.file.type!=="application/json"&&(this.uploadError=this.strings.jsonFileTypeRequired))}})},D={};var rt=c(st,et,tt,!1,it,null,null,null);function it(e){for(let s in D)this[s]=D[s]}var ot=function(){return rt.exports}(),at=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("core-card",{staticClass:"aioseo-redirects-import-others",attrs:{id:"aioseo-redirects-import-others",slug:"importOtherPluginsRedirects",toggles:!1,"no-slide":"","header-text":e.strings.importRedirectsFromOtherPlugins},scopedSlots:e._u([{key:"header-icon",fn:function(){return[t("svg-download")]},proxy:!0}])},[t("div",{staticClass:"aioseo-section-description"},[e._v(" "+e._s(e.strings.importOthersDescription)+" ")]),e.importSuccess?t("core-alert",{staticClass:"import-success",attrs:{type:"green"}},[e._v(" "+e._s(e.importSuccessful)+" ")]):e._e(),e.importError?t("core-alert",{staticClass:"import-error",attrs:{type:"red"}},[e._v(" "+e._s(e.importErrorMessage)+" ")]):e._e(),t("base-select",{attrs:{size:"medium",options:e.plugins,placeholder:e.strings.selectPlugin},scopedSlots:e._u([{key:"option",fn:function(r){var i=r.option;return[t("div",{staticClass:"import-plugin-label"},[t("span",{staticClass:"plugin-label"},[e._v(e._s(i.label))]),i.$isDisabled?t("span",{staticClass:"plugin-status"},[e._v(e._s(e.strings.notInstalled))]):e._e()])]}}]),model:{value:e.plugin,callback:function(r){e.plugin=r},expression:"plugin"}}),t("base-button",{staticClass:"import",attrs:{type:"blue",size:"medium",disabled:!e.plugin,loading:e.loading},on:{click:e.processImportPlugin}},[e._v(" "+e._s(e.strings.import)+" ")])],1)},nt=[];const lt={components:{CoreAlert:m,CoreCard:d,SvgDownload:V},data(){return{importSuccess:!1,importError:!1,options:{},plugin:null,loading:!1,strings:{importRedirectsFromOtherPlugins:"Import Redirects From Other Plugins",importOthersDescription:this.$t.sprintf("Choose a plugin to import redirects directly into %1$s.","AIOSEO"),selectPlugin:"Select a plugin...",import:"Import",allRedirects:"All Redirects",notInstalled:"not installed"}}},watch:{plugin(){this.importSuccess=!1,this.importError=!1,this.options={}}},computed:{plugins(){const e=[];return this.$aioseo.redirects.importers.forEach(s=>{e.push({value:s.slug,label:s.name,canImport:s.canImport,version:s.version,$isDisabled:!s.installed})}),e},importSuccessful(){return this.$t.sprintf("%1$s was successfully imported!",this.plugin.label)},importErrorMessage(){return this.$t.sprintf("An error occurred while importing %1$s. Please try again.",this.plugin.label)}},methods:l(a({},p("redirects",["importPlugins"])),{processImportPlugin(){this.importSuccess=!1,this.importError=!1,this.loading=!0;const e=[];this.options.all?this.settings.filter(s=>s.value!=="all").forEach(s=>{e.push(s.value)}):Object.keys(this.options).forEach(s=>{this.options[s]&&e.push(s)}),this.importPlugins([{plugin:this.plugin.value,settings:e}]).then(()=>{this.loading=!1,this.importSuccess=!0,this.options={}}).catch(()=>{this.loading=!1,this.importError=!0,this.options={}})},invalidVersion(e){return this.$t.sprintf("We do not support importing from the currently installed version of %1$s (%2$s). Please upgrade to the latest version and try again.",e.label,e.version)}})},L={};var ct=c(lt,at,nt,!1,dt,null,null,null);function dt(e){for(let s in L)this[s]=L[s]}var ut=function(){return ct.exports}(),pt=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"aioseo-redirects-import-export"},[t("grid-row",[t("grid-column",{attrs:{md:"6"}},[t("import-aioseo"),t("import-others")],1),t("grid-column",{attrs:{md:"6"}},[t("export-redirects")],1)],1)],1)},gt=[];const ht={components:{ExportRedirects:Qe,GridColumn:F,GridRow:N,ImportAioseo:ot,ImportOthers:ut}},T={};var _t=c(ht,pt,gt,!1,ft,null,null,null);function ft(e){for(let s in T)this[s]=T[s]}var mt=function(){return _t.exports}();const q={mixins:[Y],data(){return{activeRow:null,logUrls:[],deletingLog:!1,showDeleteModal:!1,shouldDeleteLog:null,wpTableKey:0,wpTableLoading:!1,strings:{lastIp:"Last IP",headers:"Headers",at:"at",additionalInfo:"Additional Info",delete:"Delete",areYouSureDeleteLog:"Are you sure you want to delete this record?",actionCannotBeUndone:"This action cannot be undone.",yesDeleteLog:"Yes, I want to delete this record",noChangedMind:"No, I changed my mind",url:"URL",hits:"Hits",lastAccessed:"Last Accessed"}}},computed:a({},g("redirects",["filters","totals","options","sort","sortDir"])),methods:l(a(a({},p("redirects",["filter","paginate","deleteLog"])),v("redirects",["updateSort","updateSortDir"])),{showInfo(e){this.activeRow=e},getHeaderInfo(e){const s=JSON.parse(e.request_data);return s.headers?s.headers:null}})};var vt=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"aioseo-redirects-logs"},[t("core-wp-table",{key:e.wpTableKey,attrs:{filters:[],totals:e.totals.logs,columns:e.columns,rows:e.logs,initialPageNumber:e.tableFields.logs.paginatedPage,loading:e.wpTableLoading,"show-search":!1,"bulk-options":e.bulkOptions},on:{"process-bulk-action":e.processBulkAction,paginate:e.processPagination,"sort-column":e.processSort},scopedSlots:e._u([{key:"last_accessed",fn:function(r){var i=r.column;return[e._v(" "+e._s(e.$moment.utc(i).tz(e.$moment.tz.guess()).format("MMMM D, YYYY"))+" "+e._s(e.strings.at)+" "+e._s(e.$moment.utc(i).tz(e.$moment.tz.guess()).format("h:mm a"))+" ")]}},{key:"actions",fn:function(r){var i=r.index,o=r.row;return[t("div",{staticClass:"actions-wrapper"},[t("core-tooltip",{attrs:{type:"action"},scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v(" "+e._s(e.strings.additionalInfo)+" ")]},proxy:!0}],null,!0)},[t("svg-circle-information",{staticClass:"log-info",nativeOn:{click:function(n){return e.showInfo(o)}}})],1),t("core-tooltip",{attrs:{type:"action"},scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v(" "+e._s(e.strings.delete)+" ")]},proxy:!0}],null,!0)},[t("svg-trash",{staticClass:"remove-log",nativeOn:{click:function(n){return e.maybeDeleteLog(i)}}})],1)],1)]}}])}),e.showDeleteModal?t("core-modal",{attrs:{"no-header":""},scopedSlots:e._u([{key:"body",fn:function(){return[t("div",{staticClass:"aioseo-modal-body"},[t("button",{staticClass:"close",on:{click:function(r){r.stopPropagation(),e.showDeleteModal=!1}}},[t("svg-close",{on:{click:function(r){e.showDeleteModal=!1}}})],1),t("h3",[e._v(e._s(e.strings.areYouSureDeleteLog))]),t("div",{staticClass:"reset-description",domProps:{innerHTML:e._s(e.strings.actionCannotBeUndone)}}),t("base-button",{attrs:{type:"blue",size:"medium",loading:e.deletingLog},on:{click:e.processDeleteLog}},[e._v(" "+e._s(e.strings.yesDeleteLog)+" ")]),t("base-button",{attrs:{type:"gray",size:"medium"},on:{click:function(r){e.showDeleteModal=!1}}},[e._v(" "+e._s(e.strings.noChangedMind)+" ")])],1)]},proxy:!0}],null,!1,2323889100)}):e._e(),e.activeRow?t("core-modal",{on:{close:function(r){e.activeRow=null}},scopedSlots:e._u([{key:"headerTitle",fn:function(){return[e._v(" "+e._s(e.strings.additionalInfo)+" ")]},proxy:!0},{key:"body",fn:function(){return[t("div",{staticClass:"aioseo-modal-body info"},[t("div",[t("strong",[e._v(e._s(e.strings.url)+":")]),e._v(" "+e._s(e.activeRow.url)+" ")]),t("div",[t("strong",[e._v(e._s(e.strings.hits)+":")]),e._v(" "+e._s(e.activeRow.hits)+" ")]),t("div",[t("strong",[e._v(e._s(e.strings.lastAccessed)+":")]),e._v(" "+e._s(e.$moment.utc(e.activeRow.last_accessed).tz(e.$moment.tz.guess()).format("MMMM D, YYYY"))+" "+e._s(e.strings.at)+" "+e._s(e.$moment.utc(e.activeRow.last_accessed).tz(e.$moment.tz.guess()).format("h:mm a"))+" ")]),e.activeRow.ip?t("div",[t("strong",[e._v(e._s(e.strings.lastIp)+":")]),e._v(" "),t("code",[e._v(e._s(e.activeRow.ip))])]):e._e(),e.getHeaderInfo(e.activeRow)?t("div",[t("strong",[e._v(e._s(e.strings.headers)+":")]),t("table",{staticClass:"header-table"},e._l(e.getHeaderInfo(e.activeRow),function(r,i){return t("tr",{key:i},[t("td",[t("strong",[e._v(e._s(i)+":")])]),t("td",[e._v(e._s(r))])])}),0)]):e._e()])]},proxy:!0}],null,!1,1360068377)}):e._e()],1)},bt=[];const yt={components:{CoreModal:j,CoreTooltip:h,CoreWpTable:J,SvgClose:U,SvgCircleInformation:B,SvgTrash:f},mixins:[q],data(){return{slug:"logs",bulkOptions:[{label:"Delete",value:"delete"}]}},watch:{logs:{deep:!0,handler(){this.wpTableKey+=1}}},computed:l(a(a({},u("redirects",["logs"])),g("redirects",["tableFields"])),{columns(){return[{slug:"url",label:this.strings.url,sortable:!0,sortDir:this.sort.logs==="url"?this.sortDir.logs:"asc",sorted:this.sort.logs==="url"},{slug:"hits",label:this.strings.hits,width:"97px",sortable:!0,sortDir:this.sort.logs==="hits"?this.sortDir.logs:"asc",sorted:this.sort.logs==="hits"},{slug:"last_accessed",label:this.strings.lastAccessed,width:"210px",sortable:!0,sortDir:this.sort.logs==="last_accessed"?this.sortDir.logs:"asc",sorted:this.sort.logs==="last_accessed"},{slug:"actions",label:"",width:"65px"}]}}),methods:l(a({},v("redirects",["setPaginatedPage"])),{processBulkAction({action:e,selectedRows:s}){if(!!s.length){if(e==="delete")return this.wpTableLoading=!0,this.deleteLog(s).then(()=>{this.wpTableLoading=!1,this.processPagination(this.paginatedPage)});this.logUrls=s}},processPagination(e){this.setPaginatedPage({group:"logs",page:e}),this.wpTableLoading=!0,this.paginate({page:e,paginateLogs:!0,filter:{slug:"logs"}}).then(()=>{this.wpTableLoading=!1})},processSort(e,s){s.target.blur(),this.wpTableLoading=!0,this.updateSort({slug:"logs",column:e.slug}),this.updateSortDir({slug:"logs",dir:this.sort.logs!==e.slug?e.sortDir:e.sortDir==="asc"?"desc":"asc"}),this.paginate({page:1,paginateLogs:!0,filter:{slug:"logs"},sort:!0}).then(()=>{this.wpTableLoading=!1})},maybeDeleteLog(e){const s=this.logs.find((t,r)=>r===e);s&&(this.showDeleteModal=!0,this.shouldDeleteLog=s.url)},processDeleteLog(){this.deletingLog=!0,this.wpTableLoading=!0,this.deleteLog([this.shouldDeleteLog]).then(()=>{this.wpTableLoading=!1,this.deletingLog=!1,this.showDeleteModal=!1,this.shouldDeleteLog=null,this.processPagination(this.paginatedPage)})}})},H={};var St=c(yt,vt,bt,!1,wt,null,null,null);function wt(e){for(let s in H)this[s]=H[s]}var $t=function(){return St.exports}(),Ot=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"aioseo-redirects-404-logs"},[t("transition-slide",{attrs:{active:e.showBulkAddRedirections}},[t("div",{staticClass:"add-bulk-redirects-wrapper"},[t("core-card",{attrs:{slug:"bulkAddNewRedirection","header-text":e.strings.addNewRedirections,toggles:!1,"no-slide":"",closes:""},on:{"close-card":function(r){e.showBulkAddRedirections=!1}}},[t("core-add-redirection",{key:e.redirect404UrlsKey,attrs:{log404:"",urls:e.get404RedirectUrls},on:{"added-redirect":e.addedRedirect}})],1)],1)]),t("core-wp-table",{key:e.wpTableKey,ref:"table",attrs:{filters:[],totals:e.totals.total404,columns:e.columns,rows:e.logs404,initialPageNumber:e.tableFields.logs404.paginatedPage,loading:e.wpTableLoading,"show-search":!1,"bulk-options":e.bulkOptions},on:{"process-bulk-action":e.processBulkAction,paginate:e.processPagination,"sort-column":e.processSort},scopedSlots:e._u([{key:"last_accessed",fn:function(r){var i=r.column;return[e._v(" "+e._s(e.$moment.utc(i).tz(e.$moment.tz.guess()).format("MMMM D, YYYY"))+" "+e._s(e.strings.at)+" "+e._s(e.$moment.utc(i).tz(e.$moment.tz.guess()).format("h:mm a"))+" ")]}},{key:"redirect",fn:function(r){var i=r.index,o=r.editRow;return[t("a",{staticClass:"add-redirect",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),o(i)}}},[t("svg-redirect"),e._v(e._s(e.strings.addRedirect)+" ")],1)]}},{key:"actions",fn:function(r){var i=r.index,o=r.row;return[t("div",{staticClass:"actions-404-wrapper"},[t("core-tooltip",{attrs:{type:"action"},scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v(" "+e._s(e.strings.additionalInfo)+" ")]},proxy:!0}],null,!0)},[t("svg-circle-information",{staticClass:"log-info",nativeOn:{click:function(n){return e.showInfo(o)}}})],1),t("core-tooltip",{attrs:{type:"action"},scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v(" "+e._s(e.strings.delete)+" ")]},proxy:!0}],null,!0)},[t("svg-trash",{staticClass:"remove-404",nativeOn:{click:function(n){return e.maybeDelete404(i)}}})],1)],1)]}},{key:"edit-row",fn:function(r){var i=r.row,o=r.editRow;return[t("core-add-redirection",{attrs:{log404:"",url:{id:i.id,url:i.url,errors:[],warnings:[]}},on:{"added-redirect":function(n){return e.processPagination(e.$refs.table.pageNumber)},cancel:function(n){return o(null)}}})]}}])}),e.showDeleteModal?t("core-modal",{attrs:{"no-header":""},scopedSlots:e._u([{key:"body",fn:function(){return[t("div",{staticClass:"aioseo-modal-body"},[t("button",{staticClass:"close",on:{click:function(r){r.stopPropagation(),e.showDeleteModal=!1}}},[t("svg-close",{on:{click:function(r){e.showDeleteModal=!1}}})],1),t("h3",[e._v(e._s(e.strings.areYouSureDeleteLog))]),t("div",{staticClass:"reset-description",domProps:{innerHTML:e._s(e.strings.actionCannotBeUndone)}}),t("base-button",{attrs:{type:"blue",size:"medium",loading:e.deletingLog},on:{click:e.processDelete404}},[e._v(" "+e._s(e.strings.yesDeleteLog)+" ")]),t("base-button",{attrs:{type:"gray",size:"medium"},on:{click:function(r){e.showDeleteModal=!1}}},[e._v(" "+e._s(e.strings.noChangedMind)+" ")])],1)]},proxy:!0}],null,!1,3796475992)}):e._e(),e.activeRow?t("core-modal",{on:{close:function(r){e.activeRow=null}},scopedSlots:e._u([{key:"headerTitle",fn:function(){return[e._v(" "+e._s(e.strings.additionalInfo)+" ")]},proxy:!0},{key:"body",fn:function(){return[t("div",{staticClass:"aioseo-modal-body info"},[t("div",[t("strong",[e._v(e._s(e.strings.url)+":")]),e._v(" "+e._s(e.activeRow.url)+" ")]),t("div",[t("strong",[e._v(e._s(e.strings.hits)+":")]),e._v(" "+e._s(e.activeRow.hits)+" ")]),t("div",[t("strong",[e._v(e._s(e.strings.lastAccessed)+":")]),e._v(" "+e._s(e.$moment.utc(e.activeRow.last_accessed).tz(e.$moment.tz.guess()).format("MMMM D, YYYY"))+" "+e._s(e.strings.at)+" "+e._s(e.$moment.utc(e.activeRow.last_accessed).tz(e.$moment.tz.guess()).format("h:mm a"))+" ")]),e.activeRow.ip?t("div",[t("strong",[e._v(e._s(e.strings.lastIp)+":")]),e._v(" "),t("code",[e._v(e._s(e.activeRow.ip))])]):e._e(),e.getHeaderInfo(e.activeRow)?t("div",[t("strong",[e._v(e._s(e.strings.headers)+":")]),t("table",{staticClass:"header-table"},e._l(e.getHeaderInfo(e.activeRow),function(r,i){return t("tr",{key:i},[t("td",[t("strong",[e._v(e._s(i)+":")])]),t("td",[e._v(e._s(r))])])}),0)]):e._e()])]},proxy:!0}],null,!1,1360068377)}):e._e()],1)},xt=[];const Ct={components:{CoreAddRedirection:ie,CoreCard:d,CoreModal:j,CoreTooltip:h,CoreWpTable:J,SvgClose:U,SvgCircleInformation:B,SvgRedirect:le,SvgTrash:f,TransitionSlide:ce},mixins:[q],data(){return{slug:"404",redirect404UrlsKey:1,showBulkAddRedirections:!1,bulkOptions:[{label:"Add Redirects",value:"add-redirects"},{label:"Delete",value:"delete"}],strings:{addRedirect:"Add Redirect",addNewRedirections:"Add New Redirections"}}},watch:{logs404:{deep:!0,handler(){this.wpTableKey+=1}}},computed:l(a(a({},u("redirects",["logs404"])),g("redirects",["tableFields"])),{columns(){return[{slug:"url",label:this.strings.url,sortable:!0,sortDir:this.sort.logs404==="url"?this.sortDir.logs404:"asc",sorted:this.sort.logs404==="url"},{slug:"hits",label:this.strings.hits,width:"97px",sortable:!0,sortDir:this.sort.logs404==="hits"?this.sortDir.logs404:"asc",sorted:this.sort.logs404==="hits"},{slug:"last_accessed",label:this.strings.lastAccessed,width:"210px",sortable:!0,sortDir:this.sort.logs404==="last_accessed"?this.sortDir.logs404:"asc",sorted:this.sort.logs404==="last_accessed"},{slug:"redirect",label:"Redirect",width:"120px"},{slug:"actions",label:"",width:"65px"}]},get404RedirectUrls(){return this.logUrls.map(e=>({url:e,errors:[],warnings:[]}))}}),methods:l(a(a({},p("redirects",["delete404"])),v("redirects",["setPaginatedPage"])),{addedRedirect(){this.processPagination(this.$refs.table.pageNumber),this.showBulkAddRedirections=!1},processBulkAction({action:e,selectedRows:s}){if(!!s.length){if(e==="delete")return this.wpTableLoading=!0,this.delete404(s).then(()=>{this.wpTableLoading=!1,this.processPagination(this.$refs.table.pageNumber)});this.showBulkAddRedirections=!0,this.redirect404UrlsKey+=1,this.logUrls=s}},processPagination(e){this.setPaginatedPage({group:"logs404",page:e}),this.wpTableLoading=!0,this.paginate({page:e,paginate404:!0,filter:{slug:"404"}}).then(()=>{this.wpTableLoading=!1}),this.setPaginatedPage({group:"main",page:1}),this.paginate({page:1,filter:{slug:"all"}})},processSort(e,s){s.target.blur(),this.wpTableLoading=!0,this.updateSort({slug:"logs404",column:e.slug}),this.updateSortDir({slug:"logs404",dir:this.sort.logs404!==e.slug?e.sortDir:e.sortDir==="asc"?"desc":"asc"}),this.paginate({page:1,paginate404:!0,filter:{slug:"404"},sort:!0}).then(()=>{this.wpTableLoading=!1})},maybeDelete404(e){const s=this.logs404.find((t,r)=>r===e);s&&(this.showDeleteModal=!0,this.shouldDeleteLog=s.url)},processDelete404(){this.deletingLog=!0,this.wpTableLoading=!0,this.delete404([this.shouldDeleteLog]).then(()=>{this.wpTableLoading=!1,this.deletingLog=!1,this.showDeleteModal=!1,this.shouldDeleteLog=null,this.processPagination(this.$refs.table.pageNumber)})}})},A={};var Rt=c(Ct,Ot,xt,!1,kt,null,null,null);function kt(e){for(let s in A)this[s]=A[s]}var Dt=function(){return Rt.exports}(),Lt=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("svg",{staticClass:"aioseo-globe",attrs:{viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M28 4.6665C15.12 4.6665 4.66669 15.1198 4.66669 27.9998C4.66669 40.8798 15.12 51.3332 28 51.3332C40.88 51.3332 51.3334 40.8798 51.3334 27.9998C51.3334 15.1198 40.88 4.6665 28 4.6665ZM9.33335 27.9998C9.33335 26.5765 9.52002 25.1765 9.82335 23.8465L20.9767 34.9998V37.3331C20.9767 39.8998 23.0767 41.9998 25.6434 41.9998V46.5031C16.4734 45.3365 9.33335 37.4965 9.33335 27.9998ZM37.3103 37.3333C39.4103 37.3333 41.137 38.71 41.7437 40.6C44.777 37.2866 46.667 32.8533 46.667 28C46.667 20.1833 41.8137 13.4633 34.977 10.71V11.6666C34.977 14.2333 32.877 16.3333 30.3103 16.3333H25.6437V21C25.6437 22.2833 24.5937 23.3333 23.3103 23.3333H18.6437V28H32.6437C33.927 28 34.977 29.05 34.977 30.3333V37.3333H37.3103Z",fill:"currentColor"}})])},Tt=[];const Ht={},P={};var At=c(Ht,Lt,Tt,!1,Pt,null,null,null);function Pt(e){for(let s in P)this[s]=P[s]}var Et=function(){return At.exports}(),Mt=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"aioseo-redirects-settings"},[t("server-config-reload-warning"),t("core-card",{attrs:{slug:"redirectSettings","header-text":e.strings.redirectSettings}},[t("core-settings-row",{attrs:{name:e.strings.redirectMethod},scopedSlots:e._u([{key:"content",fn:function(){return[t("base-box-toggle",{attrs:{name:"breadcrumbsType",options:[{value:"php",slot:"php"},{value:"server",slot:"server"}]},scopedSlots:e._u([{key:"php",fn:function(){return[t("svg-php"),t("p",[e._v(e._s(e.strings.php))])]},proxy:!0},{key:"server",fn:function(){return[t("svg-globe"),t("p",[e._v(e._s(e.strings.webServer))])]},proxy:!0}]),model:{value:e.redirectOptions.main.method,callback:function(r){e.$set(e.redirectOptions.main,"method",r)},expression:"redirectOptions.main.method"}}),e.redirectOptions.main.method==="server"?t("div",{staticClass:"web-server-settings"},[e.detectedServer?e._e():t("core-alert",{staticClass:"detected-web-server unknown",attrs:{type:"red"},domProps:{innerHTML:e._s(e.strings.unknownServer)}}),e.detectedServer?[t("core-alert",{staticClass:"detected-web-server",attrs:{type:"blue"}},[e._v(" "+e._s(e.serverDetected)+" ")]),e.redirectServerTest.failed===!0?t("core-alert",{staticClass:"missing-include",attrs:{type:"yellow"},domProps:{innerHTML:e._s(e.missingInclude)}}):e._e()]:e._e(),t("base-button",{attrs:{type:"gray",size:"medium",loading:e.nginxLoading},on:{click:function(r){return e.exportRedirects("nginx")}}},[e._v(" "+e._s(e.strings.exportNginxConfigFile)+" ")]),t("base-button",{attrs:{type:"gray",size:"medium",loading:e.apacheLoading},on:{click:function(r){return e.exportRedirects("apache")}}},[e._v(" "+e._s(e.strings.exportHtaccessFile)+" ")])],2):e._e()]},proxy:!0}])}),t("core-settings-row",{staticClass:"redirects-logs",attrs:{name:e.strings.logs},scopedSlots:e._u([{key:"content",fn:function(){return[t("table-row",[t("table-column",[t("base-toggle",{model:{value:e.redirectOptions.logs.log404.enabled,callback:function(r){e.$set(e.redirectOptions.logs.log404,"enabled",r)},expression:"redirectOptions.logs.log404.enabled"}},[e._v(" "+e._s(e.strings.logs404)+" ")])],1),t("table-column",[t("base-select",{attrs:{value:e.getJsonValue(e.redirectOptions.logs.log404.length),size:"small",options:e.lengthOptions,disabled:!e.redirectOptions.logs.log404.enabled},on:{input:function(r){return e.redirectOptions.logs.log404.length=e.setJsonValue(r)}}})],1)],1),e.redirectOptions.main.method==="php"?t("table-row",[t("table-column",[t("base-toggle",{model:{value:e.redirectOptions.logs.redirects.enabled,callback:function(r){e.$set(e.redirectOptions.logs.redirects,"enabled",r)},expression:"redirectOptions.logs.redirects.enabled"}},[e._v(" "+e._s(e.strings.redirectLogs)+" ")])],1),t("table-column",[t("base-select",{attrs:{value:e.getJsonValue(e.redirectOptions.logs.redirects.length),size:"small",options:e.lengthOptions,disabled:!e.redirectOptions.logs.redirects.enabled},on:{input:function(r){return e.redirectOptions.logs.redirects.length=e.setJsonValue(r)}}})],1)],1):e._e(),e.redirectOptions.logs.redirects.enabled&&e.redirectOptions.main.method==="php"?t("table-row",[t("table-column",[t("base-toggle",{model:{value:e.redirectOptions.logs.external,callback:function(r){e.$set(e.redirectOptions.logs,"external",r)},expression:"redirectOptions.logs.external"}},[e._v(" "+e._s(e.strings.logExternal)+" "),t("core-tooltip",{scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v(" "+e._s(e.strings.logExternalDescription)+" ")]},proxy:!0}],null,!1,3501289874)},[t("svg-circle-question-mark")],1)],1)],1)],1):e._e(),e.redirectOptions.logs.redirects.enabled&&e.redirectOptions.main.method==="php"||e.redirectOptions.logs.log404.enabled?t("table-row",[t("table-column",[t("base-toggle",{model:{value:e.redirectOptions.logs.httpHeader,callback:function(r){e.$set(e.redirectOptions.logs,"httpHeader",r)},expression:"redirectOptions.logs.httpHeader"}},[e._v(" "+e._s(e.strings.logHttpHeader)+" "),t("core-tooltip",{scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v(" "+e._s(e.strings.logHeaderInformationDescription)+" ")]},proxy:!0}],null,!1,2011477852)},[t("svg-circle-question-mark")],1)],1)],1)],1):e._e()]},proxy:!0}])}),e.redirectOptions.logs.redirects.enabled&&e.redirectOptions.main.method==="php"||e.redirectOptions.logs.log404.enabled?t("core-settings-row",{staticClass:"redirects-ip-logging",attrs:{name:e.strings.ipLogging,align:""},scopedSlots:e._u([{key:"content",fn:function(){return[t("table-row",[t("table-column",[t("base-toggle",{model:{value:e.redirectOptions.logs.ipAddress.enabled,callback:function(r){e.$set(e.redirectOptions.logs.ipAddress,"enabled",r)},expression:"redirectOptions.logs.ipAddress.enabled"}},[e._v(" "+e._s(e.strings.logIpAddresses)+" ")])],1),t("table-column",[t("base-select",{attrs:{value:e.getJsonValue(e.redirectOptions.logs.ipAddress.level),size:"small",options:e.ipLoggingOptions,disabled:!e.redirectOptions.logs.ipAddress.enabled},on:{input:function(r){return e.redirectOptions.logs.ipAddress.level=e.setJsonValue(r)}}})],1)],1),t("table-row",[t("table-column",[t("div",{staticClass:"aioseo-description",domProps:{innerHTML:e._s(e.strings.ipLoggingDescription)}})])],1)]},proxy:!0}],null,!1,507341610)}):e._e(),e.redirectOptions.main.method==="php"?[e.redirectOptions.logs.redirects.enabled&&e.redirectOptions.main.method==="php"?t("core-settings-row",{staticClass:"redirects-cache",attrs:{name:e.strings.httpCacheHeader,align:""},scopedSlots:e._u([{key:"content",fn:function(){return[t("table-row",[t("table-column",[t("base-toggle",{model:{value:e.redirectOptions.cache.httpHeader.enabled,callback:function(r){e.$set(e.redirectOptions.cache.httpHeader,"enabled",r)},expression:"redirectOptions.cache.httpHeader.enabled"}},[e._v(" "+e._s(e.strings.cacheRedirects)+" ")])],1),t("table-column",[t("base-select",{attrs:{value:e.getJsonValue(e.redirectOptions.cache.httpHeader.length),size:"small",options:e.lengthOptions,disabled:!e.redirectOptions.cache.httpHeader.enabled},on:{input:function(r){return e.redirectOptions.cache.httpHeader.length=e.setJsonValue(r)}}})],1)],1)]},proxy:!0}],null,!1,3372802612)}):e._e()]:e._e(),t("core-settings-row",{staticClass:"redirects-monitor",attrs:{name:e.strings.monitorChanges},scopedSlots:e._u([{key:"name",fn:function(){return[e._v(" "+e._s(e.strings.monitorChanges)+" "),t("core-tooltip",{scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v(" "+e._s(e.strings.monitorChangesTooltip)+" ")]},proxy:!0}])},[t("svg-circle-question-mark")],1)]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"option"},[t("base-toggle",{attrs:{size:"medium"},model:{value:e.redirectOptions.monitor.postTypes.all,callback:function(r){e.$set(e.redirectOptions.monitor.postTypes,"all",r)},expression:"redirectOptions.monitor.postTypes.all"}},[e._v(" "+e._s(e.strings.includeAllPostTypes)+" ")])],1),e.redirectOptions.monitor.postTypes.all?e._e():t("core-post-type-options",{attrs:{options:e.redirectOptions.monitor,type:"postTypes",excluded:["attachment"]}}),t("div",{staticClass:"option"},[t("base-toggle",{attrs:{size:"medium"},model:{value:e.redirectOptions.monitor.trash,callback:function(r){e.$set(e.redirectOptions.monitor,"trash",r)},expression:"redirectOptions.monitor.trash"}},[e._v(" "+e._s(e.strings.monitorTrash)+" ")])],1)]},proxy:!0}])}),t("core-settings-row",{staticClass:"redirects-defaults",attrs:{name:e.strings.redirectDefaults},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"option"},[t("base-toggle",{model:{value:e.redirectOptions.redirectDefaults.ignoreSlash,callback:function(r){e.$set(e.redirectOptions.redirectDefaults,"ignoreSlash",r)},expression:"redirectOptions.redirectDefaults.ignoreSlash"}},[e._v(" "+e._s(e.strings.ignoreSlash)+" ")])],1),t("div",{staticClass:"option"},[t("base-toggle",{model:{value:e.redirectOptions.redirectDefaults.ignoreCase,callback:function(r){e.$set(e.redirectOptions.redirectDefaults,"ignoreCase",r)},expression:"redirectOptions.redirectDefaults.ignoreCase"}},[e._v(" "+e._s(e.strings.ignoreCase)+" ")])],1),t("div",{staticClass:"option"},[t("div",{staticClass:"aioseo-description"},[e._v(" "+e._s(e.strings.redirectType)+" ")]),t("base-select",{attrs:{value:e.getJsonValue(e.redirectOptions.redirectDefaults.redirectType),size:"medium",options:e.$constants.REDIRECT_TYPES},on:{input:function(r){return e.redirectOptions.redirectDefaults.redirectType=e.setJsonValue(r)}}})],1),t("div",{staticClass:"option"},[t("div",{staticClass:"aioseo-description"},[e._v(" "+e._s(e.strings.queryParams)+" ")]),t("base-select",{attrs:{value:e.getJsonValue(e.redirectOptions.redirectDefaults.queryParam),size:"medium",options:e.$constants.REDIRECT_QUERY_PARAMS},on:{input:function(r){return e.redirectOptions.redirectDefaults.queryParam=e.setJsonValue(r)}}})],1)]},proxy:!0}])})],2)],1)},Ut=[];const It={components:{BaseBoxToggle:de,CoreAlert:m,CoreCard:d,CorePostTypeOptions:pe,CoreSettingsRow:b,CoreTooltip:h,ServerConfigReloadWarning:z,SvgCircleQuestionMark:ge,SvgGlobe:Et,SvgPhp:ue,TableColumn:he,TableRow:_e},mixins:[Y],data(){return{saving:!1,nginxLoading:!1,apacheLoading:!1,strings:{redirectSettings:"Redirect Settings",redirectMethod:"Redirect Method",unknownServer:this.$t.sprintf("We cannot detect your web server. Server redirects are disabled. %1$s",this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"redirectUnknownWebserver",!0)),php:"PHP",webServer:"Web Server",logs:"Logs",ipLogging:"IP Logging",httpCacheHeader:"HTTP Cache Header",redirectDefaults:"Redirect Defaults",logs404:"404 Logs",redirectLogs:"Redirect Logs",logExternal:"Log External Redirects",logHttpHeader:"Log HTTP Header Information",enableRedirectCache:"Enable Redirect Cache",ignoreCase:"Ignore Case",ignoreSlash:"Ignore Slash",cacheRedirects:"Cache Redirects",objectCache:"Object Cache",ipLoggingDescription:this.$t.sprintf("%1$sGDPR / Privacy information%2$s",'<a target="_blank" href="'+this.$links.getDocUrl("redirectGdpr")+'">',"</a>"),logIpAddresses:"Log IP Addresses",redirectType:"Redirect Type",queryParams:"Query Parameters",logExternalDescription:this.$t.sprintf("Log redirects that happen on your site even if the redirect happened outside of %1$s","AIOSEO"),logHeaderInformationDescription:"Capture HTTP header information with the logs (except for cookies).",exportNginxConfigFile:this.$t.sprintf("Export %1$s config file","NGINX"),exportHtaccessFile:this.$t.sprintf("Export %1$s file",".htaccess"),autoWriteHtaccess:this.$t.sprintf("Auto-write to %1$s",".htaccess"),monitorChanges:"Automatic Redirects",includeAllPostTypes:"Include All Post Types",monitorTrash:"Monitor Trash",monitorChangesTooltip:'This allows you to monitor changes to post types and automatically add redirects based on URL changes. These will show up with a group called "Modified Posts".'},lengthOptions:[{label:"1 hour",value:"hour"},{label:"1 day",value:"day"},{label:"1 week",value:"week"},{label:"Forever",value:"forever"}],ipLoggingOptions:[{label:"Full Logging",value:"full"},{label:"Anonymize IP",value:"anonymous"}]}},computed:l(a({},u("redirects",["redirectOptions","redirectServerTest"])),{serverDetected(){return this.$t.sprintf("%1$s Server has been detected.",this.detectedServer)},detectedServer(){return this.$aioseo.data.server.apache?"Apache":this.$aioseo.data.server.nginx?"NGINX":null},missingInclude(){const e=this.$aioseo.data.server.apache?"Include ":"include ",s=this.$aioseo.data.server.nginx?";":"",t="<br><code>"+e+this.$aioseo.redirects.path+s+"</code>";return this.$t.sprintf("Make sure you include the following in your server configuration file: %1$s",t)}}),methods:l(a({},p("redirects",["exportServerRedirects"])),{exportRedirects(e){this[e+"Loading"]=!0,this.exportServerRedirects(e).then(s=>{this[e+"Loading"]=!1;const t=e==="apache"?"htaccess":e,r=new Blob([s.body.redirects]),i=document.createElement("a");i.href=URL.createObjectURL(r),i.download=`aioseo-export-redirects-${this.$moment().format("YYYY-MM-DD")}.${t}`,i.click(),URL.revokeObjectURL(i.href)})}})},E={};var zt=c(It,Mt,Ut,!1,Ft,null,null,null);function Ft(e){for(let s in E)this[s]=E[s]}var Nt=function(){return zt.exports}(),Vt=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("core-main",{attrs:{"page-name":e.strings.pageName,"show-save-button":e.showSaveButton,"exclude-tabs":e.excludeTabs}},[t(e.$route.name,{tag:"component"})],1)},Yt=[];const jt={components:{CoreMain:se,FullSiteRedirect:qe,ImportExport:mt,Logs:$t,Logs404:Dt,Redirects:oe,Settings:Nt},mixins:[ee,te],data(){return{strings:{pageName:"Redirects"}}},computed:l(a({},g("redirects",["options"])),{showSaveButton(){return this.$route.name!=="redirects"&&this.$route.name!=="groups"&&this.$route.name!=="logs-404"&&this.$route.name!=="logs"&&this.$route.name!=="import-export"},excludeTabs(){const e=this.$addons.isActive("aioseo-redirects")?this.getExcludedUpdateTabs("aioseo-redirects"):this.getExcludedActivationTabs("aioseo-redirects");return this.options.logs.log404.enabled||e.push("logs-404"),(!this.options.logs.redirects.enabled||this.options.main.method==="server")&&e.push("logs"),e}})},M={};var Jt=c(jt,Vt,Yt,!1,Bt,null,null,null);function Bt(e){for(let s in M)this[s]=M[s]}var Js=function(){return Jt.exports}();export{Js as default};
