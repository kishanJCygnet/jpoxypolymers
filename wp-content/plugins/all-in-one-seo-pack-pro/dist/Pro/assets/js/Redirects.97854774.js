var H=Object.defineProperty,N=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var R=(e,s,t)=>s in e?H(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,n=(e,s)=>{for(var t in s||(s={}))z.call(s,t)&&R(e,t,s[t]);if(m)for(var t of m(s))W.call(s,t)&&R(e,t,s[t]);return e},u=(e,s)=>N(e,j(s));import{j as p,p as d,a0 as V,a1 as x}from"./vendor.f6bbc087.js";import"./ToolsSettings.7cc9335c.js";import"./index.2a722b10.js";import{J as k}from"./JsonValues.08065e69.js";import{C as D,c as _,d as f,S as G}from"./index.0c09686e.js";import{S as v}from"./Close.952d41b7.js";import{n as o}from"./vueComponentNormalizer.4c221f82.js";import{C as h}from"./Index.d771a71f.js";import{C as Q}from"./Modal.b51725b4.js";import{C as A}from"./Tooltip.b5773cff.js";import{C as P}from"./Table.a478865a.js";import{S as J}from"./Information.da04dcfb.js";import{S as K}from"./QuestionMark.4dbc0d97.js";import{C as I}from"./Index.3946845a.js";import{C as Z}from"./ProBadge.53877254.js";import{S as X}from"./External.c6f0b2ea.js";import{S as M}from"./Exclamation.32e01d31.js";import{B as ee}from"./Checkbox.985acf88.js";import{G as te,a as se}from"./Row.de5121b5.js";import{S as re}from"./Gear.c545cf72.js";import{S as O}from"./Trash.12a3da09.js";import{T as B}from"./Slide.c8a2867c.js";import{S as ie}from"./Plus.4a10b727.js";import{C as ae}from"./Blur.4b173825.js";import{C as le}from"./Card.75bef818.js";var ne=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"aioseo-add-redirection-url-results"},[t("ul",e._l(e.results,function(r,i){return t("li",{key:i,on:{click:function(a){return e.$emit("set-url",r.link)}}},[t("span",[t("div",{staticClass:"option"},[t("div",{staticClass:"option-title"},[t("div",{domProps:{innerHTML:e._s(e.getOptionTitle(r.label))}}),r.status!=="publish"?t("core-pro-badge",[e._v(" "+e._s(e.getStatusLabel(r.status))+" ")]):e._e()],1),t("div",{staticClass:"option-details"},[t("span",[e._v(e._s(r.link))])])]),t("a",{staticClass:"option-permalink",attrs:{href:r.link,target:"_blank"},on:{click:function(a){return a.stopPropagation(),function(){}.apply(null,arguments)}}},[t("svg-external")],1)])])}),0)])},oe=[];const ue={components:{CoreProBadge:Z,SvgExternal:X},props:{results:{type:Array,required:!0},url:String},data(){return{strings:{DRAFT:"DRAFT",PENDING:"PENDING",FUTURE:"FUTURE"}}},methods:{getOptionTitle(e){const s=new RegExp(`(${this.url})`,"gi");return e.replace(s,'<span class="search-term">$1</span>')},getStatusLabel(e){switch(e.toLowerCase()){case"draft":return this.strings.DRAFT;case"future":return this.strings.FUTURE;case"pending":return this.strings.PENDING}}}},y={};var ce=o(ue,ne,oe,!1,de,null,null,null);function de(e){for(let s in y)this[s]=y[s]}var F=function(){return ce.exports}(),he=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{ref:"redirect-target-url",staticClass:"aioseo-add-redirection-target-url"},[t("base-input",{class:{"aioseo-error":e.errors.length,"aioseo-active":!e.errors.length&&!e.warnings.length&&e.url,"aioseo-warning":e.warnings.length},attrs:{size:"medium",placeholder:"/target-page/"},on:{keyup:e.searchChange,focus:function(r){e.showResults=!0},input:function(r){return e.$emit("input",e.value)},blur:function(r){return e.$emit("blur",e.value)}},scopedSlots:e._u([{key:"append-icon",fn:function(){return[t("div",{staticClass:"append-icon"},[e.isLoading?e._e():[e.errors.length?t("svg-circle-close"):e._e(),!e.errors.length&&!e.warnings.length&&e.url?t("svg-circle-check"):e._e(),e.warnings.length?t("svg-circle-exclamation"):e._e()],e.isLoading?t("core-loader",{attrs:{dark:""}}):e._e()],2)]},proxy:!0}]),model:{value:e.value,callback:function(r){e.value=r},expression:"value"}}),e.showResults&&e.results.length?t("core-add-redirection-url-results",{attrs:{results:e.results,url:e.value},on:{"set-url":e.setUrl}}):e._e()],1)},ge=[];const pe={components:{CoreAddRedirectionUrlResults:F,CoreLoader:D,SvgCircleCheck:_,SvgCircleClose:v,SvgCircleExclamation:M},props:{url:String,errors:Array,warnings:Array},data(){return{showResults:!1,isLoading:!1,value:null,results:[]}},watch:{value(){this.value&&(this.value=this.value.replace(/(https?:\/)(\/)+|(\/)+/g,"$1$2$3"))},url:{immediate:!0,handler(){this.value=this.url}}},computed:n({},p(["currentPost"])),methods:u(n({},d("redirects",["getPosts"])),{onBlur(){setTimeout(()=>{this.$emit("input",this.value)},150)},searchChange(){if(!!this.value){if(this.value.startsWith("/")||this.value.startsWith("http:")||this.value.startsWith("https:")){this.isLoading=!1;return}this.isLoading=!0,f(()=>{if(!this.value){this.isLoading=!1;return}this.showResults=!0,this.ajaxSearch(this.value).then(()=>this.isLoading=!1)},500)}},ajaxSearch(e){return this.getPosts({query:e,postId:this.currentPost.id}).then(s=>{this.results=s.body.objects})},setUrl(e){this.showResults=!1,this.value=e.replace(this.$aioseo.urls.mainSiteUrl,"",e),this.$emit("input",this.value)},documentClick(e){if(!this.showResults)return;const s=e&&e.target?e.target:null,t=this.$refs["redirect-target-url"];t&&t!==s&&!t.contains(s)&&(this.showResults=!1)}}),mounted(){document.addEventListener("click",this.documentClick)},beforeDestroy(){document.removeEventListener("click",this.documentClick)}},b={};var _e=o(pe,he,ge,!1,fe,null,null,null);function fe(e){for(let s in b)this[s]=b[s]}var ve=function(){return _e.exports}(),me=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{ref:"redirect-source-url",staticClass:"aioseo-redirect-source-url"},[t("base-input",{class:{"aioseo-error":e.url.errors.length,"aioseo-active":!e.url.errors.length&&!e.url.warnings.length&&e.url.url,"aioseo-warning":e.url.warnings.length},attrs:{value:e.url.url,disabled:e.log404||e.disableSource,size:"medium",placeholder:"/source-page/"},on:{input:function(r){return e.updateSourceUrl(r)},keyup:e.searchChange,focus:function(r){e.showResults=!0}},scopedSlots:e._u([{key:"append-icon",fn:function(){return[t("div",{staticClass:"append-icon"},[e.isLoading?e._e():[e.url.errors.length?t("svg-circle-close"):e._e(),!e.url.errors.length&&!e.url.warnings.length&&e.url.url?t("svg-circle-check"):e._e(),e.url.warnings.length?t("svg-circle-exclamation"):e._e(),t("svg-gear",{class:{active:e.urlOptionsActive},nativeOn:{click:function(r){e.showOptions=!e.showOptions}}}),e.allowDelete?t("svg-trash",{nativeOn:{click:function(r){return e.$emit("remove-url")}}}):e._e()],e.isLoading?t("core-loader",{attrs:{dark:""}}):e._e()],2)]},proxy:!0}])}),!e.url.regex&&e.showResults&&e.results.length?t("core-add-redirection-url-results",{attrs:{results:e.results,url:e.url.url},on:{"set-url":e.setUrl}}):e._e(),e.log404?e._e():e._t("source-url-description"),t("transition-slide",{staticClass:"source-url-options",attrs:{active:e.showOptions}},[t("div",[t("grid-row",[t("grid-column",{attrs:{xs:"4"}},[t("base-checkbox",{attrs:{size:"medium",value:e.url.ignoreSlash},on:{input:function(r){return e.updateOption("ignoreSlash",r)}}},[e._v(" "+e._s(e.strings.ignoreSlash)+" ")])],1),t("grid-column",{attrs:{xs:"4"}},[t("base-checkbox",{attrs:{size:"medium",value:e.url.ignoreCase},on:{input:function(r){return e.updateOption("ignoreCase",r)}}},[e._v(" "+e._s(e.strings.ignoreCase)+" ")])],1),!e.log404&&!e.disableSource?t("grid-column",{attrs:{xs:"4"}},[t("base-checkbox",{attrs:{size:"medium",value:e.url.regex},on:{input:function(r){return e.updateOption("regex",r)}}},[e._v(" "+e._s(e.strings.regex)+" ")])],1):e._e()],1)],1)]),t("transition-slide",{attrs:{active:!!e.url.errors.length}},e._l(e.url.errors,function(r,i){return t("core-alert",{key:i,staticClass:"source-url-error",attrs:{type:"red",size:"small"},domProps:{innerHTML:e._s(r)}})}),1),t("transition-slide",{attrs:{active:!!e.url.warnings.length}},e._l(e.url.warnings,function(r,i){return t("core-alert",{key:i,staticClass:"source-url-warning",attrs:{type:"yellow",size:"small"},domProps:{innerHTML:e._s(r)}})}),1)],2)},Re=[];const ye={components:{BaseCheckbox:ee,CoreAddRedirectionUrlResults:F,CoreAlert:h,CoreLoader:D,GridColumn:te,GridRow:se,SvgCircleCheck:_,SvgCircleClose:v,SvgCircleExclamation:M,SvgGear:re,SvgTrash:O,TransitionSlide:B},props:{url:{type:Object,default(){return{id:null,url:null,regex:!1,ignoreSlash:!0,ignoreCase:!0,errors:[],warnings:[]}}},allowDelete:Boolean,targetUrl:String,log404:Boolean,disableSource:Boolean},data(){return{showResults:!1,isLoading:!1,showOptions:!1,strings:{ignoreSlash:"Ignore Slash",ignoreCase:"Ignore Case",regex:"Regex"},results:[]}},watch:{targetUrl(){this.updateSourceUrl(this.url.url)}},computed:{maybeRegex(){return this.url.url.match(/[*\\()[\]^$]/)!==null||this.url.url.indexOf(".?")!==-1},invalidUrl(){if(!this.url.url)return!1;const e=[];if(this.url.regex)try{new RegExp(this.url.url)}catch{return e.push("The regex syntax is invalid."),e}if(this.url.url.substr(0,4)==="http"&&this.url.url.indexOf(document.location.origin)===-1&&e.push("Please enter a valid relative source URL."),this.url.url.match(/%\w+%/)&&e.push("Permalinks are not currently supported."),(this.url.url==="/(.*)"||this.url.url==="^/(.*)")&&e.push("This redirect is supported using the Relocate Site feature under Full Site Redirect tab."),this.url.url&&this.url.url.length&&this.targetUrl&&this.targetUrl.length){let s=this.url.ignoreSlash?this.$links.unTrailingSlashIt(this.url.url):this.url.url,t=this.url.ignoreSlash?this.$links.unTrailingSlashIt(this.targetUrl):this.targetUrl;s=this.url.ignoreCase?s.toLowerCase():s,t=this.url.ignoreCase?t.toLowerCase():t,(s===t||this.url.regex&&t.match(s))&&e.push("Your source is the same as a target and this will create a loop.")}return e},iffyUrl(){if(!this.url.url)return[];const e=[];return this.url.url.substr(0,4)!=="http"&&this.url.url.substr(0,1)!=="/"&&0<this.url.url.length&&!this.url.regex&&e.push(this.$t.sprintf("The source URL should probably start with a %1$s","<code>/</code>")),this.url.url.indexOf("#")!==-1&&e.push("Anchor values are not sent to the server and cannot be redirected."),!this.log404&&this.maybeRegex&&!this.url.regex&&e.push(this.$t.sprintf("Remember to enable the %1$s option if this is a regular expression.","<code>Regex</code>")),this.url.regex&&(this.url.url.indexOf("^")===-1&&this.url.url.indexOf("$")===-1&&e.push(this.$t.sprintf("To prevent a greedy regular expression you can use %1$s to anchor it to the start of the URL. For example: %2$s","<code>^/</code>","<code>^/"+this.url.url.replace(/^\//,"")+"</code>")),0<this.url.url.indexOf("^")&&e.push(this.$t.sprintf("The caret %1$s should be at the start. For example: %2$s","<code>^/</code>","<code>^/"+this.url.url.replace("^","").replace(/^\//,"")+"</code>")),this.url.url.indexOf("^")===0&&this.url.url.indexOf("^/")===-1&&e.push(this.$t.sprintf("The source URL should probably start with a %1$s","<code>^/</code>")),this.url.url.length-1!==this.url.url.indexOf("$")&&this.url.url.indexOf("$")!==-1&&e.push(this.$t.sprintf("The dollar symbol %1$s should be at the end. For example: %2$s","<code>$</code>","<code>"+this.url.url.replace(/\$/g,"")+"$</code>"))),this.url.url.match(/(\.html|\.htm|\.php|\.pdf|\.jpg)$/)!==null&&e.push("Some servers may be configured to serve file resources directly, preventing a redirect occurring."),e},urlOptionsActive(){return this.url.regex||this.showOptions}},methods:u(n({},d("redirects",["getPosts"])),{updateSourceUrl(e){e&&(e=e.replace(/(https?:\/)(\/)+|(\/)+/g,"$1$2$3")),this.$set(this.url,"url",e),this.$set(this.url,"errors",this.invalidUrl),this.$set(this.url,"warnings",this.iffyUrl),this.$emit("updated-url",this.url)},updateOption(e,s){this.$set(this.url,e,s),this.updateSourceUrl(this.url.url),this.$emit("updated-option",this.url)},searchChange(){if(!(!this.url.url||this.url.regex)){if(this.url.url.startsWith("/")||this.url.url.startsWith("^")||this.url.url.startsWith("http:")||this.url.url.startsWith("https:")){this.isLoading=!1;return}this.isLoading=!0,f(()=>{if(!this.url.url){this.isLoading=!1;return}this.showResults=!0,this.ajaxSearch(this.url.url).then(()=>this.isLoading=!1)},500)}},ajaxSearch(e){return this.getPosts({query:e}).then(s=>{this.results=s.body.objects})},setUrl(e){this.showResults=!1,this.updateOption("url",e.replace(this.$aioseo.urls.mainSiteUrl,"",e))},documentClick(e){if(!this.showResults)return;const s=e&&e.target?e.target:null,t=this.$refs["redirect-source-url"];t&&t!==s&&!t.contains(s)&&(this.showResults=!1)}}),mounted(){this.url.showOptions&&(this.showOptions=!0,this.updateSourceUrl(this.url.url)),document.addEventListener("click",this.documentClick)},beforeDestroy(){document.removeEventListener("click",this.documentClick)}},C={};var be=o(ye,me,Re,!1,Ce,null,null,null);function Ce(e){for(let s in C)this[s]=C[s]}var Se=function(){return be.exports}(),Te=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"custom-rules"},[t("table",{staticClass:"redirects-options-table",attrs:{cellspacing:"0",cellpadding:"0"}},[t("thead",[t("tr",[t("td",{attrs:{colspan:"2"}},[e._v(e._s(e.strings.customRules))])])]),t("tbody",e._l(e.customRules,function(r,i){return t("tr",{key:i,staticClass:"rule",class:{even:i%2===0}},[t("td",{staticClass:"rule-settings"},[t("base-select",{attrs:{options:e.filteredTypes,size:"medium",placeholder:e.strings.selectMatchRule,value:e.getRuleValue("type",i)},on:{input:function(a){return e.updateRule("type",a,i)}}}),e.getType(i,"options")||e.getType(i,"taggable")?t("base-select",{attrs:{options:e.getType(i,"options")||[],size:"medium",value:e.getRuleValue("value",i),multiple:e.getType(i,"multiple")||e.getType(i,"taggable"),taggable:e.getType(i,"taggable"),placeholder:e.getType(i,"placeholder")||e.strings.selectAValue},on:{input:function(a){return e.updateRule("value",a,i)}}}):e._e(),e.getType(i,"keyValuePair")?t("base-input",{attrs:{value:e.getRuleValue("key",i),size:"medium",placeholder:e.getType(i,"placeholderKey")||e.strings.key},on:{input:function(a){return e.updateRule("key",a,i)}}}):e._e(),!e.getType(i,"options")&&!e.getType(i,"taggable")?t("base-input",{attrs:{value:e.getRuleValue("value",i),size:"medium",placeholder:e.getType(i,"placeholder")||e.strings.value,disabled:!e.getType(i)},on:{input:function(a){return e.updateRule("value",a,i)}}}):e._e(),e.getType(i,"regex")?t("base-toggle",{attrs:{value:e.getRuleValue("regex",i)},on:{input:function(a){return e.updateRule("regex",a,i)}}},[e._v(" "+e._s(e.strings.regex)+" ")]):e._e()],1),t("td",{staticClass:"actions"},[t("core-tooltip",{staticClass:"action",attrs:{type:"action"},scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v(" "+e._s(e.strings.delete)+" ")]},proxy:!0}],null,!0)},[t("svg-trash",{nativeOn:{click:function(a){return e.removeRule(i)}}})],1)],1)])}),0),t("tfoot",[t("tr",[t("td",{attrs:{colspan:"2"}},[t("base-button",{attrs:{size:"small-table",type:"black"},on:{click:function(r){return e.addRule(null)}}},[t("svg-circle-plus"),e._v(" "+e._s(e.strings.add)+" ")],1)],1)])])])])},Ue=[];const $e={type:null,key:null,value:null,regex:null},we={components:{CoreTooltip:A,SvgCirclePlus:ie,SvgTrash:O},props:{editCustomRules:Array},data(){return{strings:{customRules:"Custom Rules",selectMatchRule:"Select Rule",delete:"Delete",add:"Add Custom Rule",regex:"Regex",selectAValue:"Select a Value or Add a New One",key:"Key",value:"Value"},customRules:[],types:[{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.login,value:"login",placeholder:"Select Status",singleRule:!0,options:[{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.loggedin,value:"loggedin"},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.loggedout,value:"loggedout"}]},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.role,value:"role",multiple:!0,placeholder:"Select Roles",options:Object.entries(this.$aioseo.user.roles).map(e=>({label:e[1],value:e[0]}))},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.referrer,value:"referrer",regex:!0,singleRule:!0},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.agent,value:"agent",regex:!0,taggable:!0,multiple:!0,options:[{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.mobile,value:"mobile",docLink:this.$links.getDocLink("Learn more","redirectCustomRulesUserAgent",!0)},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.feeds,value:"feeds",docLink:this.$links.getDocLink("Learn more","redirectCustomRulesUserAgent",!0)},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.libraries,value:"libraries",docLink:this.$links.getDocLink("Learn more","redirectCustomRulesUserAgent",!0)}]},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.cookie,value:"cookie",keyValuePair:!0,regex:!0},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.ip,value:"ip",placeholder:"Enter an IP Address",taggable:!0,regex:!0,singleRule:!0},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.server,value:"server",placeholder:"Enter the Server Name",regex:!0,singleRule:!0},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.header,value:"header",keyValuePair:!0,regex:!0},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.wp_filter,value:"wp_filter",placeholder:"Enter a WordPress Filter Name",taggable:!0},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.locale,value:"locale",taggable:!0,regex:!0,placeholder:"Enter a Locale Code, e.g.: en_GB, es_ES",singleRule:!0}]}},computed:{hasCustomRules(){return 0<this.customRules.length},filteredTypes(){return this.types.map(e=>(e.$isDisabled=!1,e.singleRule&&this.customRules.find(s=>e.value===s.type)&&(e.$isDisabled=!0),e))}},methods:{removeRule(e){this.$delete(this.customRules,e),this.hasCustomRules||this.addRule(null)},addRule(e,s=!1){e||(e=JSON.parse(JSON.stringify($e))),(!s||s&&this.customRules.filter(t=>t===e).length===0)&&this.customRules.push(e)},updateRule(e,s,t){const r=this.customRules[t];s=typeof s.value!="undefined"?s.value:s,s=typeof s=="object"&&s.length?s.map(i=>i.value):s,r[e]=s,e==="type"&&(r.value=""),this.$set(this.customRules,t,r)},getRuleValue(e,s,t=!1){if(!this.customRules[s])return;let i=this.customRules[s][e],a=null;if(t)return i;switch(e){case"type":i=this.types.find(l=>i===l.value);break;case"value":a=this.getType(s,"options"),a&&(typeof i=="object"?i=i.map(l=>a.find(g=>l===g.value)||l).filter(l=>!!l):i=a.find(l=>i===l.value)||i),this.getType(s,"taggable")&&(i=typeof i=="object"?i.map(l=>typeof l.label=="undefined"?{label:l,value:l}:l):[]);break}return i},getType(e,s){const t=this.getRuleValue("type",e);return s?t&&typeof t[s]!="undefined"?t[s]:!1:t}},mounted(){this.editCustomRules&&(this.customRules=this.editCustomRules),this.hasCustomRules||this.addRule(null)}},S={};var Ee=o(we,Te,Ue,!1,Le,"6dcc9dfa",null,null);function Le(e){for(let s in S)this[s]=S[s]}var xe=function(){return Ee.exports}(),ke=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("svg",{staticClass:"aioseo-right-arrow",attrs:{width:"36",height:"16",viewBox:"0 0 36 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M36 8L28.4211 0.5V6.125H0V9.875H28.4211V15.5L36 8Z",fill:"currentColor"}})])},De=[];const Ae={},T={};var Pe=o(Ae,ke,De,!1,Ie,null,null,null);function Ie(e){for(let s in T)this[s]=T[s]}var Me=function(){return Pe.exports}(),Oe=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"aioseo-add-redirection",class:{"edit-url":e.edit,"log-404":e.log404}},[e.genericError?t("core-alert",{staticClass:"generic-error",attrs:{type:"red"}},[e._v(" "+e._s(e.strings.genericErrorMessage)+" ")]):e._e(),t("div",{staticClass:"urls"},[t("div",{staticClass:"source"},[t("div",{staticClass:"aioseo-settings-row no-border no-margin small-padding"},[t("div",{staticClass:"settings-name"},[t("div",{staticClass:"name small-margin"},[e._v(" "+e._s(e.sourceUrl)+": ")])]),e._l(e.sourceUrls,function(r,i){return t("core-add-redirection-url",{key:i,attrs:{url:r,"allow-delete":1<e.sourceUrls.length,"target-url":e.targetUrl,log404:e.log404,disableSource:e.disableSource},on:{"remove-url":function(a){return e.removeUrl(i)}},scopedSlots:e._u([e.edit&&!e.disableSource?{key:"source-url-description",fn:function(){return[t("div",{staticClass:"aioseo-description source-description",domProps:{innerHTML:e._s(e.strings.sourceUrlDescription)}})]},proxy:!0}:null],null,!0)})}),!e.edit&&!e.log404&&!e.disableSource?t("base-button",{attrs:{size:"small",type:"gray"},on:{click:e.addUrl}},[e._v(" "+e._s(e.strings.addUrl)+" ")]):e._e()],2)]),e.redirectTypeHasTarget()?t("div",{staticClass:"url-arrow"},[t("svg-right-arrow")],1):e._e(),e.redirectTypeHasTarget()?t("div",{staticClass:"target"},[t("div",{staticClass:"aioseo-settings-row no-border no-margin small-padding"},[t("div",{staticClass:"settings-name"},[t("div",{staticClass:"name small-margin"},[e._v(" "+e._s(e.strings.targetUrl)+": ")])]),t("div",{staticClass:"url"},[t("core-add-redirection-target-url",{attrs:{url:e.targetUrl,errors:e.targetUrlErrors,warnings:e.targetUrlWarnings},on:{input:e.updateTargetUrl}}),t("div",{staticClass:"aioseo-description"},[e._v(" "+e._s(e.strings.targetUrlDescription)+" ")]),t("transition-slide",{attrs:{active:!!e.targetUrlErrors.length}},[t("div",e._l(e.targetUrlErrors,function(r,i){return t("core-alert",{key:i,staticClass:"target-url-error",attrs:{type:"red",size:"small"},domProps:{innerHTML:e._s(r)}})}),1)]),t("transition-slide",{attrs:{active:!!e.targetUrlWarnings.length}},[t("div",e._l(e.targetUrlWarnings,function(r,i){return t("core-alert",{key:i,staticClass:"target-url-warning",attrs:{type:"yellow",size:"small"},domProps:{innerHTML:e._s(r)}})}),1)])],1)])]):e._e(),!e.edit&&!e.log404&&!e.disableSource?[t("div",{staticClass:"break"}),t("div",{staticClass:"source"},[t("div",{staticClass:"aioseo-description source-description",domProps:{innerHTML:e._s(e.strings.sourceUrlDescription)}})]),t("div",{staticClass:"url-arrow"}),t("div",{staticClass:"target"})]:e._e()],2),t("div",{staticClass:"settings",class:{advanced:e.showAdvancedSettings}},[t("div",{staticClass:"all-settings"},[t("div",{staticClass:"all-settings-content"},[t("div",{staticClass:"redirect-type"},[e._v(" "+e._s(e.strings.redirectType)+" "),t("base-select",{attrs:{options:e.$constants.REDIRECT_TYPES,size:"medium"},model:{value:e.redirectType,callback:function(r){e.redirectType=r},expression:"redirectType"}})],1),t("transition-slide",{staticClass:"advanced-settings",attrs:{active:e.showAdvancedSettings}},[t("div",{staticClass:"query-params"},[e._v(" "+e._s(e.strings.queryParams)+" "),t("base-select",{attrs:{options:e.redirectQueryParams,size:"medium"},model:{value:e.queryParam,callback:function(r){e.queryParam=r},expression:"queryParam"}})],1)]),e.showAdvancedSettings?e._e():t("a",{staticClass:"advanced-settings-link",attrs:{href:"#"},on:{click:function(r){r.preventDefault(),e.showAdvancedSettings=!e.showAdvancedSettings}}},[e._v(e._s(e.strings.advancedSettings))])],1)]),t("transition-slide",{staticClass:"advanced-settings",attrs:{active:e.showAdvancedSettings}},[t("custom-rules",{attrs:{"edit-custom-rules":e.customRules}})],1),t("div",{staticClass:"actions",class:{advanced:e.showAdvancedSettings}},[t("base-button",{attrs:{size:"medium",type:"blue",loading:e.addingRedirect,disabled:e.saveIsDisabled},on:{click:function(r){e.edit?e.saveChanges():e.addRedirects()}}},[e._v(" "+e._s(e.edit?e.strings.saveChanges:e.addRedirect)+" ")]),e.edit?t("base-button",{staticClass:"cancel-edit-row",attrs:{size:"medium",type:"gray"},on:{click:function(r){return e.$emit("cancel",!0)}}},[e._v(" "+e._s(e.strings.cancel)+" ")]):e._e()],1)],1)],1)},Be=[];const Fe={components:{CoreAddRedirectionTargetUrl:ve,CoreAddRedirectionUrl:Se,CoreAlert:h,CustomRules:xe,SvgRightArrow:Me,TransitionSlide:B},mixins:[k],props:{edit:Boolean,log404:Boolean,disableSource:Boolean,url:Object,urls:Array,target:String,type:Number,query:String,slash:Boolean,case:Boolean,rules:{type:Array,default(){return[]}}},data(){return{genericError:!1,showAdvancedSettings:!1,addingRedirect:!1,targetUrl:null,targetUrlErrors:[],targetUrlWarnings:[],sourceUrls:[],redirectType:null,queryParam:null,customRules:[],strings:{redirectType:"Redirect Type:",targetUrl:"Target URL",targetUrlDescription:"Enter a URL or start by typing a page or post title, slug or ID.",addUrl:"Add URL",sourceUrlDescription:this.$t.sprintf("Enter a relative URL to redirect from or start by typing in page or post title, slug or ID. You can also use regex (%1$s)",this.$links.getDocLink("what's this?","redirectManagerRegex")),advancedSettings:"Advanced Settings",queryParams:"Query Parameters:",saveChanges:"Save Changes",cancel:"Cancel",genericErrorMessage:"An error occurred while adding your redirects. Please try again later."}}},watch:{sourceUrls:{deep:!0,handler(){f(()=>this.checkForDuplicates(),500)}}},computed:u(n({},p("redirects",["options"])),{saveIsDisabled(){return!!this.sourceUrls.filter(e=>!e.url).length||!!this.sourceUrls.filter(e=>0<e.errors.length).length||this.redirectTypeHasTarget()&&!this.targetUrl},getRelativeAbsolute(){const e=this.targetUrl.match(/^\/([a-zA-Z0-9_\-%]*\..*)\//);return e?e[0]:null},sourceUrl(){return 1<this.sourceUrls.length?"Source URL's":"Source URL"},addRedirect(){return 1<this.sourceUrls.length?"Add Redirects":"Add Redirect"},hasTargetUrlErrors(){if(!this.targetUrl)return[];const e=[];this.targetUrl&&!this.beginsWith(this.targetUrl,"https://")&&!this.beginsWith(this.targetUrl,"http://")&&this.targetUrl.substr(0,1)!=="/"&&e.push(this.$t.sprintf("Your target URL should be an absolute URL like %1$s or start with a slash.","<code>https://domain.com/"+this.targetUrl+"</code>","<code>/"+this.targetUrl+"</code>"));const s=this.targetUrl.match(/[|\\$]/g);return s!==null&&(this.sourceUrls.map(r=>r.regex).every(r=>r)||e.push(this.$t.sprintf("Your target URL contains the invalid character(s) %1$s","<code>"+s+"</code>"))),e},hasTargetUrlWarnings(){if(!this.targetUrl)return[];const e=[];return this.getRelativeAbsolute&&e.push(this.$t.sprintf("Your URL appears to contain a domain inside the path: %1$s. Did you mean to use %2$s instead?","<code>"+this.getRelativeAbsolute+"</code>","<code>https:/"+this.getRelativeAbsolute+"</code>")),e},getDefaultRedirectType(){let e=this.getJsonValue(this.options.redirectDefaults.redirectType);return e||(e=this.$constants.REDIRECT_TYPES[0]),e},getDefaultQueryParam(){let e=this.getJsonValue(this.options.redirectDefaults.queryParam);return e||(e=this.$constants.REDIRECT_QUERY_PARAMS[0]),e},getDefaultSlash(){return this.options.redirectDefaults.ignoreSlash},getDefaultCase(){return this.options.redirectDefaults.ignoreCase},getDefaultSourceUrls(){return[JSON.parse(JSON.stringify(this.getDefaultSourceUrl))]},getDefaultSourceUrl(){return{id:null,url:null,regex:!1,ignoreSlash:this.slash||this.getDefaultSlash||!1,ignoreCase:this.case||this.getDefaultCase||!1,errors:[],warnings:[]}},redirectQueryParams(){return 0<this.sourceUrls.filter(e=>e.regex).length?this.$constants.REDIRECT_QUERY_PARAMS.map(e=>(e.$isDisabled=!1,e.value==="exact"&&(e.$isDisabled=!0,this.queryParam.value==="exact"&&(this.queryParam=this.$constants.REDIRECT_QUERY_PARAMS.find(s=>!s.$isDisabled))),e)):this.$constants.REDIRECT_QUERY_PARAMS.map(e=>(e.$isDisabled=!1,e))}}),methods:u(n({},d("redirects",["create","update"])),{beginsWith(e,s){return s.indexOf(e)===0||e.substr(0,s.length)===s},addUrl(){this.sourceUrls.push(JSON.parse(JSON.stringify(this.getDefaultSourceUrl)))},removeUrl(e){this.$delete(this.sourceUrls,e)},addRedirects(){this.genericError=!1,this.addingRedirect=!0,this.sourceUrls.map(e=>(e.url.substr(0,4)!=="http"&&e.url.substr(0,1)!=="/"&&0<e.url.length&&!e.regex&&(e.url="/"+e.url),e)),this.create({sourceUrls:this.sourceUrls,targetUrl:this.targetUrl,queryParam:this.queryParam.value,customRules:this.customRules,redirectType:this.redirectType.value,redirectTypeHasTarget:this.redirectTypeHasTarget(),group:this.log404?"404":"manual"}).then(()=>{this.$emit("added-redirect"),this.$bus.$emit("added-redirect"),this.reset()}).catch(e=>{this.handleError(e)})},saveChanges(){this.genericError=!1,this.addingRedirect=!0,this.sourceUrls[0].url.substr(0,4)!=="http"&&this.sourceUrls[0].url.substr(0,1)!=="/"&&0<this.sourceUrls[0].url.length&&!this.sourceUrls[0].regex&&(this.sourceUrls[0].url="/"+this.sourceUrls[0].url),this.update({id:this.sourceUrls[0].id,payload:{sourceUrls:this.sourceUrls,targetUrl:this.targetUrl,queryParam:this.queryParam.value,customRules:this.customRules,redirectType:this.redirectType.value,redirectTypeHasTarget:this.redirectTypeHasTarget()}}).then(()=>{this.reset()}).catch(e=>{console.error(e),this.handleError(e)})},handleError(e){if(e.response.status!==409||!e.response.body.failed||!e.response.body.failed.length){this.genericError=!0,this.addingRedirect=!1;return}const s=[],t=e.response.body.failed,r="A redirect already exists for this source URL. To make changes, edit the original instead.";t.forEach(i=>{const a=this.sourceUrls.findIndex(l=>l.url===i.url||i);a!==-1&&(this.sourceUrls[a].errors.find(l=>l===i.error||l===r)||this.sourceUrls[a].errors.push(i.error||r),s.push(a))});for(let i=this.sourceUrls.length-1;0<=i;i--)s.includes(i)||this.$delete(this.sourceUrls,i);this.addingRedirect=!1},updateTargetUrl(e){this.targetUrl=e,this.targetUrlErrors=this.hasTargetUrlErrors,this.targetUrlWarnings=this.hasTargetUrlWarnings},reset(){if(this.showAdvancedSettings=!1,this.addingRedirect=!1,this.edit)return;const e=this.$constants.REDIRECT_TYPES.find(t=>t.value===this.type),s=this.$constants.REDIRECT_QUERY_PARAMS.find(t=>t.value===this.query);this.sourceUrls=[JSON.parse(JSON.stringify(this.getDefaultSourceUrl))],this.targetUrl=null,this.targetUrlErrors=[],this.targetUrlWarnings=[],this.redirectType=e||{label:"301 Moved Permanently",value:301},this.queryParam=s||{label:"Ignore all parameters",value:"ignore"},this.customRules=[]},checkForDuplicates(){const e=[];this.sourceUrls.forEach((s,t)=>{if(!(!s.url||s.errors.length)){if(e.includes(s.url.replace(/\/$/,""))){this.sourceUrls[t].errors.push("This is a duplicate of a URL you are already adding. You can only add unique source URL's.");return}e.push(s.url.replace(/\/$/,""))}}),this.updateTargetUrl(this.targetUrl)},redirectTypeHasTarget(){return this.redirectType&&(typeof this.redirectType.noTarget=="undefined"||!this.redirectType.noTarget)}}),mounted(){this.sourceUrls=this.getDefaultSourceUrls,this.url&&(this.sourceUrls=[n(n({},this.getDefaultSourceUrl),this.url)]),this.urls&&this.urls.length&&(this.sourceUrls=this.urls.map(t=>n(n({},this.getDefaultSourceUrl),t))),this.target&&(this.targetUrl=this.target),this.rules&&(this.customRules=this.rules);const e=this.$constants.REDIRECT_TYPES.find(t=>t.value===this.type)||this.getDefaultRedirectType;e&&(this.redirectType=e);const s=this.$constants.REDIRECT_QUERY_PARAMS.find(t=>t.value===this.query)||this.getDefaultQueryParam;s&&(this.queryParam=s)}},U={};var qe=o(Fe,Oe,Be,!1,Ye,null,null,null);function Ye(e){for(let s in U)this[s]=U[s]}var q=function(){return qe.exports}(),He=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"aioseo-redirects-table"},[t("core-wp-table",{key:e.wpTableKey,ref:"table",attrs:{filters:e.filters,totals:e.totals.main,columns:e.columns,rows:e.getRows,initialPageNumber:e.tableFields.main.paginatedPage,initialSearchTerm:e.tableFields.main.searchTerm,loading:e.wpTableLoading,"search-label":e.strings.searchUrls,"bulk-options":e.bulkOptions,"additional-filters":e.additionalFilters,showBulkActions:e.showBulkActions,showTableFooter:e.showTableFooter,showHeader:e.showHeader},on:{"filter-table":e.filterTable,"process-bulk-action":e.processBulkAction,"process-additional-filters":e.processAdditionalFilters,paginate:e.processPagination,search:e.processSearch},scopedSlots:e._u([{key:"source_url",fn:function(r){var i=r.row,a=r.index,l=r.column,g=r.editRow;return[t("strong",[t("a",{staticClass:"edit-link",attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),g(a)}}},[e._v(e._s(l))])]),t("div",{staticClass:"row-actions"},[t("span",{staticClass:"edit"},[t("a",{attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),g(a)}}},[e._v(e._s(e.strings.edit))]),e._v(" | ")]),i.enabled?t("span",{staticClass:"test"},[t("a",{attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),e.showRedirectTest(i)}}},[e._v(e._s(e.strings.checkRedirect))]),e._v(" | ")]):e._e(),t("span",{staticClass:"trash"},[t("a",{staticClass:"submitdelete",attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),e.maybeDeleteRow(a)}}},[e._v(e._s(e.strings.delete))])])])]}},{key:"type",fn:function(r){var i=r.column;return[e._v(" "+e._s(e.getColumnLabel(i))+" ")]}},{key:"enabled",fn:function(r){var i=r.column,a=r.row;return[t("div",{staticStyle:{"text-align":"right"}},[t("base-toggle",{attrs:{value:i},on:{input:function(l){return e.toggleInput(a,i)}}})],1)]}},{key:"edit-row",fn:function(r){var i=r.row,a=r.editRow;return[t("core-add-redirection",{attrs:{edit:"",url:{id:i.id,url:i.source_url,regex:i.regex,ignoreSlash:i.ignore_slash,ignoreCase:i.ignore_case,showOptions:!0,errors:[],warnings:[]},target:i.target_url,type:i.type,query:i.query_param,rules:i.custom_rules,disableSource:e.disableSource},on:{cancel:function(l){return a(null)}}})]}},{key:"actions",fn:function(r){var i=r.row;return[i.custom_rules&&0<i.custom_rules.length?t("span",[t("core-tooltip",{attrs:{type:"action"},scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v(" "+e._s(e.strings.rules)+" ")]},proxy:!0}],null,!0)},[t("svg-circle-information",{staticClass:"log-info",nativeOn:{click:function(a){return e.showCustomRuleInfo(i)}}})],1)],1):e._e()]}}])}),e.showDeleteModal?t("core-modal",{attrs:{"no-header":""},scopedSlots:e._u([{key:"body",fn:function(){return[t("div",{staticClass:"aioseo-modal-body"},[t("button",{staticClass:"close",on:{click:function(r){r.stopPropagation(),e.showDeleteModal=!1}}},[t("svg-close",{on:{click:function(r){e.showDeleteModal=!1}}})],1),t("h3",[e._v(e._s(e.areYouSureDeleteRedirect))]),t("div",{staticClass:"reset-description",domProps:{innerHTML:e._s(e.strings.actionCannotBeUndone)}}),t("base-button",{attrs:{type:"blue",size:"medium",loading:e.deletingRow},on:{click:e.processDeleteRow}},[e._v(" "+e._s(e.yesDeleteRedirect)+" ")]),t("base-button",{attrs:{type:"gray",size:"medium"},on:{click:function(r){e.showDeleteModal=!1}}},[e._v(" "+e._s(e.strings.noChangedMind)+" ")])],1)]},proxy:!0}],null,!1,1995483884)}):e._e(),e.customRuleInfo?t("core-modal",{on:{close:function(r){e.customRuleInfo=null}},scopedSlots:e._u([{key:"headerTitle",fn:function(){return[e._v(" "+e._s(e.strings.customRules)+" ")]},proxy:!0},{key:"body",fn:function(){return[t("div",{staticClass:"aioseo-modal-body custom-rule-info"},e._l(e.customRuleInfo,function(r,i){return t("div",{key:i},[t("div",{staticClass:"rule"},[t("strong",[e._v(e._s(e.$constants.REDIRECTS_CUSTOM_RULES_LABELS[r.type])+":")]),e._v(" "+e._s(typeof r.value!="object"&&!r.key?e.$constants.REDIRECTS_CUSTOM_RULES_LABELS[r.value]||r.value:"")+" "),e.isObject(r.value)?t("ul",e._l(r.value,function(a,l){return t("li",{key:l},[e._v(e._s(e.$constants.REDIRECTS_CUSTOM_RULES_LABELS[a]||a)+" ")])}),0):e._e(),r.key?t("ul",[t("li",[t("strong",[e._v(e._s(r.key)+":")]),e._v(" "+e._s(r.value))])]):e._e()]),r.regex?t("div",{staticClass:"regex"},[t("base-toggle",{attrs:{value:r.regex,disabled:!0}},[e._v(" "+e._s(e.strings.regex)+" ")])],1):e._e()])}),0)]},proxy:!0}],null,!1,2065651901)}):e._e(),e.redirectTestInfo?t("core-modal",{staticClass:"redirect-test",on:{close:function(r){e.redirectTestInfo=null}},scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("div",{staticClass:"title"},[e._v(e._s(e.strings.redirectTest)+":")]),t("core-tooltip",{scopedSlots:e._u([{key:"tooltip",fn:function(){return[t("div",[e._v(" "+e._s(e.redirectTestInfo.source_url)+" ")])]},proxy:!0}],null,!1,1774762636)},[t("div",{staticClass:"source"},[e._v(e._s(e.redirectTestInfo.source_url))])])]},proxy:!0},{key:"body",fn:function(){return[t("div",{staticClass:"aioseo-modal-body"},[t("div",{staticClass:"custom-url"},[e.redirectTestInfo.regex?t("core-alert",{staticClass:"alert-regex",attrs:{type:"blue",size:"medium"}},[t("svg-circle-information"),t("span",{domProps:{innerHTML:e._s(e.strings.regexNeedsUrl)}})],1):e._e(),t("div",{staticClass:"label"},[e._v(" "+e._s(e.strings.customUrl)+" "),t("core-tooltip",{scopedSlots:e._u([{key:"tooltip",fn:function(){return[t("span",{domProps:{innerHTML:e._s(e.customUrlDescription(e.redirectTestInfo))}})]},proxy:!0}],null,!1,2322812326)},[t("svg-circle-question-mark")],1)],1),t("div",{staticClass:"custom-url-input"},[t("base-input",{attrs:{size:"medium",value:e.redirectTestUrl,disabled:e.redirectTestLoading},on:{input:function(r){return e.redirectTestUrl=r}}}),t("base-button",{attrs:{type:"green",size:"medium",loading:e.redirectTestLoading},on:{click:function(r){return r.preventDefault(),e.redirectTest(e.redirectTestInfo.id)}}},[e._v(" "+e._s(e.strings.testUrl)+" ")])],1)],1),e.redirectTestResult?t("div",{staticClass:"redirect-results"},[t("div",{staticClass:"result"},[e.redirectTestResult.errors.length===0?t("core-alert",{attrs:{type:"green",size:"medium"}},[t("svg-circle-check"),e._v(" "+e._s(e.strings.redirectResultOk)+" ")],1):e._e(),0<e.redirectTestResult.errors.length?t("core-alert",{attrs:{type:"red",size:"medium"}},[t("svg-circle-close"),e._v(" "+e._s(e.strings.redirectResultError)+" ")],1):e._e()],1),t("div",{staticClass:"summary"},[t("div",{staticClass:"label"},[e._v(e._s(e.strings.summary))]),t("table",{staticClass:"redirects-options-table small"},[t("thead",[t("tr",[t("td"),t("td",[e._v(e._s(e.strings.expected))]),t("td",[e._v(e._s(e.strings.result))])])]),t("tbody",[t("tr",{staticClass:"even"},[t("td",[e._v(e._s(e.strings.responseCode)+":")]),t("td",[e._v(e._s(e.redirectTestInfo.type))]),t("td",[e._v(e._s(e.redirectTestResult.redirect.responseCode))])]),e.redirectTestResult.redirect.location?t("tr",[t("td",[e._v(e._s(e.strings.targetUrl)+":")]),t("td",[e._v(e._s(e.redirectTestResult.redirect.targetUrl))]),t("td",[e._v(e._s(e.redirectTestResult.redirect.location))])]):e._e(),e.redirectTestResult.redirect.xRedirectBy?t("tr",{staticClass:"even"},[t("td",[e._v(e._s(e.strings.xRedirectBy)+":")]),t("td",[e._v("AIOSEO")]),t("td",[e._v(e._s(e.redirectTestResult.redirect.xRedirectBy))])]):e._e()])])]),0<e.redirectTestResult.errors.length?t("div",{staticClass:"errors"},[t("div",{staticClass:"label"},[e._v(e._s(e.strings.errors))]),t("core-alert",{attrs:{type:"red",size:"medium"}},[t("ul",e._l(e.redirectTestResult.errors,function(r,i){return t("li",{key:i},[t("span",{domProps:{innerHTML:e._s(r)}})])}),0)])],1):e._e()]):e._e()])]},proxy:!0}],null,!1,1483869538)}):e._e()],1)},Ne=[];const je={components:{CoreAddRedirection:q,CoreAlert:h,CoreModal:Q,CoreTooltip:A,CoreWpTable:P,SvgCircleCheck:_,SvgCircleClose:v,SvgCircleInformation:J,SvgCircleQuestionMark:K,SvgClose:G},mixins:[k],props:{showBulkActions:{type:Boolean,default(){return!0}},showTableFooter:{type:Boolean,default(){return!0}},showHeader:{type:Boolean,default(){return!0}},disableSource:{type:Boolean,default(){return!1}},excludeColumns:Array},data(){return{queryUrls:[],deletingRow:!1,showDeleteModal:!1,shouldDeleteRow:null,wpTableKey:0,wpTableLoading:!1,strings:{searchUrls:"Search URLs",edit:"Edit",checkRedirect:"Check Redirect",delete:"Delete",areYouSureDeleteRedirect:"Are you sure you want to delete this redirect?",areYouSureDeleteRedirects:"Are you sure you want to delete these redirects?",actionCannotBeUndone:"This action cannot be undone.",yesDeleteRedirect:"Yes, I want to delete this redirect",yesDeleteRedirects:"Yes, I want to delete these redirects",noChangedMind:"No, I changed my mind",rules:"Rules",customRules:"Custom Rules",regex:"Regex",redirectTest:"Check redirect for",summary:"Summary",errors:"Errors",responseCode:"Response Code",sourceUrl:"Source URL",targetUrl:"Target URL",xRedirectBy:"Redirected By",customUrl:"Custom URL",testUrl:"Test Redirect",redirectResultOk:"Woohoo! Your redirect worked perfectly! \u{1F389}",redirectResultError:"Whoops! Your URL failed to redirect properly. \u{1F914}",expected:"Expected",result:"Result",regexNeedsUrl:this.$t.sprintf("You are using %1$sRegex%2$s for this redirect so you will need to manually add a URL to test.","<strong>","</strong>")},bulkOptions:[{label:"Enable",value:"enable"},{label:"Disable",value:"disable"},{label:"Reset Hits",value:"reset-hits"},{label:"Delete",value:"delete"}],customRuleInfo:null,redirectTestInfo:null,redirectTestResult:!1,redirectTestLoading:!1,redirectTestUrl:""}},watch:{rows:{deep:!0,handler(){this.wpTableKey+=1}}},computed:u(n(n({},V("redirects",["rows","getCurrentFilter"])),p("redirects",["filters","totals","tableFields","options","selectedFilters"])),{areYouSureDeleteRedirect(){return Array.isArray(this.shouldDeleteRow)?this.strings.areYouSureDeleteRedirects:this.strings.areYouSureDeleteRedirect},yesDeleteRedirect(){return Array.isArray(this.shouldDeleteRow)?this.strings.yesDeleteRedirects:this.strings.yesDeleteRedirect},columns(){const e=[{slug:"source_url",label:"Source URL"},{slug:"target_url",label:"Target URL"},{slug:"hits",label:"Hits",width:"97px"},{slug:"type",label:"Type",width:"100px"},{slug:"group",label:"Group",width:"150px"},{slug:"enabled",label:this.$constants.GLOBAL_STRINGS.enabled,width:"80px"},{slug:"actions",label:"",width:"40px"}];if(this.options.main.method==="server"){const s=e.findIndex(t=>t.slug==="hits");s!==-1&&this.$delete(e,s)}return this.excludeColumns&&this.excludeColumns.length?e.filter(s=>!this.excludeColumns.find(t=>t===s.slug)):e},additionalFilters(){return[{label:"Filter by Group",name:"group",options:[{label:"All Groups",value:"all"}].concat(this.$constants.REDIRECT_GROUPS)}]},getRows(){return this.rows.map(e=>(e.target_url=e.target_url||"-",e))}}),methods:u(n(n({},d("redirects",["filter","bulk","paginate","search","delete","test"])),x("redirects",["setPaginatedPage"])),{filterTable(e){this.wpTableLoading=!0,this.tableFields.main.searchTerm="",this.filter(e).then(()=>{this.wpTableLoading=!1})},refreshTable(){this.filterTable({slug:"all",page:this.$refs.table.pageNumber})},toggleInput(e,s){this.wpTableLoading=!0,this.bulk({action:s?"disable":"enable",rowIds:[e.id]}).then(()=>{this.wpTableLoading=!1})},processBulkAction({action:e,selectedRows:s}){if(!!s.length){if(e==="delete"){this.shouldDeleteRow=s,this.showDeleteModal=!0;return}this.wpTableLoading=!0,this.bulk({action:e,rowIds:s}).then(()=>{this.wpTableLoading=!1})}},processAdditionalFilters({filters:e}){const s=this.getCurrentFilter||{slug:"all"};this.filterTable({slug:s.slug,additional:e,page:this.$refs.table.pageNumber})},processPagination(e,s){this.setPaginatedPage({group:"main",page:e}),this.wpTableLoading=!0,this[s?"search":"paginate"]({searchTerm:s,page:e,additional:this.selectedFilters}).then(()=>{this.wpTableLoading=!1})},processSearch(e){this.wpTableLoading=!0,this.tableFields.main.searchTerm=e,this.search({searchTerm:e,page:1}).then(()=>{this.wpTableLoading=!1})},getColumnLabel(e){return e===0?"Pass through":e},maybeDeleteRow(e){const s=this.rows.find((t,r)=>r===e);s&&(this.showDeleteModal=!0,this.shouldDeleteRow=s.id)},processDeleteRow(){if(this.deletingRow=!0,Array.isArray(this.shouldDeleteRow))return this.bulk({action:"delete",rowIds:this.shouldDeleteRow}).then(()=>{this.deletingRow=!1,this.showDeleteModal=!1,this.shouldDeleteRow=null,this.refreshTable()});this.delete(this.shouldDeleteRow).then(()=>{this.deletingRow=!1,this.showDeleteModal=!1,this.shouldDeleteRow=null,this.refreshTable()})},showCustomRuleInfo(e){this.customRuleInfo=e.custom_rules.map(s=>{switch(s.type){case"role":s.value=s.value.map(t=>t.charAt(0).toUpperCase()+t.slice(1));break}return s})},isObject(e){return typeof e=="object"},showRedirectTest(e){this.redirectTestResult=!1,this.redirectTestUrl=e.regex?"":e.source_url,e.regex||this.redirectTest(e.id),this.redirectTestInfo=e},redirectTest(e){this.redirectTestLoading=!0,this.test({id:e,payload:{sourceUrl:this.redirectTestUrl}}).then(s=>{this.redirectTestLoading=!1,this.redirectTestResult=s.body}).catch(()=>{this.redirectTestLoading=!1})},customUrlDescription(e){const s=e.source_url.replace(this.$aioseo.urls.mainSiteUrl,"");return this.$t.sprintf("You can test redirects with a URL that includes your domain name ( %1$s ) or just the path ( %2$s )",this.$aioseo.urls.mainSiteUrl+s,s)}}),mounted(){this.$bus.$on("added-redirect",this.refreshTable)},beforeDestroy(){this.$bus.$off("added-redirect",this.refreshTable)}},$={};var ze=o(je,He,Ne,!1,We,null,null,null);function We(e){for(let s in $)this[s]=$[s]}var Pt=function(){return ze.exports}(),Ve=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"aioseo-redirects-blur"},[e.noCoreCard?e._e():t("core-card",{attrs:{slug:"addNewRedirection","header-text":e.strings.addNewRedirection,noSlide:!0}},[t("core-blur",[t("core-add-redirection",{attrs:{type:e.$constants.REDIRECT_TYPES[0].value,query:e.$constants.REDIRECT_QUERY_PARAMS[0].value,slash:!0,case:!0}})],1)],1),e.noCoreCard?t("core-blur",[t("core-add-redirection",{attrs:{type:e.$constants.REDIRECT_TYPES[0].value,query:e.$constants.REDIRECT_QUERY_PARAMS[0].value,slash:!0,case:!0}})],1):e._e(),t("core-blur",[t("core-wp-table",{attrs:{filters:[],totals:{total:0,pages:0,page:1},columns:e.columns,rows:[],"search-label":e.strings.searchUrls,"bulk-options":e.bulkOptions,"additional-filters":e.additionalFilters}})],1)],1)},Ge=[];const Qe={components:{CoreAddRedirection:q,CoreBlur:ae,CoreCard:le,CoreWpTable:P},props:{noCoreCard:Boolean},data(){return{strings:{addNewRedirection:"Add New Redirection",searchUrls:"Search URLs"},bulkOptions:[{label:"",value:""}]}},computed:{columns(){return[{slug:"source_url",label:"Source URL"},{slug:"target_url",label:"Target URL"},{slug:"hits",label:"Hits",width:"97px"},{slug:"type",label:"Type",width:"100px"},{slug:"group",label:"Group",width:"150px"},{slug:"enabled",label:this.$constants.GLOBAL_STRINGS.enabled,width:"80px"}]},additionalFilters(){return[{label:"Filter by Group",name:"group",options:[{label:"All Groups",value:"all"}].concat(this.$constants.REDIRECT_GROUPS)}]}}},w={};var Je=o(Qe,Ve,Ge,!1,Ke,null,null,null);function Ke(e){for(let s in w)this[s]=w[s]}var Y=function(){return Je.exports}(),Ze=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"aioseo-redirects"},[t("blur",{attrs:{noCoreCard:e.noCoreCard}}),t("cta",{attrs:{"cta-button-visible":e.$addons.userCanInstallOrActivate("aioseo-redirects"),"cta-button-visible-warning":e.strings.permissionWarning,"cta-link":e.$aioseo.urls.aio.featureManager+"&aioseo-activate=aioseo-redirects","cta-button-action":"","cta-button-loading":e.activationLoading,"same-tab":"","button-text":e.strings.ctaButtonText,"learn-more-link":e.$links.getDocUrl("redirects"),"feature-list":[e.strings.serverRedirects,e.strings.automaticRedirects,e.strings.redirectMonitoring,e.strings.monitoring404,e.strings.fullSiteRedirects,e.strings.siteAliases]},on:{"cta-button-click":e.activateAddon},scopedSlots:e._u([{key:"header-text",fn:function(){return[e._v(" "+e._s(e.strings.ctaHeader)+" ")]},proxy:!0},{key:"description",fn:function(){return[e.failed?t("core-alert",{attrs:{type:"red"}},[e._v(" "+e._s(e.strings.activateError)+" ")]):e._e(),e._v(" "+e._s(e.strings.ctaDescription)+" ")]},proxy:!0},{key:"learn-more-text",fn:function(){return[e._v(" "+e._s(e.strings.learnMoreText)+" ")]},proxy:!0}])})],1)},Xe=[];const et={components:{Blur:Y,CoreAlert:h,Cta:I},props:{noCoreCard:Boolean},data(){return{strings:{ctaButtonText:"Activate Redirects",ctaHeader:"Enable Redirects on your Site",serverRedirects:"Fast Server Redirects",automaticRedirects:"Automatic Redirects",redirectMonitoring:"Redirect Monitoring",monitoring404:"404 Monitoring",fullSiteRedirects:"Full Site Redirects",siteAliases:"Site Aliases",ctaDescription:"Our Redirection Manager allows you to easily create and manage redirects for your broken links to avoid confusing search engines and users, as well as losing valuable backlinks. It even automatically sends users and search engines from your old URLs to your new ones.",activateError:"An error occurred while activating the addon. Please upload it manually or contact support for more information.",permissionWarning:"You currently don't have permission to activate this addon. Please ask a site administrator to activate first."},failed:!1,activationLoading:!1}},computed:n({},p("redirects",["filters","totals","options"])),methods:u(n(n(n({},d("redirects",["filter","getRedirectOptions"])),d(["installPlugins"])),x(["updateAddon"])),{activateAddon(){this.failed=!1,this.activationLoading=!0;const e=this.$addons.getAddon("aioseo-redirects");this.installPlugins([{plugin:e.basename}]).then(s=>{if(s.body.failed.length){this.activationLoading=!1,this.failed=!0;return}const t=[this.filter({slug:"all",page:1}),this.filter({slug:"logs",page:1}),this.filter({slug:"404",page:1}),this.getRedirectOptions()];Promise.all(t).then(()=>{this.activationLoading=!1,e.hasMinimumVersion=!0,e.isActive=!0,this.updateAddon(e),this.$bus.$emit("redirects-activated")})}).catch(()=>{this.activationLoading=!1})}})},E={};var tt=o(et,Ze,Xe,!1,st,null,null,null);function st(e){for(let s in E)this[s]=E[s]}var It=function(){return tt.exports}(),rt=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"aioseo-redirects"},[t("blur",{attrs:{noCoreCard:e.noCoreCard}}),t("cta",{attrs:{"cta-link":e.$links.getPricingUrl("redirects","redirects-upsell",e.parentComponentContext?e.parentComponentContext:null),"button-text":e.strings.ctaButtonText,"learn-more-link":e.$links.getUpsellUrl("redirects",e.parentComponentContext?e.parentComponentContext:null,"home"),"feature-list":[e.strings.serverRedirects,e.strings.automaticRedirects,e.strings.redirectMonitoring,e.strings.monitoring404,e.strings.fullSiteRedirects,e.strings.siteAliases]},scopedSlots:e._u([{key:"header-text",fn:function(){return[e._v(" "+e._s(e.strings.ctaHeader)+" ")]},proxy:!0},{key:"description",fn:function(){return[e.$isPro&&e.$addons.requiresUpgrade("aioseo-redirects")&&e.$addons.currentPlans("aioseo-redirects")?t("core-alert",{attrs:{type:"red"}},[e._v(" "+e._s(e.strings.thisFeatureRequires)+" "),t("strong",[e._v(e._s(e.$addons.currentPlans("aioseo-redirects")))])]):e._e(),e.$isPro&&e.$addons.isActive("aioseo-redirects")&&!e.$addons.hasMinimumVersion("aioseo-redirects")?t("core-alert",[e._v(" CHANGEME ")]):e._e(),e._v(" "+e._s(e.strings.redirectsDescription)+" ")]},proxy:!0}])})],1)},it=[];const at={components:{Blur:Y,CoreAlert:h,Cta:I},props:{hasMinimumVersion:Boolean,noCoreCard:Boolean,parentComponentContext:String},data(){return{strings:{ctaButtonText:"Upgrade to Pro and Unlock Redirects",ctaHeader:this.$t.sprintf("Redirects are only available for licensed %1$s %2$s users.","AIOSEO","Pro"),serverRedirects:"Fast Server Redirects",automaticRedirects:"Automatic Redirects",redirectMonitoring:"Redirect Monitoring",monitoring404:"404 Monitoring",fullSiteRedirects:"Full Site Redirects",siteAliases:"Site Aliases",redirectsDescription:"Our Redirection Manager allows you to easily create and manage redirects for your broken links to avoid confusing search engines and users, as well as losing valuable backlinks. It even automatically sends users and search engines from your old URLs to your new ones.",thisFeatureRequires:"This feature requires one of the following plans:"}}}},L={};var lt=o(at,rt,it,!1,nt,null,null,null);function nt(e){for(let s in L)this[s]=L[s]}var Mt=function(){return lt.exports}();export{It as A,Y as B,q as C,Mt as L,Me as S,Pt as T};
