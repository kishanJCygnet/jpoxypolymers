var f=Object.defineProperty,g=Object.defineProperties;var v=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var u=(e,s,t)=>s in e?f(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,o=(e,s)=>{for(var t in s||(s={}))C.call(s,t)&&u(e,t,s[t]);if(m)for(var t of m(s))S.call(s,t)&&u(e,t,s[t]);return e},n=(e,s)=>g(e,v(s));import{a as y,d as a,b as z,c as A}from"./index.6b238922.js";import"./ToolsSettings.d33ae322.js";import"./context.04ada340.js";import{i as R}from"./index.621c7f0d.js";import{S as l}from"./SeoSiteScore.8753b911.js";import{n as c}from"./vueComponentNormalizer.87056a83.js";import{C as $,a as k}from"./Score.0ebb8955.js";import{p as b}from"./popup.25df8419.js";import{C as E}from"./Blur.8490ecd2.js";import{C as _}from"./Card.56d6b098.js";import{C as T}from"./SeoSiteAnalysisResults.7a336db9.js";import{C as x}from"./Index.8ed62ab8.js";import{S as U}from"./Refresh.c697ed05.js";import{S as I}from"./Trash.214b5744.js";import"./default-i18n.abde8d59.js";import"./isArrayLikeObject.86537e3d.js";import"./client.94d919c5.js";import"./_commonjsHelpers.f40d732e.js";import"./constants.feea4720.js";import"./params.bea1a08d.js";import"./Tooltip.3ec20ff5.js";import"./QuestionMark.83ebd18e.js";import"./Slide.f5d21606.js";import"./GoogleSearchPreview.8436e1f3.js";import"./Close.5e7bcb70.js";import"./Information.f4b75b56.js";import"./Gear.c974e953.js";var L=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("core-card",{attrs:{slug:"analyzeNewCompetitor","hide-header":"","no-slide":"",toggles:!1}},[t(e.options.general.licenseKey?"div":"core-blur",{tag:"component"},[e._t("default")],2),e.options.general.licenseKey?e._e():t("div",{staticClass:"aioseo-seo-site-score-cta"},[t("a",{attrs:{href:e.$aioseo.urls.aio.settings}},[e._v(e._s(e.strings.enterLicenseKey))]),e._v(" "+e._s(e.strings.toAnalyzeCompetitorSite)+" ")])],1),e.options.general.licenseKey?[e._t("competitor-results")]:e._e()],2)},O=[];const w={components:{CoreBlur:E,CoreCard:_},mixins:[l],computed:o({},y(["options"])),methods:n(o({},a(["saveConnectToken"])),{openPopup(e){b(e,this.connectWithAioseo,600,630,!0,["token"],this.completedCallback,()=>{})},completedCallback(e){return this.saveConnectToken(e.token)}})},p={};var M=c(w,L,O,!1,j,null,null,null);function j(e){for(let s in p)this[s]=p[s]}var F=function(){return M.exports}(),P=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"aioseo-site-score-competitor"},[t("div",{staticClass:"aioseo-seo-site-score-score"},[t("core-site-score",{attrs:{loading:e.isAnalyzing||e.loading,score:e.score,description:e.description}})],1),t("div",{staticClass:"aioseo-seo-site-score-recommendations"},[t("div",{staticClass:"critical"},[t("span",{staticClass:"round red"},[e._v(e._s(e.summary.critical||0))]),e._v(" "+e._s(e.strings.criticalIssues)+" ")]),t("div",{staticClass:"recommended"},[t("span",{staticClass:"round blue"},[e._v(e._s(e.summary.recommended||0))]),e._v(" "+e._s(e.strings.recommendedImprovements)+" ")]),t("div",{staticClass:"good"},[t("span",{staticClass:"round green"},[e._v(e._s(e.summary.good||0))]),e._v(" "+e._s(e.strings.goodResults)+" ")])]),t("base-button",{staticClass:"refresh-results",attrs:{type:"gray",size:"small",loading:e.isAnalyzing},on:{click:e.refresh}},[t("svg-refresh"),e._v(" "+e._s(e.strings.refreshResults)+" ")],1),e.mobileSnapshot?t("div",{staticClass:"mobile-snapshot"},[t("div",[e._v(e._s(e.strings.mobileSnapshot))]),t("img",{attrs:{alt:"Mobile Snapshot",src:e.mobileSnapshot}})]):e._e()],1)},D=[];const G={components:{CoreSiteScore:x,SvgRefresh:U},mixins:[l],props:{score:Number,loading:Boolean,site:{type:String,required:!0},summary:{type:Object,default(){return{}}},mobileSnapshot:String},data(){return{isAnalyzing:!1,strings:{criticalIssues:"Important Issues",warnings:"Warnings",recommendedImprovements:"Recommended Improvements",goodResults:"Good Results",completeSiteAuditChecklist:"Complete Site Audit Checklist",refreshResults:"Refresh Results",mobileSnapshot:"Mobile Snapshot"}}},methods:n(o({},a(["runSiteAnalyzer","deleteCompetitorSite"])),{refresh(){this.isAnalyzing=!0,this.runSiteAnalyzer({url:this.site,refresh:!0}).then(()=>this.isAnalyzing=!1)}})},h={};var K=c(G,P,D,!1,N,null,null,null);function N(e){for(let s in h)this[s]=h[s]}var W=function(){return K.exports}(),B=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"aioseo-analyze-competitor-site"},[t("core-analyze-competitor-site-header",{scopedSlots:e._u([{key:"competitor-results",fn:function(){return e._l(e.competitorResults,function(r,i){return t("core-card",{key:i,attrs:{id:"aioseo-competitor-results"+e.hashCode(i),slug:"analyzeCompetitorSite"+i,"save-toggle-status":!1},scopedSlots:e._u([{key:"header",fn:function(){return[t("core-analyze-score",{attrs:{score:e.parseResults(r).score}}),e._v(" "+e._s(i)+" "),t("svg-trash",{nativeOn:{click:function(Y){return e.startDeleteSite(i)}}})]},proxy:!0}],null,!0)},[t("div",{staticClass:"competitor-results-main"},[t("core-site-score-competitor",{attrs:{site:i,score:e.parseResults(r).score,loading:e.analyzing,summary:e.getSummary(e.parseResults(r).results),"mobile-snapshot":e.parseResults(r).results.advanced.mobileSnapshot}}),t("div",{staticClass:"competitor-results-body"},[t("core-seo-site-analysis-results",{attrs:{section:"all-items","all-results":e.parseResults(r).results,"show-google-preview":""}})],1)],1)])})},proxy:!0}])},[t("core-analyze",{attrs:{header:e.strings.enterCompetitorUrl,description:e.strings.performInDepthAnalysis,inputError:e.inputError,isAnalyzing:e.isAnalyzing,analyzeTime:e.analyzeTime,placeholder:"https://competitorwebsite.com"},on:{startAnalyzing:e.startAnalyzing},scopedSlots:e._u([{key:"errors",fn:function(){return[e.inputError?t("div",{staticClass:"aioseo-description aioseo-error"},[e._v(" "+e._s(e.strings.pleaseEnterValidUrl)+" ")]):e._e(),e.analyzer==="competitor-site"&&e.analyzeError?t("div",{staticClass:"analyze-errors aioseo-description aioseo-error",domProps:{innerHTML:e._s(e.analyzeError)}}):e._e()]},proxy:!0}])})],1)],1)},H=[];const q={components:{CoreAnalyze:$,CoreAnalyzeScore:k,CoreAnalyzeCompetitorSiteHeader:F,CoreCard:_,CoreSeoSiteAnalysisResults:T,CoreSiteScoreCompetitor:W,SvgTrash:I},mixins:[l],data(){return{competitorUrl:null,isAnalyzing:!1,inputError:!1,competitorResults:{},analyzeTime:8,strings:{enterCompetitorUrl:"Enter Competitor URL",performInDepthAnalysis:"Perform in-depth SEO Analysis of your competitor's website.",analyze:"Analyze",pleaseEnterValidUrl:"Please enter a valid URL."}}},watch:{analyzeError(e){e&&(this.isAnalyzing=!1)}},computed:n(o(o({},y(["options","analyzer","analyzing","analyzeError"])),z(["getCompetitorSiteAnalysisResults","goodCount","recommendedCount","criticalCount"])),{getError(){switch(this.analyzeError){case"invalid-url":return"The URL provided is invalid.";case"missing-content":return this.$t.sprintf("%1$s %2$s","We were unable to parse the content for this site.",this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"seoAnalyzerIssues",!0));case"invalid-token":return this.$t.sprintf("Your site is not connected. Please connect to %1$s, then try again.","AIOSEO")}return this.analyzeError}}),methods:n(o(o({},a(["runSiteAnalyzer","deleteCompetitorSite","saveConnectToken"])),A(["toggleCard","closeCard"])),{parseResults(e){return JSON.parse(e)},getSummary(e){return{recommended:this.recommendedCount(e),critical:this.criticalCount(e),good:this.goodCount(e)}},startAnalyzing(e){if(this.inputError=!1,this.competitorUrl=e.replace("http://","https://"),this.competitorUrl.startsWith("https://")||(this.competitorUrl="https://"+this.competitorUrl),!R(this.competitorUrl)){this.inputError=!0;return}this.$store.commit("analyzing",!0),this.$store.commit("analyzeError",!1),this.runSiteAnalyzer({url:this.competitorUrl}),this.isAnalyzing=!0,setTimeout(this.checkStatus,this.analyzeTime*1e3),this.closeAllCards()},checkStatus(){if(this.isAnalyzing=!1,this.analyzing){this.$nextTick(()=>{this.isAnalyzing=!0,2>this.analyzeTime&&(this.analyzeTime=8),this.analyzeTime=this.analyzeTime/2,setTimeout(this.checkStatus,this.analyzeTime*1e3)});return}this.competitorUrl=null,this.competitorResults=this.getCompetitorSiteAnalysisResults,this.toggleFirstCard(),this.$nextTick(()=>{const e=Object.keys(this.competitorResults),s=document.querySelector(".aioseo-header"),t=s.offsetHeight+s.offsetTop+30;this.$scrollTo("#aioseo-competitor-results"+this.hashCode(e[0]),{offset:-t})})},startDeleteSite(e){this.closeAllCards(),this.$delete(this.competitorResults,e),this.deleteCompetitorSite(e).then(()=>{this.competitorResults=this.getCompetitorSiteAnalysisResults})},closeAllCards(){Object.keys(this.competitorResults).forEach(s=>{this.closeCard("analyzeCompetitorSite"+s)})},toggleFirstCard(){const e=Object.keys(this.competitorResults);this.toggleCard("analyzeCompetitorSite"+e[0])},hashCode(e){if(!e)return;let s=0,t,r;for(t=0;t<e.length;t++)r=e.charCodeAt(t),s=(s<<5)-s+r,s|=0;return s}}),mounted(){this.$store.commit("analyzeError",!1),this.competitorResults=this.getCompetitorSiteAnalysisResults,this.toggleFirstCard()}},d={};var V=c(q,B,H,!1,J,null,null,null);function J(e){for(let s in d)this[s]=d[s]}var $e=function(){return V.exports}();export{$e as default};
