var x=Object.defineProperty,$=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var _=(t,s,e)=>s in t?x(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,a=(t,s)=>{for(var e in s||(s={}))E.call(s,e)&&_(t,e,s[e]);if(h)for(var e of h(s))O.call(s,e)&&_(t,e,s[e]);return t},n=(t,s)=>$(t,C(s));import{a as B,d as c}from"./index.6b238922.js";import{C as p}from"./Index.021930ae.js";import{C as u}from"./Card.56d6b098.js";import{C as w}from"./Modal.d9bbc93c.js";import{C as R}from"./Tooltip.3ec20ff5.js";import{S as D}from"./Plus.a9b9ba75.js";import{S as I}from"./index.621c7f0d.js";import{S as M}from"./History.99f81129.js";import{S as P}from"./Refresh.c697ed05.js";import{S as T}from"./Trash.214b5744.js";import{n as l}from"./vueComponentNormalizer.87056a83.js";import{G as d,a as m}from"./Row.13b6f3f1.js";import{a as F}from"./ToolsSettings.d33ae322.js";import"./context.04ada340.js";import{B as S}from"./Checkbox.5873a8d2.js";import{S as A}from"./Upload.7be8476b.js";import{S as y}from"./Download.bc45fb83.js";import"./default-i18n.abde8d59.js";import"./isArrayLikeObject.86537e3d.js";import"./QuestionMark.83ebd18e.js";import"./Slide.f5d21606.js";import"./_commonjsHelpers.f40d732e.js";import"./client.94d919c5.js";import"./constants.feea4720.js";import"./Checkmark.e7547654.js";var z=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("core-card",{staticClass:"aioseo-backup-settings",attrs:{slug:"backupSettings",toggles:!1,"no-slide":"","header-text":t.strings.backupSettings},scopedSlots:t._u([{key:"header-icon",fn:function(){return[e("svg-history")]},proxy:!0}])},[t.backupsDeleteSuccess?e("core-alert",{attrs:{type:"green"}},[t._v(" "+t._s(t.strings.backupSuccessfullyDeleted)+" ")]):t._e(),t.backupsRestoreSuccess?e("core-alert",{attrs:{type:"green"}},[t._v(" "+t._s(t.strings.backupSuccessfullyRestored)+" ")]):t._e(),t.backups.length?t._e():e("div",{staticClass:"aioseo-section-description"},[t._v(" "+t._s(t.strings.noBackups)+" ")]),t.backups.length?[e("div",{staticClass:"backups-table"},[e("div",{staticClass:"backups-rows"},t._l(t.backups,function(o,i){return e("div",{key:i,staticClass:"backup-row",class:{even:i%2===0}},[e("div",{staticClass:"backup-name",domProps:{innerHTML:t._s(t.getBackupName(o))}}),e("div",{staticClass:"backup-actions"},[e("core-tooltip",{attrs:{type:"action"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.strings.restore)+" ")]},proxy:!0}],null,!0)},[e("svg-refresh",{nativeOn:{click:function(r){return t.maybeRestoreBackup(o)}}})],1),e("core-tooltip",{attrs:{type:"action"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.strings.delete)+" ")]},proxy:!0}],null,!0)},[e("svg-trash",{nativeOn:{click:function(r){return t.maybeDeleteBackup(o)}}})],1)],1)])}),0)])]:t._e(),e("base-button",{attrs:{type:"blue",size:"medium",loading:t.loading},on:{click:t.processCreateBackup}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.createBackup)+" ")],1),t.showModal?e("core-modal",{attrs:{"no-header":""},scopedSlots:t._u([{key:"body",fn:function(){return[e("div",{staticClass:"aioseo-modal-body"},[e("button",{staticClass:"close",on:{click:function(o){o.stopPropagation(),t.showModal=!1}}},[e("svg-close",{on:{click:function(o){t.showModal=!1}}})],1),e("h3",[t._v(t._s(t.areYouSure))]),e("div",{staticClass:"reset-description",domProps:{innerHTML:t._s(t.strings.actionCannotBeUndone)}}),e("base-button",{attrs:{type:"blue",size:"medium"},on:{click:t.processBackupAction}},[t._v(" "+t._s(t.iAmSure)+" ")]),e("base-button",{attrs:{type:"gray",size:"medium"},on:{click:function(o){t.showModal=!1}}},[t._v(" "+t._s(t.strings.noChangedMind)+" ")])],1)]},proxy:!0}],null,!1,1131809547)}):t._e()],2)},U=[];const j={components:{CoreAlert:p,CoreCard:u,CoreModal:w,CoreTooltip:R,SvgCirclePlus:D,SvgClose:I,SvgHistory:M,SvgRefresh:P,SvgTrash:T},data(){return{timeout:null,backupToDelete:null,backupToRestore:null,backupsDeleteSuccess:!1,showModal:!1,backupsRestoreSuccess:!1,loading:!1,strings:{backupSettings:"Backup Settings",areYouSureDeleteBackup:"Are you sure you want to delete this backup?",areYouSureRestoreBackup:"Are you sure you want to restore this backup?",yesDeleteBackup:"Yes, I want to delete this backup",yesRestoreBackup:"Yes, I want to restore this backup",noChangedMind:"No, I changed my mind",actionCannotBeUndone:"This action cannot be undone.",noBackups:"You have no saved backups.",createBackup:"Create Backup",restore:"Restore",delete:"Delete",backupSuccessfullyDeleted:"Success! The backup was deleted.",backupSuccessfullyRestored:"Success! The backup was restored."}}},computed:n(a({},B(["backups"])),{areYouSure(){return this.backupToDelete?this.strings.areYouSureDeleteBackup:this.strings.areYouSureRestoreBackup},iAmSure(){return this.backupToDelete?this.strings.yesDeleteBackup:this.strings.yesRestoreBackup}}),methods:n(a({},c(["createBackup","deleteBackup","restoreBackup"])),{processCreateBackup(){this.loading=!0,this.createBackup().then(()=>{this.loading=!1})},maybeDeleteBackup(t){this.showModal=!0,this.backupToDelete=t},maybeRestoreBackup(t){this.showModal=!0,this.backupToRestore=t},processDeleteBackup(){this.loading=!0,this.deleteBackup(this.backupToDelete).then(()=>{clearTimeout(this.timeout),this.loading=!1,this.showModal=!1,this.backupToDelete=null,this.backupsDeleteSuccess=!0,this.timeout=setTimeout(()=>{this.backupsDeleteSuccess=!1,this.backupsRestoreSuccess=!1},3e3)})},processRestoreBackup(){this.loading=!0,this.restoreBackup(this.backupToRestore).then(()=>{clearTimeout(this.timeout),this.loading=!1,this.showModal=!1,this.backupToRestore=null,this.backupsRestoreSuccess=!0,this.timeout=setTimeout(()=>{this.backupsDeleteSuccess=!1,this.backupsRestoreSuccess=!1},3e3)})},getBackupName(t){return this.$t.sprintf("%1$s at %2$s","<strong>"+this.$moment(t*1e3).tz(this.$moment.tz.guess()).format("MMMM D, YYYY")+"</strong>","<strong>"+this.$moment(t*1e3).tz(this.$moment.tz.guess()).format("h:mmA z")+"</strong>")},processBackupAction(){return this.backupToDelete?this.processDeleteBackup():this.processRestoreBackup()}})},g={};var Y=l(j,z,U,!1,L,null,null,null);function L(t){for(let s in g)this[s]=g[s]}var N=function(){return Y.exports}(),q=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("core-card",{staticClass:"aioseo-export-settings",attrs:{slug:"exportSettings",toggles:!1,"no-slide":"","header-text":t.strings.exportSettings},scopedSlots:t._u([{key:"header-icon",fn:function(){return[e("svg-upload")]},proxy:!0}])},[e("div",{staticClass:"export-settings",class:{"aioseo-settings-row":t.canExportPostOptions}},[e("grid-row",[e("grid-column",{staticClass:"export-all"},[e("base-checkbox",{attrs:{size:"medium"},model:{value:t.options.all,callback:function(o){t.$set(t.options,"all",o)},expression:"options.all"}},[t._v(" "+t._s(t.strings.allSettings)+" ")])],1),t._l(t.toolsSettings,function(o,i){return e("grid-column",{key:i,attrs:{sm:"6"}},[t.options.all?t._e():e("base-checkbox",{attrs:{size:"medium"},model:{value:t.options[o.value],callback:function(r){t.$set(t.options,o.value,r)},expression:"options[setting.value]"}},[t._v(" "+t._s(o.label)+" ")]),o.value!=="all"&&t.options.all?e("base-checkbox",{attrs:{size:"medium",value:!0,disabled:""}},[t._v(" "+t._s(o.label)+" ")]):t._e()],1)})],2)],1),t.canExportPostOptions?e("div",{staticClass:"export-post-types"},[e("grid-row",[e("grid-column",{staticClass:"export-all"},[e("base-checkbox",{attrs:{size:"medium"},model:{value:t.postOptions.all,callback:function(o){t.$set(t.postOptions,"all",o)},expression:"postOptions.all"}},[t._v(" "+t._s(t.strings.allPostTypes)+" ")])],1),t._l(t.$aioseo.postData.postTypes,function(o,i){return e("grid-column",{key:i,attrs:{sm:"6"}},[t.postOptions.all?t._e():e("base-checkbox",{attrs:{size:"medium"},model:{value:t.postOptions[o.name],callback:function(r){t.$set(t.postOptions,o.name,r)},expression:"postOptions[postType.name]"}},[t._v(" "+t._s(o.label)+" ")]),o.name!=="all"&&t.postOptions.all?e("base-checkbox",{attrs:{size:"medium",value:!0,disabled:""}},[t._v(" "+t._s(o.label)+" ")]):t._e()],1)})],2)],1):t._e(),e("base-button",{staticClass:"import",attrs:{type:"blue",size:"medium",disabled:!t.canExport,loading:t.loading},on:{click:t.processExportSettings}},[t._v(" "+t._s(t.strings.exportSettings)+" ")])],1)},V=[];const G={components:{BaseCheckbox:S,CoreCard:u,GridColumn:d,GridRow:m,SvgUpload:A},mixins:[F],data(){return{options:{},postOptions:{},loading:!1,strings:{exportSettings:"Export Settings",allSettings:"Export All Settings",allPostTypes:"Export All Post Types"}}},computed:{canExport(){const t=[];return Object.keys(this.options).forEach(s=>{t.push(this.options[s])}),Object.keys(this.postOptions).forEach(s=>{t.push(this.postOptions[s])}),t.some(s=>s)},canExportPostOptions(){return["aioseo_page_general_settings","aioseo_page_advanced_settings","aioseo_page_schema_settings","aioseo_page_social_settings","aioseo_page_local_seo_settings"].some(t=>this.$allowed(t))}},methods:n(a({},c(["exportSettings"])),{processExportSettings(){const t=[];this.options.all?(this.$isPro&&t.push("general"),t.push("internal"),this.toolsSettings.filter(e=>e.value!=="all").forEach(e=>{t.push(e.value)})):Object.keys(this.options).forEach(e=>{this.options[e]&&t.push(e)});const s=[];this.postOptions.all?this.$aioseo.postData.postTypes.forEach(e=>{s.push(e.name)}):Object.keys(this.postOptions).forEach(e=>{this.postOptions[e]&&s.push(e)}),this.loading=!0,this.exportSettings({settings:t,postOptions:s}).then(e=>{this.loading=!1,this.options={},this.postOptions={};const o=new Blob([JSON.stringify(e.body.settings)],{type:"application/json"}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download=`aioseo-export-settings-${this.$moment().format("YYYY-MM-DD")}.json`,i.click(),URL.revokeObjectURL(i.href)})}})},f={};var H=l(G,q,V,!1,J,null,null,null);function J(t){for(let s in f)this[s]=f[s]}var W=function(){return H.exports}(),K=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("core-card",{staticClass:"aioseo-import-aioseo",attrs:{slug:"importAioseoSettings",toggles:!1,"no-slide":"","header-text":t.strings.importRestoreAioseoSettings},scopedSlots:t._u([{key:"header-icon",fn:function(){return[e("svg-download")]},proxy:!0}])},[t.uploadError?e("core-alert",{staticClass:"import-error",attrs:{type:"red"}},[t._v(" "+t._s(t.uploadError)+" ")]):t._e(),t.uploadSuccess?e("core-alert",{staticClass:"import-error",attrs:{type:"green"}},[t._v(" "+t._s(t.strings.fileUploadedSuccessfully)+" ")]):t._e(),e("div",{staticClass:"file-upload"},[e("base-input",{class:{"aioseo-error":t.uploadError},attrs:{size:"medium",placeholder:t.strings.fileUploadPlaceholder},on:{focus:t.triggerFileUpload},model:{value:t.filename,callback:function(o){t.filename=o},expression:"filename"}}),e("base-button",{attrs:{type:"black",size:"medium"}},[t._v(" "+t._s(t.strings.chooseAFile)+" "),e("base-input",{ref:"file",attrs:{type:"file"},on:{click:t.reset,change:t.handleFileUpload},model:{value:t.inputFile,callback:function(o){t.inputFile=o},expression:"inputFile"}})],1)],1),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.fileUploadDescription)+" ")]),e("base-button",{staticClass:"import",attrs:{type:"blue",size:"medium",disabled:!t.file||!t.importValidated,loading:t.loading},on:{click:t.submitFile}},[t._v(" "+t._s(t.strings.import)+" ")])],1)},Q=[];const X={components:{CoreAlert:p,CoreCard:u,SvgDownload:y},data(){return{inputFile:null,filename:null,file:null,uploadError:!1,uploadSuccess:!1,loading:!1,strings:{importRestoreAioseoSettings:this.$t.sprintf("Import / Restore %1$s Settings","AIOSEO"),fileUploadPlaceholder:"Import from a JSON or INI file...",chooseAFile:"Choose a File",fileUploadDescription:"Imported settings will overwrite existing settings and will not be merged.",import:"Import",jsonFileTypeRequired:"A JSON or INI file is required to import settings.",fileUploadedSuccessfully:"Success! Your settings have been imported.",fileUploadFailed:"There was an error importing your settings. Please make sure you are uploading the correct file or it is in the proper format."}}},computed:{importValidated(){return!!(this.file.type==="application/json"||this.file.name.endsWith(".ini"))}},methods:n(a({},c(["uploadFile"])),{reset(){this.uploadError=!1,this.filename=null,this.file=null,this.inputFile=null},triggerFileUpload(){this.reset(),this.$refs.file.$el.querySelector("input").focus(),this.$refs.file.$el.querySelector("input").click()},submitFile(){this.loading=!0,this.uploadFile({file:this.file,filename:this.filename}).then(()=>{this.reset(),this.uploadSuccess=!0,this.loading=!1}).catch(()=>{this.reset(),this.loading=!1,this.uploadError=this.strings.fileUploadFailed})},handleFileUpload(){this.reset(),this.file=this.$refs.file.$el.querySelector("input").files[0],this.file&&(this.filename=this.file.name,this.file.type!=="application/json"&&!this.file.name.endsWith(".ini")&&(this.uploadError=this.strings.jsonFileTypeRequired))}})},v={};var Z=l(X,K,Q,!1,tt,null,null,null);function tt(t){for(let s in v)this[s]=v[s]}var et=function(){return Z.exports}(),st=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("core-card",{staticClass:"aioseo-import-others",attrs:{id:"aioseo-import-others",slug:"importOtherPlugins",toggles:!1,"no-slide":"","header-text":t.strings.importSettingsFromOtherPlugins},scopedSlots:t._u([{key:"header-icon",fn:function(){return[e("svg-download")]},proxy:!0}])},[e("div",{staticClass:"aioseo-section-description"},[t._v(" "+t._s(t.strings.importOthersDescription)+" ")]),t.importSuccess?e("core-alert",{staticClass:"import-success",attrs:{type:"green"}},[t._v(" "+t._s(t.importSuccessful)+" ")]):t._e(),t.importError?e("core-alert",{staticClass:"import-error",attrs:{type:"red"}},[t._v(" "+t._s(t.importErrorMessage)+" ")]):t._e(),e("base-select",{attrs:{size:"medium",options:t.plugins,placeholder:t.strings.selectPlugin},scopedSlots:t._u([{key:"option",fn:function(o){var i=o.option;return[e("div",{staticClass:"import-plugin-label"},[e("span",{staticClass:"plugin-label"},[t._v(t._s(i.label))]),i.$isDisabled?e("span",{staticClass:"plugin-status"},[t._v(t._s(t.strings.notInstalled))]):t._e()])]}}]),model:{value:t.plugin,callback:function(o){t.plugin=o},expression:"plugin"}}),t.plugin?e("div",{staticClass:"import-settings"},[t.plugin.canImport?e("grid-row",[e("grid-column",[e("base-checkbox",{attrs:{size:"medium"},model:{value:t.options.all,callback:function(o){t.$set(t.options,"all",o)},expression:"options.all"}},[t._v(" "+t._s(t.strings.allSettings)+" ")])],1),t._l(t.settings,function(o,i){return e("grid-column",{key:i,attrs:{sm:"6"}},[t.options.all?t._e():e("base-checkbox",{attrs:{size:"medium"},model:{value:t.options[o.value],callback:function(r){t.$set(t.options,o.value,r)},expression:"options[setting.value]"}},[t._v(" "+t._s(o.label)+" ")]),o.value!=="all"&&t.options.all?e("base-checkbox",{attrs:{size:"medium",value:!0,disabled:""}},[t._v(" "+t._s(o.label)+" ")]):t._e()],1)})],2):t._e(),t.plugin.canImport?t._e():e("core-alert",{attrs:{type:"red"}},[t._v(" "+t._s(t.invalidVersion(t.plugin))+" ")])],1):t._e(),e("base-button",{staticClass:"import",attrs:{type:"blue",size:"medium",disabled:!t.plugin||!t.canImport,loading:t.loading},on:{click:t.processImportPlugin}},[t._v(" "+t._s(t.strings.import)+" ")])],1)},ot=[];const it={components:{BaseCheckbox:S,CoreAlert:p,CoreCard:u,GridColumn:d,GridRow:m,SvgDownload:y},data(){return{importSuccess:!1,importError:!1,options:{},plugin:null,loading:!1,strings:{importSettingsFromOtherPlugins:"Import Settings From Other Plugins",importOthersDescription:this.$t.sprintf("Choose a plugin to import SEO data directly into %1$s.","AIOSEO"),selectPlugin:"Select a plugin...",import:"Import",allSettings:"All Settings",notInstalled:"not installed"}}},watch:{plugin(){this.importSuccess=!1,this.importError=!1,this.options={}}},computed:{settings(){const t=[{value:"settings",label:"SEO Settings"},{value:"postMeta",label:"Post Meta"}];return this.$isPro&&t.push({value:"termMeta",label:"Term Meta"}),t},plugins(){const t=[];return this.$aioseo.importers.forEach(s=>{t.push({value:s.slug,label:s.name,canImport:s.canImport,version:s.version,$isDisabled:!s.installed})}),t},canImport(){const t=[];return Object.keys(this.options).forEach(s=>{t.push(this.options[s])}),t.some(s=>s)},importSuccessful(){return this.$t.sprintf("%1$s was successfully imported!",this.plugin.label)},importErrorMessage(){return this.$t.sprintf("An error occurred while importing %1$s. Please try again.",this.plugin.label)}},methods:n(a({},c(["importPlugins"])),{processImportPlugin(){this.importSuccess=!1,this.importError=!1,this.loading=!0;const t=[];this.options.all?this.settings.filter(s=>s.value!=="all").forEach(s=>{t.push(s.value)}):Object.keys(this.options).forEach(s=>{this.options[s]&&t.push(s)}),this.importPlugins([{plugin:this.plugin.value,settings:t}]).then(()=>{this.loading=!1,this.importSuccess=!0,this.options={}}).catch(()=>{this.loading=!1,this.importError=!0,this.options={}})},invalidVersion(t){return this.$t.sprintf("We do not support importing from the currently installed version of %1$s (%2$s). Please upgrade to the latest version and try again.",t.label,t.version)}})},b={};var rt=l(it,st,ot,!1,at,null,null,null);function at(t){for(let s in b)this[s]=b[s]}var nt=function(){return rt.exports}(),lt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"aioseo-tools-import-export"},[e("grid-row",[e("grid-column",{attrs:{md:"6"}},[e("import-aioseo"),e("import-others")],1),e("grid-column",{attrs:{md:"6"}},[e("export-settings")],1)],1),e("grid-row",[e("grid-column",[e("backup-settings")],1)],1)],1)},ct=[];const ut={components:{BackupSettings:N,GridColumn:d,GridRow:m,ExportSettings:W,ImportAioseo:et,ImportOthers:nt},data(){return{strings:{exportBackupSettings:"Export / Backup Settings"}}},computed:{},methods:{}},k={};var pt=l(ut,lt,ct,!1,dt,null,null,null);function dt(t){for(let s in k)this[s]=k[s]}var Ut=function(){return pt.exports}();export{Ut as default};
