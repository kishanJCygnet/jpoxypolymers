import{a as u,b as p,d as i,c as d}from"./index.670b7e80.js";import"./ToolsSettings.d7505a2f.js";import"./helpers.1eef9d6b.js";import{j as _}from"./index.1a8da5ff.js";import{S as n}from"./SeoSiteScore.48a1cf92.js";import{n as a}from"./vueComponentNormalizer.a77505d6.js";import{C as y,a as f}from"./Score.fe7c4c56.js";import{p as g}from"./popup.25df8419.js";import{C}from"./Blur.17e6ffab.js";import{C as h}from"./Card.571f0099.js";import{C as v}from"./SeoSiteAnalysisResults.70fdfe37.js";import{C as S}from"./Index.30d9b064.js";import{S as z}from"./Refresh.ad0eeb54.js";import{S as $}from"./Trash.5bc42b4f.js";import"./default-i18n.11a38481.js";import"./isArrayLikeObject.44af21ce.js";import"./Modal.354eb07f.js";import"./cleanForSlug.ba4852e5.js";import"./constants.5371d109.js";import"./client.f3edd6a0.js";import"./_commonjsHelpers.10c44588.js";import"./params.bea1a08d.js";import"./Tooltip.bd71695e.js";import"./QuestionMark.ba3fc27e.js";import"./Slide.b9a2da7a.js";import"./GoogleSearchPreview.99dae0c0.js";import"./Close.d0d842fb.js";import"./Information.45f06e33.js";import"./Gear.58c61ccc.js";var A=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("core-card",{attrs:{slug:"analyzeNewCompetitor","hide-header":"","no-slide":"",toggles:!1}},[e(t.licenseKey?"div":"core-blur",{tag:"component"},[t._t("default")],2),t.licenseKey?t._e():e("div",{staticClass:"aioseo-seo-site-score-cta"},[e("a",{attrs:{href:t.$aioseo.urls.aio.settings}},[t._v(t._s(t.strings.enterLicenseKey))]),t._v(" "+t._s(t.strings.toAnalyzeCompetitorSite)+" ")])],1),t.licenseKey?[t._t("competitor-results")]:t._e()],2)},R=[];const k={components:{CoreBlur:C,CoreCard:h},mixins:[n],computed:{...u(["options","networkOptions"]),...p(["licenseKey"])},methods:{...i(["saveConnectToken"]),openPopup(t){g(t,this.connectWithAioseo,600,630,!0,["token"],this.completedCallback,()=>{})},completedCallback(t){return this.saveConnectToken(t.token)}}},l={};var b=a(k,A,R,!1,E,null,null,null);function E(t){for(let s in l)this[s]=l[s]}const T=function(){return b.exports}();var x=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"aioseo-site-score-competitor"},[e("div",{staticClass:"aioseo-seo-site-score-score"},[e("core-site-score",{attrs:{loading:t.isAnalyzing||t.loading,score:t.score,description:t.description}})],1),e("div",{staticClass:"aioseo-seo-site-score-recommendations"},[e("div",{staticClass:"critical"},[e("span",{staticClass:"round red"},[t._v(t._s(t.summary.critical||0))]),t._v(" "+t._s(t.strings.criticalIssues)+" ")]),e("div",{staticClass:"recommended"},[e("span",{staticClass:"round blue"},[t._v(t._s(t.summary.recommended||0))]),t._v(" "+t._s(t.strings.recommendedImprovements)+" ")]),e("div",{staticClass:"good"},[e("span",{staticClass:"round green"},[t._v(t._s(t.summary.good||0))]),t._v(" "+t._s(t.strings.goodResults)+" ")])]),e("base-button",{staticClass:"refresh-results",attrs:{type:"gray",size:"small",loading:t.isAnalyzing},on:{click:t.refresh}},[e("svg-refresh"),t._v(" "+t._s(t.strings.refreshResults)+" ")],1),t.mobileSnapshot?e("div",{staticClass:"mobile-snapshot"},[e("div",[t._v(t._s(t.strings.mobileSnapshot))]),e("img",{attrs:{alt:"Mobile Snapshot",src:t.mobileSnapshot}})]):t._e()],1)},U=[];const I={components:{CoreSiteScore:S,SvgRefresh:z},mixins:[n],props:{score:Number,loading:Boolean,site:{type:String,required:!0},summary:{type:Object,default(){return{}}},mobileSnapshot:String},data(){return{isAnalyzing:!1,strings:{criticalIssues:this.$t.__("Important Issues",this.$td),warnings:this.$t.__("Warnings",this.$td),recommendedImprovements:this.$t.__("Recommended Improvements",this.$td),goodResults:this.$t.__("Good Results",this.$td),completeSiteAuditChecklist:this.$t.__("Complete Site Audit Checklist",this.$td),refreshResults:this.$t.__("Refresh Results",this.$td),mobileSnapshot:this.$t.__("Mobile Snapshot",this.$td)}}},methods:{...i(["runSiteAnalyzer","deleteCompetitorSite"]),refresh(){this.isAnalyzing=!0,this.runSiteAnalyzer({url:this.site,refresh:!0}).then(()=>this.isAnalyzing=!1)}}},c={};var O=a(I,x,U,!1,w,null,null,null);function w(t){for(let s in c)this[s]=c[s]}const L=function(){return O.exports}();var j=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"aioseo-analyze-competitor-site"},[e("core-analyze-competitor-site-header",{scopedSlots:t._u([{key:"competitor-results",fn:function(){return t._l(t.competitorResults,function(r,o){return e("core-card",{key:o,attrs:{id:"aioseo-competitor-results"+t.hashCode(o),slug:"analyzeCompetitorSite"+o,"save-toggle-status":!1},scopedSlots:t._u([{key:"header",fn:function(){return[e("core-analyze-score",{attrs:{score:t.parseResults(r).score}}),e("span",[t._v(t._s(o))]),e("svg-trash",{nativeOn:{click:function(K){return t.startDeleteSite(o)}}})]},proxy:!0}],null,!0)},[e("div",{staticClass:"competitor-results-main"},[e("core-site-score-competitor",{attrs:{site:o,score:t.parseResults(r).score,loading:t.analyzing,summary:t.getSummary(t.parseResults(r).results),"mobile-snapshot":t.parseResults(r).results.advanced.mobileSnapshot}}),e("div",{staticClass:"competitor-results-body"},[e("core-seo-site-analysis-results",{attrs:{section:"all-items","all-results":t.parseResults(r).results,"show-google-preview":""}})],1)],1)])})},proxy:!0}])},[e("core-analyze",{attrs:{header:t.strings.enterCompetitorUrl,description:t.strings.performInDepthAnalysis,inputError:t.inputError,isAnalyzing:t.isAnalyzing,analyzeTime:t.analyzeTime,placeholder:"https://competitorwebsite.com"},on:{startAnalyzing:t.startAnalyzing},scopedSlots:t._u([{key:"errors",fn:function(){return[t.inputError?e("div",{staticClass:"aioseo-description aioseo-error"},[t._v(" "+t._s(t.strings.pleaseEnterValidUrl)+" ")]):t._e(),t.analyzer==="competitor-site"&&t.analyzeError?e("div",{staticClass:"analyze-errors aioseo-description aioseo-error",domProps:{innerHTML:t._s(t.analyzeError)}}):t._e()]},proxy:!0}])})],1)],1)},M=[];const F={components:{CoreAnalyze:y,CoreAnalyzeScore:f,CoreAnalyzeCompetitorSiteHeader:T,CoreCard:h,CoreSeoSiteAnalysisResults:v,CoreSiteScoreCompetitor:L,SvgTrash:$},mixins:[n],data(){return{competitorUrl:null,isAnalyzing:!1,inputError:!1,competitorResults:{},analyzeTime:8,strings:{enterCompetitorUrl:this.$t.__("Enter Competitor URL",this.$td),performInDepthAnalysis:this.$t.__("Perform in-depth SEO Analysis of your competitor's website.",this.$td),analyze:this.$t.__("Analyze",this.$td),pleaseEnterValidUrl:this.$t.__("Please enter a valid URL.",this.$td)}}},watch:{analyzeError(t){t&&(this.isAnalyzing=!1)}},computed:{...u(["options","analyzer","analyzing","analyzeError"]),...p(["getCompetitorSiteAnalysisResults","goodCount","recommendedCount","criticalCount"]),getError(){switch(this.analyzeError){case"invalid-url":return this.$t.__("The URL provided is invalid.",this.$td);case"missing-content":return this.$t.sprintf("%1$s %2$s",this.$t.__("We were unable to parse the content for this site.",this.$td),this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"seoAnalyzerIssues",!0));case"invalid-token":return this.$t.sprintf(this.$t.__("Your site is not connected. Please connect to %1$s, then try again.",this.$td),"AIOSEO")}return this.analyzeError}},methods:{...i(["runSiteAnalyzer","deleteCompetitorSite","saveConnectToken"]),...d(["toggleCard","closeCard"]),parseResults(t){return JSON.parse(t)},getSummary(t){return{recommended:this.recommendedCount(t),critical:this.criticalCount(t),good:this.goodCount(t)}},startAnalyzing(t){if(this.inputError=!1,this.competitorUrl=t.replace("http://","https://"),this.competitorUrl.startsWith("https://")||(this.competitorUrl="https://"+this.competitorUrl),!_(this.competitorUrl)){this.inputError=!0;return}this.$store.commit("analyzing",!0),this.$store.commit("analyzeError",!1),this.runSiteAnalyzer({url:this.competitorUrl}),this.isAnalyzing=!0,setTimeout(this.checkStatus,this.analyzeTime*1e3),this.closeAllCards()},checkStatus(){if(this.isAnalyzing=!1,this.analyzing){this.$nextTick(()=>{this.isAnalyzing=!0,2>this.analyzeTime&&(this.analyzeTime=8),this.analyzeTime=this.analyzeTime/2,setTimeout(this.checkStatus,this.analyzeTime*1e3)});return}this.competitorUrl=null,this.competitorResults=this.getCompetitorSiteAnalysisResults,this.toggleFirstCard(),this.$nextTick(()=>{const t=Object.keys(this.competitorResults),s=document.querySelector(".aioseo-header"),e=s.offsetHeight+s.offsetTop+30;this.$scrollTo("#aioseo-competitor-results"+this.hashCode(t[0]),{offset:-e})})},startDeleteSite(t){this.closeAllCards(),this.$delete(this.competitorResults,t),this.deleteCompetitorSite(t).then(()=>{this.competitorResults=this.getCompetitorSiteAnalysisResults})},closeAllCards(){Object.keys(this.competitorResults).forEach(s=>{this.closeCard("analyzeCompetitorSite"+s)})},toggleFirstCard(){const t=Object.keys(this.competitorResults);this.toggleCard("analyzeCompetitorSite"+t[0])},hashCode(t){if(!t)return;let s=0,e,r;for(e=0;e<t.length;e++)r=t.charCodeAt(e),s=(s<<5)-s+r,s|=0;return s}},mounted(){this.$store.commit("analyzeError",!1),this.competitorResults=this.getCompetitorSiteAnalysisResults,this.toggleFirstCard()}},m={};var P=a(F,j,M,!1,D,null,null,null);function D(t){for(let s in m)this[s]=m[s]}const ft=function(){return P.exports}();export{ft as default};
