var m=Object.defineProperty,h=Object.defineProperties;var g=Object.getOwnPropertyDescriptors;var a=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;var r=(t,o,e)=>o in t?m(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,c=(t,o)=>{for(var e in o||(o={}))_.call(o,e)&&r(t,e,o[e]);if(a)for(var e of a(o))f.call(o,e)&&r(t,e,o[e]);return t},l=(t,o)=>h(t,g(o));import b from"./BadBotBlocker.1bcf29ae.js";import{C as v}from"./Index.b4f4db02.js";import A from"./DatabaseTools.39a8e61f.js";import{C as $}from"./Index.e2bd87fe.js";import{C as y}from"./Card.377c3939.js";import{C as w}from"./Tabs.255bc9e3.js";import{C as D}from"./Modal.09e9b873.js";import{C as k}from"./SettingsRow.eb71f07b.js";import{S as T}from"./index.7c8bddbb.js";import{d as C}from"./index.9b64eb46.js";import{n}from"./vueComponentNormalizer.87056a83.js";import M from"./HtaccessEditor.4b74a23f.js";import S from"./ImportExport.9abf22fb.js";import x from"./RobotsEditor.0b6d2c78.js";import L from"./SystemStatus.974ebf66.js";import"./Textarea.d161fc2e.js";import"./default-i18n.abde8d59.js";import"./isArrayLikeObject.86537e3d.js";import"./client.94d919c5.js";import"./_commonjsHelpers.f40d732e.js";import"./constants.81bd140d.js";import"./Tooltip.3ec20ff5.js";import"./QuestionMark.83ebd18e.js";import"./Slide.f5d21606.js";import"./Row.13b6f3f1.js";/* empty css             */import"./params.bea1a08d.js";import"./ToolsSettings.78d1d300.js";import"./helpers.a60eef6a.js";import"./cleanForSlug.5d2420e9.js";import"./Header.f4cc7b5d.js";import"./LicenseKeyBar.6284760e.js";import"./LogoGear.0c3dd5e3.js";import"./AnimatedNumber.b6059bfd.js";import"./Logo.1a5e022a.js";import"./Support.b1f25bbd.js";import"./Close.5e7bcb70.js";import"./Exclamation.356738ce.js";import"./Url.781a1d48.js";import"./Gear.c974e953.js";import"./Checkbox.5873a8d2.js";import"./Checkmark.e7547654.js";import"./TruSeoScore.98a47fd6.js";import"./Information.f4b75b56.js";import"./Editor.9c8b8c31.js";import"./Plus.a9b9ba75.js";import"./History.99f81129.js";import"./Refresh.c697ed05.js";import"./Trash.214b5744.js";import"./Upload.7be8476b.js";import"./Download.bc45fb83.js";import"./Radio.99a9886d.js";import"./External.8868c638.js";import"./Copy.a07db25e.js";import"./Row.b5e5f12f.js";var R=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"aioseo-tools-debug"},[e("CoreCard",{attrs:{slug:"debug","header-text":t.strings.cardLabel}},[e("CoreAlert",{staticClass:"alertWarning",attrs:{type:"yellow"}},[t._v(" "+t._s(t.strings.alertWarning)+" ")]),e("core-main-tabs",{key:t.tabsKey,attrs:{internal:"",tabs:t.tabs,active:t.activeTab,showSaveButton:!1},on:{changed:function(s){return t.activeTab=s}}}),t._l(t.activeTabObject.actions,function(s,i){return e("core-settings-row",{key:t.activeTab+i,attrs:{name:s.label},scopedSlots:t._u([{key:"content",fn:function(){return[e("base-button",{key:t.doingActionKey,attrs:{type:"blue",size:"medium",loading:t.doingAction[s.slug]},on:{click:function(G){return t.maybeDoAction(s)}}},[t._v(" "+t._s(t.strings.buttonLabel)+" ")]),e("div",{staticClass:"aioseo-description",domProps:{innerHTML:t._s(s.shortDescription)}}),e("div",{staticClass:"aioseo-description",domProps:{innerHTML:t._s(s.longDescription)}})]},proxy:!0}],null,!0)})}),t.showAreYouSureModal?e("CoreModal",{attrs:{"no-header":""},scopedSlots:t._u([{key:"body",fn:function(){return[e("div",{staticClass:"aioseo-modal-body"},[e("button",{staticClass:"close",on:{click:function(s){s.stopPropagation(),t.showAreYouSureModal=!1}}},[e("SvgClose",{on:{click:function(s){t.showAreYouSureModal=!1}}})],1),e("h3",[t._v(t._s(t.areYouSureTitle))]),e("div",{staticClass:"description",domProps:{innerHTML:t._s(t.strings.cannotBeUndone)}}),e("base-button",{attrs:{type:"blue",size:"medium"},on:{click:t.doAction}},[t._v(" "+t._s(t.strings.yesDoAction)+" ")]),e("base-button",{attrs:{type:"gray",size:"medium"},on:{click:function(s){t.showAreYouSureModal=!1}}},[t._v(" "+t._s(t.strings.noChangedMind)+" ")])],1)]},proxy:!0}],null,!1,564367180)}):t._e()],2)],1)},Y=[];const B={props:{extraActions:{type:Array,required:!1}},components:{CoreAlert:$,CoreCard:y,CoreMainTabs:w,CoreModal:D,CoreSettingsRow:k,SvgClose:T},data(){return{tabsKey:0,doingActionKey:0,activeTab:"general",currentAction:"",showAreYouSureModal:!1,doingAction:[],strings:{cardLabel:"Debug",selectLabel:"Select a Debug Action:",buttonLabel:"Run Action",alertWarning:"Before you run any action, please make sure that you have fully read the description and understand the consequences as these cannot be reverted.",cannotBeUndone:"This action cannot be undone.",yesDoAction:"Yes, run this action",noChangedMind:"No, I changed my mind"}}},methods:l(c({},C(["doTask"])),{getSelectedActionObject(t){let o=null;return this.actions.forEach(e=>{const s=e.options.find(i=>i.value===t);s&&(o=s)}),o},maybeDoAction(t){if(this.currentAction=t,t.showModal){this.showAreYouSureModal=!0;return}this.doAction()},doAction(){this.doingAction[this.currentAction.slug]=!0,this.showAreYouSureModal=!1,this.doingActionKey++,this.doTask(this.currentAction.slug).then(()=>{console.log(`Action "${this.currentAction.label}" has been completed.`)}).catch(t=>{console.error(`Action "${this.currentAction.label}" could not be completed: `,t)}).finally(()=>{this.doingAction[this.currentAction.slug]=!1,this.doingActionKey++})}}),computed:{areYouSureTitle(){return`Are you sure you want to run the "${this.currentAction.label}" action?`},tabs(){const t=this.$t.sprintf('<a href="%1$s" target="_blank">Scheduled Actions</a>',this.$aioseo.urls.admin.scheduledActions);return[{slug:"general",name:"General",actions:[{label:"Clear Cache",slug:"clear-cache",shortDescription:"This action deletes all records of the <code>aioseo_cache</code> table in the database.",longDescription:"",showModal:!1},{label:"Readd Capabilities",slug:"readd-capabilities",shortDescription:"This action will readd our capabilities (access permissions) for all users.",longDescription:"",showModal:!1},{label:"Reset Data",slug:"reset-data",shortDescription:"This action will <strong>delete</strong> all our custom tables and options.",longDescription:"",showModal:!0}]},{slug:"sitemap",name:"Sitemap",actions:[{label:"Clear Image Data",slug:"clear-image-data",shortDescription:"This action removes all image data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:this.$t.sprintf("To speed up the image scan, go to %1$s and run the <code>aioseo_image_sitemap_scan</code> action.",t),showModal:!1}]},{slug:"migrations",name:"Migrations",actions:[{label:"Rerun V4+ Migrations",slug:"rerun-migrations",shortDescription:"This action will rerun all update migrations since 4.0.0, excluding the V3 migration.",longDescription:"",showModal:!0},{label:"Rerun V3 Migration",slug:"restart-v3-migration",shortDescription:"This action restarts the migration from V3 to V4.",longDescription:this.$t.sprintf("All settings will be migrated immediately. However, the post/term meta needs to be migrated via a routine which runs in batches via Action Scheduler. To speed up the post/term meta migration, go to %1$s and run the <code>aioseo_migrate_post_meta</code> or <code>aioseo_migrate_term_meta</code> action.",t),showModal:!0}]},{slug:"old-issues",name:"Old Issues",actions:[{label:"Remove Duplicates",slug:"remove-duplicates",shortDescription:"This action will delete any duplicate records that are found in the <code>aioseo_posts</code> and <code>aioseo_terms</code> tables.",longDescription:"",showModal:!1},{label:"Unescape Data",slug:"unescape-data",shortDescription:"This action will clean <code>aioseo_posts</code> and <code>aioseo_term</code> records whose data is corrupted.",longDescription:this.$t.sprintf("The action will trigger a routine which runs in batches via Action Scheduler. It may take some time for this routine to complete, To speed up this process, go to %1$s and run the <code>aioseo_unslash_escaped_data_posts</code> or <code>aioseo_unslash_escaped_data_terms</code> action.",t),showModal:!1}]}]},activeTabObject(){return this.tabs.find(t=>t.slug===this.activeTab)}},beforeMount(){var t;!((t=this.extraActions)!=null&&t.length)||this.extraActions.forEach(o=>{const e=this.tabs.findIndex(s=>s.slug.toLowerCase()===o.slug.toLowerCase());if(e!==-1){this.tabs[e].actions=this.tabs[e].actions.concat(o.actions);return}this.tabs.push(o)})}},u={};var E=n(B,R,Y,!1,I,null,null,null);function I(t){for(let o in u)this[o]=u[o]}var j=function(){return E.exports}(),K=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("debug",{attrs:{extraActions:t.extraActions}})},U=[];const V={components:{Debug:j},computed:{extraActions(){const t=this.$t.sprintf('<a href="%1$s" target="_blank">Scheduled Actions</a>',this.$aioseo.urls.admin.scheduledActions),o=this.$aioseo.addons.find(i=>i.sku==="aioseo-link-assistant"),e=this.$aioseo.addons.find(i=>i.sku==="aioseo-link-assistant"),s=[];return o.isActive&&s.push({slug:"sitemap",actions:[{label:"Clear Video Data",slug:"clear-video-data",shortDescription:"This action removes all video data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:this.$t.sprintf("To speed up the video scan, go to %1$s and run the <code>aioseo_video_sitemap_scan</code> action.",t),showModal:!1}]}),e.isActive&&s.push({slug:"link-assistant",name:"Link Assistant",actions:[{label:"Clear Data",slug:"link-assistant-clear-data",shortDescription:"This action removes all Link Assistant data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:this.$t.sprintf("The various Link Assistant scans can be sped up through the %1$s",t),showModal:!0},{label:"Clear Links",slug:"link-assistant-clear-links",shortDescription:"This action removes all link data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:this.$t.sprintf("To speed up the links scan, go to %1$s and run the <code>aioseo_link_assistant_links_scan</code> action.",t),showModal:!0},{label:"Clear Suggestions",slug:"link-assistant-clear-suggestions",shortDescription:"This action removes all link suggestion data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:this.$t.sprintf("To speed up the links scan, go to %1$s and run the <code>aioseo_link_assistant_link_suggestions_scan</code> action.",t),showModal:!0},{label:"Undismiss Suggestions",slug:"link-assistant-undismiss-suggestions",shortDescription:"This action removes the dismissed state from all suggestions, which makes them appear in the UI again.",longDescription:this.$t.sprintf("To speed up the video scan, go to %1$s and run the <code>aioseo_video_sitemap_scan</code> action.",t),showModal:!1}]}),s}}},d={};var H=n(V,K,U,!1,O,null,null,null);function O(t){for(let o in d)this[o]=d[o]}var P=function(){return H.exports}(),z=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("core-main",{attrs:{"page-name":t.strings.pageName,"show-save-button":t.showSaveButton}},[e(t.$route.name,{tag:"component"})],1)},F=[];const N={components:{BadBotBlocker:b,CoreMain:v,DatabaseTools:A,Debug:P,HtaccessEditor:M,ImportExport:S,RobotsEditor:x,SystemStatus:L},data(){return{strings:{pageName:this.$t.__("Tools",this.$td)}}},computed:{showSaveButton(){return this.$route.name!=="system-status"&&this.$route.name!=="import-export"&&this.$route.name!=="database-tools"&&this.$route.name!=="debug"}}},p={};var W=n(N,z,F,!1,q,null,null,null);function q(t){for(let o in p)this[o]=p[o]}var Xt=function(){return W.exports}();export{Xt as default};
