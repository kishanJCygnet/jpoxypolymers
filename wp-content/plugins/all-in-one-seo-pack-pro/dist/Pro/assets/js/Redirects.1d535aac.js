var H=Object.defineProperty,N=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var $=(t,s,e)=>s in t?H(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,n=(t,s)=>{for(var e in s||(s={}))j.call(s,e)&&$(t,e,s[e]);if(m)for(var e of m(s))W.call(s,e)&&$(t,e,s[e]);return t},u=(t,s)=>N(t,z(s));import{a as g,d,b as G,c as x}from"./index.9b64eb46.js";import"./ToolsSettings.78d1d300.js";import"./helpers.a60eef6a.js";import{J as k}from"./JsonValues.08065e69.js";import{C as D,c as p,d as f,S as V}from"./index.7c8bddbb.js";import{S as v}from"./Close.5e7bcb70.js";import{n as o}from"./vueComponentNormalizer.87056a83.js";import{C as _}from"./Index.e2bd87fe.js";import{C as Q}from"./Modal.09e9b873.js";import{C as A}from"./Tooltip.3ec20ff5.js";import{C as P}from"./Table.9ba97068.js";import{S as J}from"./Information.f4b75b56.js";import{S as K}from"./QuestionMark.83ebd18e.js";import{C as I}from"./Index.d44bd387.js";import{C as Z}from"./ProBadge.7c0de2f7.js";import{S as X}from"./External.8868c638.js";import{S as O}from"./Exclamation.356738ce.js";import{B as tt}from"./Checkbox.5873a8d2.js";import{G as et,a as st}from"./Row.13b6f3f1.js";import{S as rt}from"./Gear.c974e953.js";import{S as M}from"./Trash.214b5744.js";import{T as B}from"./Slide.f5d21606.js";import{S as it}from"./Plus.a9b9ba75.js";import{C as at}from"./Blur.8490ecd2.js";import{C as lt}from"./Card.377c3939.js";import{R as nt}from"./RequiredPlans.0825a232.js";var ot=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"aioseo-add-redirection-url-results"},[e("ul",t._l(t.results,function(r,i){return e("li",{key:i,on:{click:function(a){return t.$emit("set-url",r.link)}}},[e("span",[e("div",{staticClass:"option"},[e("div",{staticClass:"option-title"},[e("div",{domProps:{innerHTML:t._s(t.getOptionTitle(r.label))}}),r.status!=="publish"?e("core-pro-badge",[t._v(" "+t._s(t.getStatusLabel(r.status))+" ")]):t._e()],1),e("div",{staticClass:"option-details"},[e("span",[t._v(t._s(r.link))])])]),e("a",{staticClass:"option-permalink",attrs:{href:r.link,target:"_blank"},on:{click:function(a){return a.stopPropagation(),function(){}.apply(null,arguments)}}},[e("svg-external")],1)])])}),0)])},ut=[];const ct={components:{CoreProBadge:Z,SvgExternal:X},props:{results:{type:Array,required:!0},url:String},data(){return{strings:{DRAFT:this.$t.__("DRAFT",this.$td),PENDING:this.$t.__("PENDING",this.$td),FUTURE:this.$t.__("FUTURE",this.$td)}}},methods:{getOptionTitle(t){const s=new RegExp(`(${this.url})`,"gi");return t.replace(s,'<span class="search-term">$1</span>')},getStatusLabel(t){switch(t.toLowerCase()){case"draft":return this.strings.DRAFT;case"future":return this.strings.FUTURE;case"pending":return this.strings.PENDING}}}},R={};var dt=o(ct,ot,ut,!1,ht,null,null,null);function ht(t){for(let s in R)this[s]=R[s]}var F=function(){return dt.exports}(),gt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"redirect-target-url",staticClass:"aioseo-add-redirection-target-url"},[e("base-input",{class:{"aioseo-error":t.errors.length,"aioseo-active":!t.errors.length&&!t.warnings.length&&t.url,"aioseo-warning":t.warnings.length},attrs:{size:"medium",placeholder:"/target-page/"},on:{keyup:t.searchChange,focus:function(r){t.showResults=!0},input:function(r){return t.$emit("input",t.value)},blur:function(r){return t.$emit("blur",t.value)}},scopedSlots:t._u([{key:"append-icon",fn:function(){return[e("div",{staticClass:"append-icon"},[t.isLoading?t._e():[t.errors.length?e("svg-circle-close"):t._e(),!t.errors.length&&!t.warnings.length&&t.url?e("svg-circle-check"):t._e(),t.warnings.length?e("svg-circle-exclamation"):t._e()],t.isLoading?e("core-loader",{attrs:{dark:""}}):t._e()],2)]},proxy:!0}]),model:{value:t.value,callback:function(r){t.value=r},expression:"value"}}),t.showResults&&t.results.length?e("core-add-redirection-url-results",{attrs:{results:t.results,url:t.value},on:{"set-url":t.setUrl}}):t._e()],1)},_t=[];const pt={components:{CoreAddRedirectionUrlResults:F,CoreLoader:D,SvgCircleCheck:p,SvgCircleClose:v,SvgCircleExclamation:O},props:{url:String,errors:Array,warnings:Array},data(){return{showResults:!1,isLoading:!1,value:null,results:[]}},watch:{value(){this.value&&(this.value=this.value.replace(/(https?:\/)(\/)+|(\/)+/g,"$1$2$3"),this.value=this.value.replace(/\s+/g,""))},url:{immediate:!0,handler(){this.value=this.url}}},computed:n({},g(["currentPost"])),methods:u(n({},d("redirects",["getPosts"])),{onBlur(){setTimeout(()=>{this.$emit("input",this.value)},150)},searchChange(){if(!!this.value){if(this.value.startsWith("/")||this.value.startsWith("http:")||this.value.startsWith("https:")){this.isLoading=!1;return}this.isLoading=!0,f(()=>{if(!this.value){this.isLoading=!1;return}this.showResults=!0,this.ajaxSearch(this.value).then(()=>this.isLoading=!1)},500)}},ajaxSearch(t){return this.getPosts({query:t,postId:this.currentPost.id}).then(s=>{this.results=s.body.objects})},setUrl(t){this.showResults=!1,this.value=t.replace(this.$aioseo.urls.mainSiteUrl,"",t),this.$emit("input",this.value)},documentClick(t){if(!this.showResults)return;const s=t&&t.target?t.target:null,e=this.$refs["redirect-target-url"];e&&e!==s&&!e.contains(s)&&(this.showResults=!1)}}),mounted(){document.addEventListener("click",this.documentClick)},beforeDestroy(){document.removeEventListener("click",this.documentClick)}},y={};var ft=o(pt,gt,_t,!1,vt,null,null,null);function vt(t){for(let s in y)this[s]=y[s]}var mt=function(){return ft.exports}(),$t=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"redirect-source-url",staticClass:"aioseo-redirect-source-url"},[e("base-input",{class:{"aioseo-error":t.url.errors.length,"aioseo-active":!t.url.errors.length&&!t.url.warnings.length&&t.url.url,"aioseo-warning":t.url.warnings.length},attrs:{value:t.url.url,disabled:t.log404||t.disableSource,size:"medium",placeholder:"/source-page/"},on:{input:function(r){return t.updateSourceUrl(r)},keyup:t.searchChange,focus:function(r){t.showResults=!0}},scopedSlots:t._u([{key:"append-icon",fn:function(){return[e("div",{staticClass:"append-icon"},[t.isLoading?t._e():[t.url.errors.length?e("svg-circle-close"):t._e(),!t.url.errors.length&&!t.url.warnings.length&&t.url.url?e("svg-circle-check"):t._e(),t.url.warnings.length?e("svg-circle-exclamation"):t._e(),e("svg-gear",{class:{active:t.urlOptionsActive},nativeOn:{click:function(r){t.showOptions=!t.showOptions}}}),t.allowDelete?e("svg-trash",{nativeOn:{click:function(r){return t.$emit("remove-url")}}}):t._e()],t.isLoading?e("core-loader",{attrs:{dark:""}}):t._e()],2)]},proxy:!0}])}),!t.url.regex&&t.showResults&&t.results.length?e("core-add-redirection-url-results",{attrs:{results:t.results,url:t.url.url},on:{"set-url":t.setUrl}}):t._e(),t.log404?t._e():t._t("source-url-description"),e("transition-slide",{staticClass:"source-url-options",attrs:{active:t.showOptions}},[e("div",[e("grid-row",[e("grid-column",{attrs:{xs:"4"}},[e("base-checkbox",{attrs:{size:"medium",value:t.url.ignoreSlash},on:{input:function(r){return t.updateOption("ignoreSlash",r)}}},[t._v(" "+t._s(t.strings.ignoreSlash)+" ")])],1),e("grid-column",{attrs:{xs:"4"}},[e("base-checkbox",{attrs:{size:"medium",value:t.url.ignoreCase},on:{input:function(r){return t.updateOption("ignoreCase",r)}}},[t._v(" "+t._s(t.strings.ignoreCase)+" ")])],1),!t.log404&&!t.disableSource?e("grid-column",{attrs:{xs:"4"}},[e("base-checkbox",{attrs:{size:"medium",value:t.url.regex},on:{input:function(r){return t.updateOption("regex",r)}}},[t._v(" "+t._s(t.strings.regex)+" ")])],1):t._e()],1)],1)]),e("transition-slide",{attrs:{active:!!t.url.errors.length}},t._l(t.url.errors,function(r,i){return e("core-alert",{key:i,staticClass:"source-url-error",attrs:{type:"red",size:"small"},domProps:{innerHTML:t._s(r)}})}),1),e("transition-slide",{attrs:{active:!!t.url.warnings.length}},t._l(t.url.warnings,function(r,i){return e("core-alert",{key:i,staticClass:"source-url-warning",attrs:{type:"yellow",size:"small"},domProps:{innerHTML:t._s(r)}})}),1)],2)},Rt=[];const yt={components:{BaseCheckbox:tt,CoreAddRedirectionUrlResults:F,CoreAlert:_,CoreLoader:D,GridColumn:et,GridRow:st,SvgCircleCheck:p,SvgCircleClose:v,SvgCircleExclamation:O,SvgGear:rt,SvgTrash:M,TransitionSlide:B},props:{url:{type:Object,default(){return{id:null,url:null,regex:!1,ignoreSlash:!0,ignoreCase:!0,errors:[],warnings:[]}}},allowDelete:Boolean,targetUrl:String,log404:Boolean,disableSource:Boolean},data(){return{showResults:!1,isLoading:!1,showOptions:!1,strings:{ignoreSlash:this.$t.__("Ignore Slash",this.$td),ignoreCase:this.$t.__("Ignore Case",this.$td),regex:this.$t.__("Regex",this.$td)},results:[]}},watch:{targetUrl(){this.updateSourceUrl(this.url.url)}},computed:{maybeRegex(){return this.url.url.match(/[*\\()[\]^$]/)!==null||this.url.url.indexOf(".?")!==-1},invalidUrl(){if(!this.url.url)return!1;const t=[];if(this.url.regex)try{new RegExp(this.url.url)}catch{return t.push(this.$t.__("The regex syntax is invalid.",this.$td)),t}if(this.url.url.substr(0,4)==="http"&&this.url.url.indexOf(document.location.origin)===-1&&t.push(this.$t.__("Please enter a valid relative source URL.",this.$td)),this.url.url.match(/%\w+%/)&&t.push(this.$t.__("Permalinks are not currently supported.",this.$td)),(this.url.url==="/(.*)"||this.url.url==="^/(.*)")&&t.push(this.$t.__("This redirect is supported using the Relocate Site feature under Full Site Redirect tab.",this.$td)),this.url.url&&this.url.url.length&&this.targetUrl&&this.targetUrl.length){let s=this.url.ignoreSlash?this.$links.unTrailingSlashIt(this.url.url):this.url.url,e=this.url.ignoreSlash?this.$links.unTrailingSlashIt(this.targetUrl):this.targetUrl;s=this.url.ignoreCase?s.toLowerCase():s,e=this.url.ignoreCase?e.toLowerCase():e,(s===e||this.url.regex&&e.match(s))&&t.push(this.$t.__("Your source is the same as a target and this will create a loop.",this.$td))}return t},iffyUrl(){if(!this.url.url)return[];const t=[];return this.url.url.substr(0,4)!=="http"&&this.url.url.substr(0,1)!=="/"&&0<this.url.url.length&&!this.url.regex&&t.push(this.$t.sprintf(this.$t.__("The source URL should probably start with a %1$s",this.$td),"<code>/</code>")),this.url.url.indexOf("#")!==-1&&t.push(this.$t.__("Anchor values are not sent to the server and cannot be redirected.",this.$td)),!this.log404&&this.maybeRegex&&!this.url.regex&&t.push(this.$t.sprintf(this.$t.__("Remember to enable the %1$s option if this is a regular expression.",this.$td),"<code>Regex</code>")),this.url.regex&&(this.url.url.indexOf("^")===-1&&this.url.url.indexOf("$")===-1&&t.push(this.$t.sprintf(this.$t.__("To prevent a greedy regular expression you can use %1$s to anchor it to the start of the URL. For example: %2$s",this.$td),"<code>^/</code>","<code>^/"+this.url.url.replace(/^\//,"")+"</code>")),0<this.url.url.indexOf("^")&&t.push(this.$t.sprintf(this.$t.__("The caret %1$s should be at the start. For example: %2$s",this.$td),"<code>^/</code>","<code>^/"+this.url.url.replace("^","").replace(/^\//,"")+"</code>")),this.url.url.indexOf("^")===0&&this.url.url.indexOf("^/")===-1&&t.push(this.$t.sprintf(this.$t.__("The source URL should probably start with a %1$s",this.$td),"<code>^/</code>")),this.url.url.length-1!==this.url.url.indexOf("$")&&this.url.url.indexOf("$")!==-1&&t.push(this.$t.sprintf(this.$t.__("The dollar symbol %1$s should be at the end. For example: %2$s",this.$td),"<code>$</code>","<code>"+this.url.url.replace(/\$/g,"")+"$</code>"))),this.url.url.match(/(\.html|\.htm|\.php|\.pdf|\.jpg)$/)!==null&&t.push(this.$t.__("Some servers may be configured to serve file resources directly, preventing a redirect occurring.",this.$td)),t},urlOptionsActive(){return this.url.regex||this.showOptions}},methods:u(n({},d("redirects",["getPosts"])),{updateSourceUrl(t){!t||(t&&(t=t.replace(/(https?:\/)(\/)+|(\/)+/g,"$1$2$3")),this.url.regex||(t=t.replace(/\s+/g,"")),this.$set(this.url,"url",t),this.$set(this.url,"errors",this.invalidUrl),this.$set(this.url,"warnings",this.iffyUrl),this.$emit("updated-url",this.url))},updateOption(t,s){this.$set(this.url,t,s),this.updateSourceUrl(this.url.url),this.$emit("updated-option",this.url)},searchChange(){if(!(!this.url.url||this.url.regex)){if(this.url.url.startsWith("/")||this.url.url.startsWith("^")||this.url.url.startsWith("http:")||this.url.url.startsWith("https:")){this.isLoading=!1;return}this.isLoading=!0,f(()=>{if(!this.url.url){this.isLoading=!1;return}this.showResults=!0,this.ajaxSearch(this.url.url).then(()=>this.isLoading=!1)},500)}},ajaxSearch(t){return this.getPosts({query:t}).then(s=>{this.results=s.body.objects})},setUrl(t){this.showResults=!1,this.updateOption("url",t.replace(this.$aioseo.urls.mainSiteUrl,"",t))},documentClick(t){if(!this.showResults)return;const s=t&&t.target?t.target:null,e=this.$refs["redirect-source-url"];e&&e!==s&&!e.contains(s)&&(this.showResults=!1)}}),mounted(){this.url.showOptions&&(this.showOptions=!0,this.updateSourceUrl(this.url.url)),document.addEventListener("click",this.documentClick)},beforeDestroy(){document.removeEventListener("click",this.documentClick)}},b={};var bt=o(yt,$t,Rt,!1,Ct,null,null,null);function Ct(t){for(let s in b)this[s]=b[s]}var St=function(){return bt.exports}(),Tt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"custom-rules"},[e("table",{staticClass:"redirects-options-table",attrs:{cellspacing:"0",cellpadding:"0","aria-label":"Custom Rules"}},[e("thead",[e("tr",[e("td",{attrs:{colspan:"2"}},[t._v(t._s(t.strings.customRules))])])]),e("tbody",t._l(t.customRules,function(r,i){return e("tr",{key:i,staticClass:"rule",class:{even:i%2===0}},[e("td",{staticClass:"rule-settings"},[e("base-select",{attrs:{options:t.filteredTypes,size:"medium",placeholder:t.strings.selectMatchRule,value:t.getRuleValue("type",i)},on:{input:function(a){return t.updateRule("type",a,i)}}}),t.getType(i,"options")||t.getType(i,"taggable")?e("base-select",{attrs:{options:t.getType(i,"options")||[],size:"medium",value:t.getRuleValue("value",i),multiple:t.getType(i,"multiple")||t.getType(i,"taggable"),taggable:t.getType(i,"taggable"),placeholder:t.getType(i,"placeholder")||t.strings.selectAValue},on:{input:function(a){return t.updateRule("value",a,i)}}}):t._e(),t.getType(i,"keyValuePair")?e("base-input",{attrs:{value:t.getRuleValue("key",i),size:"medium",placeholder:t.getType(i,"placeholderKey")||t.strings.key},on:{input:function(a){return t.updateRule("key",a,i)}}}):t._e(),!t.getType(i,"options")&&!t.getType(i,"taggable")?e("base-input",{attrs:{value:t.getRuleValue("value",i),size:"medium",placeholder:t.getType(i,"placeholder")||t.strings.value,disabled:!t.getType(i)},on:{input:function(a){return t.updateRule("value",a,i)}}}):t._e(),t.getType(i,"regex")?e("base-toggle",{attrs:{value:t.getRuleValue("regex",i)},on:{input:function(a){return t.updateRule("regex",a,i)}}},[t._v(" "+t._s(t.strings.regex)+" ")]):t._e()],1),e("td",{staticClass:"actions"},[e("core-tooltip",{staticClass:"action",attrs:{type:"action"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.strings.delete)+" ")]},proxy:!0}],null,!0)},[e("svg-trash",{nativeOn:{click:function(a){return t.removeRule(i)}}})],1)],1)])}),0),e("tfoot",[e("tr",[e("td",{attrs:{colspan:"2"}},[e("base-button",{attrs:{size:"small-table",type:"black"},on:{click:function(r){return t.addRule(null)}}},[e("svg-circle-plus"),t._v(" "+t._s(t.strings.add)+" ")],1)],1)])])])])},Ut=[];const wt={type:null,key:null,value:null,regex:null},Et={components:{CoreTooltip:A,SvgCirclePlus:it,SvgTrash:M},props:{editCustomRules:Array},data(){return{strings:{customRules:this.$t.__("Custom Rules",this.$td),selectMatchRule:this.$t.__("Select Rule",this.$td),delete:this.$t.__("Delete",this.$td),add:this.$t.__("Add Custom Rule",this.$td),regex:this.$t.__("Regex",this.$td),selectAValue:this.$t.__("Select a Value or Add a New One",this.$td),key:this.$t.__("Key",this.$td),value:this.$t.__("Value",this.$td)},customRules:[],types:[{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.login,value:"login",placeholder:this.$t.__("Select Status",this.$td),singleRule:!0,options:[{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.loggedin,value:"loggedin"},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.loggedout,value:"loggedout"}]},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.role,value:"role",multiple:!0,placeholder:this.$t.__("Select Roles",this.$td),options:Object.entries(this.$aioseo.user.roles).map(t=>({label:t[1],value:t[0]}))},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.referrer,value:"referrer",regex:!0,singleRule:!0},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.agent,value:"agent",regex:!0,taggable:!0,multiple:!0,options:[{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.mobile,value:"mobile",docLink:this.$links.getDocLink(this.$t.__("Learn more",this.$td),"redirectCustomRulesUserAgent",!0)},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.feeds,value:"feeds",docLink:this.$links.getDocLink(this.$t.__("Learn more",this.$td),"redirectCustomRulesUserAgent",!0)},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.libraries,value:"libraries",docLink:this.$links.getDocLink(this.$t.__("Learn more",this.$td),"redirectCustomRulesUserAgent",!0)}]},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.cookie,value:"cookie",keyValuePair:!0,regex:!0},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.ip,value:"ip",placeholder:this.$t.__("Enter an IP Address",this.$td),taggable:!0,regex:!0,singleRule:!0},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.server,value:"server",placeholder:this.$t.__("Enter the Server Name",this.$td),regex:!0,singleRule:!0},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.header,value:"header",keyValuePair:!0,regex:!0},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.wp_filter,value:"wp_filter",placeholder:this.$t.__("Enter a WordPress Filter Name",this.$td),taggable:!0},{label:this.$constants.REDIRECTS_CUSTOM_RULES_LABELS.locale,value:"locale",taggable:!0,regex:!0,placeholder:this.$t.__("Enter a Locale Code, e.g.: en_GB, es_ES",this.$td),singleRule:!0}]}},computed:{hasCustomRules(){return 0<this.customRules.length},filteredTypes(){return this.types.map(t=>(t.$isDisabled=!1,t.singleRule&&this.customRules.find(s=>t.value===s.type)&&(t.$isDisabled=!0),t))}},methods:{removeRule(t){this.$delete(this.customRules,t),this.hasCustomRules||this.addRule(null)},addRule(t,s=!1){t||(t=JSON.parse(JSON.stringify(wt))),(!s||s&&this.customRules.filter(e=>e===t).length===0)&&this.customRules.push(t)},updateRule(t,s,e){const r=this.customRules[e];s=typeof s.value!="undefined"?s.value:s,s=typeof s=="object"&&s.length?s.map(i=>i.value):s,r[t]=s,t==="type"&&(r.value=""),this.$set(this.customRules,e,r)},getRuleValue(t,s,e=!1){if(!this.customRules[s])return;let i=this.customRules[s][t],a=null;if(e)return i;switch(t){case"type":i=this.types.find(l=>i===l.value);break;case"value":a=this.getType(s,"options"),a&&(typeof i=="object"?i=i.map(l=>a.find(h=>l===h.value)||l).filter(l=>!!l):i=a.find(l=>i===l.value)||i),this.getType(s,"taggable")&&(i=typeof i=="object"?i.map(l=>typeof l.label=="undefined"?{label:l,value:l}:l):[]);break}return i},getType(t,s){const e=this.getRuleValue("type",t);return s?e&&typeof e[s]!="undefined"?e[s]:!1:e}},mounted(){this.editCustomRules&&(this.customRules=this.editCustomRules),this.hasCustomRules||this.addRule(null)}},C={};var Lt=o(Et,Tt,Ut,!1,xt,"589ca9de",null,null);function xt(t){for(let s in C)this[s]=C[s]}var kt=function(){return Lt.exports}(),Dt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("svg",{staticClass:"aioseo-right-arrow",attrs:{width:"36",height:"16",viewBox:"0 0 36 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M36 8L28.4211 0.5V6.125H0V9.875H28.4211V15.5L36 8Z",fill:"currentColor"}})])},At=[];const Pt={},S={};var It=o(Pt,Dt,At,!1,Ot,null,null,null);function Ot(t){for(let s in S)this[s]=S[s]}var Mt=function(){return It.exports}(),Bt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"aioseo-add-redirection",class:{"edit-url":t.edit,"log-404":t.log404}},[t.genericError?e("core-alert",{staticClass:"generic-error",attrs:{type:"red"}},[t._v(" "+t._s(t.strings.genericErrorMessage)+" ")]):t._e(),e("div",{staticClass:"urls"},[e("div",{staticClass:"source"},[e("div",{staticClass:"aioseo-settings-row no-border no-margin small-padding"},[e("div",{staticClass:"settings-name"},[e("div",{staticClass:"name small-margin"},[t._v(" "+t._s(t.sourceUrl)+": ")])]),t._l(t.sourceUrls,function(r,i){return e("core-add-redirection-url",{key:i,attrs:{url:r,"allow-delete":1<t.sourceUrls.length,"target-url":t.targetUrl,log404:t.log404,disableSource:t.disableSource},on:{"remove-url":function(a){return t.removeUrl(i)}},scopedSlots:t._u([t.edit&&!t.disableSource?{key:"source-url-description",fn:function(){return[e("div",{staticClass:"aioseo-description source-description",domProps:{innerHTML:t._s(t.strings.sourceUrlDescription)}})]},proxy:!0}:null],null,!0)})}),!t.edit&&!t.log404&&!t.disableSource?e("base-button",{attrs:{size:"small",type:"gray"},on:{click:t.addUrl}},[t._v(" "+t._s(t.strings.addUrl)+" ")]):t._e()],2)]),t.redirectTypeHasTarget()?e("div",{staticClass:"url-arrow"},[e("svg-right-arrow")],1):t._e(),t.redirectTypeHasTarget()?e("div",{staticClass:"target"},[e("div",{staticClass:"aioseo-settings-row no-border no-margin small-padding"},[e("div",{staticClass:"settings-name"},[e("div",{staticClass:"name small-margin"},[t._v(" "+t._s(t.strings.targetUrl)+": ")])]),e("div",{staticClass:"url"},[e("core-add-redirection-target-url",{attrs:{url:t.targetUrl,errors:t.targetUrlErrors,warnings:t.targetUrlWarnings},on:{input:t.updateTargetUrl}}),e("div",{staticClass:"aioseo-description"},[t._v(" "+t._s(t.strings.targetUrlDescription)+" ")]),e("transition-slide",{attrs:{active:!!t.targetUrlErrors.length}},[e("div",t._l(t.targetUrlErrors,function(r,i){return e("core-alert",{key:i,staticClass:"target-url-error",attrs:{type:"red",size:"small"},domProps:{innerHTML:t._s(r)}})}),1)]),e("transition-slide",{attrs:{active:!!t.targetUrlWarnings.length}},[e("div",t._l(t.targetUrlWarnings,function(r,i){return e("core-alert",{key:i,staticClass:"target-url-warning",attrs:{type:"yellow",size:"small"},domProps:{innerHTML:t._s(r)}})}),1)])],1)])]):t._e(),!t.edit&&!t.log404&&!t.disableSource?[e("div",{staticClass:"break"}),e("div",{staticClass:"source"},[e("div",{staticClass:"aioseo-description source-description",domProps:{innerHTML:t._s(t.strings.sourceUrlDescription)}})]),e("div",{staticClass:"url-arrow"}),e("div",{staticClass:"target"})]:t._e()],2),e("div",{staticClass:"settings",class:{advanced:t.showAdvancedSettings}},[e("div",{staticClass:"all-settings"},[e("div",{staticClass:"all-settings-content"},[e("div",{staticClass:"redirect-type"},[t._v(" "+t._s(t.strings.redirectType)+" "),e("base-select",{attrs:{options:t.$constants.REDIRECT_TYPES,size:"medium"},model:{value:t.redirectType,callback:function(r){t.redirectType=r},expression:"redirectType"}})],1),e("transition-slide",{staticClass:"advanced-settings",attrs:{active:t.showAdvancedSettings}},[e("div",{staticClass:"query-params"},[t._v(" "+t._s(t.strings.queryParams)+" "),e("base-select",{attrs:{options:t.redirectQueryParams,size:"medium"},model:{value:t.queryParam,callback:function(r){t.queryParam=r},expression:"queryParam"}})],1)]),t.showAdvancedSettings?t._e():e("a",{staticClass:"advanced-settings-link",attrs:{href:"#"},on:{click:function(r){r.preventDefault(),t.showAdvancedSettings=!t.showAdvancedSettings}}},[t._v(t._s(t.strings.advancedSettings))])],1)]),e("transition-slide",{staticClass:"advanced-settings",attrs:{active:t.showAdvancedSettings}},[e("custom-rules",{attrs:{"edit-custom-rules":t.customRules}})],1),e("div",{staticClass:"actions",class:{advanced:t.showAdvancedSettings}},[e("base-button",{attrs:{size:"medium",type:"blue",loading:t.addingRedirect,disabled:t.saveIsDisabled},on:{click:function(r){t.edit?t.saveChanges():t.addRedirects()}}},[t._v(" "+t._s(t.edit?t.strings.saveChanges:t.addRedirect)+" ")]),t.edit?e("base-button",{staticClass:"cancel-edit-row",attrs:{size:"medium",type:"gray"},on:{click:function(r){return t.$emit("cancel",!0)}}},[t._v(" "+t._s(t.strings.cancel)+" ")]):t._e()],1)],1)],1)},Ft=[];const Yt={components:{CoreAddRedirectionTargetUrl:mt,CoreAddRedirectionUrl:St,CoreAlert:_,CustomRules:kt,SvgRightArrow:Mt,TransitionSlide:B},mixins:[k],props:{edit:Boolean,log404:Boolean,disableSource:Boolean,url:Object,urls:Array,target:String,type:Number,query:String,slash:Boolean,case:Boolean,rules:{type:Array,default(){return[]}}},data(){return{genericError:!1,showAdvancedSettings:!1,addingRedirect:!1,targetUrl:null,targetUrlErrors:[],targetUrlWarnings:[],sourceUrls:[],redirectType:null,queryParam:null,customRules:[],strings:{redirectType:this.$t.__("Redirect Type:",this.$td),targetUrl:this.$t.__("Target URL",this.$td),targetUrlDescription:this.$t.__("Enter a URL or start by typing a page or post title, slug or ID.",this.$td),addUrl:this.$t.__("Add URL",this.$td),sourceUrlDescription:this.$t.sprintf(this.$t.__("Enter a relative URL to redirect from or start by typing in page or post title, slug or ID. You can also use regex (%1$s)",this.$td),this.$links.getDocLink(this.$t.__("what's this?",this.$td),"redirectManagerRegex")),advancedSettings:this.$t.__("Advanced Settings",this.$td),queryParams:this.$t.__("Query Parameters:",this.$td),saveChanges:this.$t.__("Save Changes",this.$td),cancel:this.$t.__("Cancel",this.$td),genericErrorMessage:this.$t.__("An error occurred while adding your redirects. Please try again later.",this.$td)}}},watch:{sourceUrls:{deep:!0,handler(){f(()=>this.checkForDuplicates(),500)}}},computed:u(n({},g("redirects",["options"])),{saveIsDisabled(){return!!this.sourceUrls.filter(t=>!t.url).length||!!this.sourceUrls.filter(t=>0<t.errors.length).length||this.redirectTypeHasTarget()&&!this.targetUrl},getRelativeAbsolute(){const t=this.targetUrl.match(/^\/([a-zA-Z0-9_\-%]*\..*)\//);return t?t[0]:null},sourceUrl(){return 1<this.sourceUrls.length?this.$t.__("Source URLs",this.$td):this.$t.__("Source URL",this.$td)},addRedirect(){return 1<this.sourceUrls.length?this.$t.__("Add Redirects",this.$td):this.$t.__("Add Redirect",this.$td)},hasTargetUrlErrors(){if(!this.targetUrl)return[];const t=[];this.targetUrl&&!this.beginsWith(this.targetUrl,"https://")&&!this.beginsWith(this.targetUrl,"http://")&&this.targetUrl.substr(0,1)!=="/"&&t.push(this.$t.sprintf(this.$t.__("Your target URL should be an absolute URL like %1$s or start with a slash.",this.$td),"<code>https://domain.com/"+this.targetUrl+"</code>","<code>/"+this.targetUrl+"</code>"));const s=this.targetUrl.match(/[|\\$]/g);return s!==null&&(this.sourceUrls.map(r=>r.regex).every(r=>r)||t.push(this.$t.sprintf(this.$t.__("Your target URL contains the invalid character(s) %1$s",this.$td),"<code>"+s+"</code>"))),t},hasTargetUrlWarnings(){if(!this.targetUrl)return[];const t=[];return this.getRelativeAbsolute&&t.push(this.$t.sprintf(this.$t.__("Your URL appears to contain a domain inside the path: %1$s. Did you mean to use %2$s instead?",this.$td),"<code>"+this.getRelativeAbsolute+"</code>","<code>https:/"+this.getRelativeAbsolute+"</code>")),t},getDefaultRedirectType(){let t=this.getJsonValue(this.options.redirectDefaults.redirectType);return t||(t=this.$constants.REDIRECT_TYPES[0]),t},getDefaultQueryParam(){let t=this.getJsonValue(this.options.redirectDefaults.queryParam);return t||(t=this.$constants.REDIRECT_QUERY_PARAMS[0]),t},getDefaultSlash(){return this.options.redirectDefaults.ignoreSlash},getDefaultCase(){return this.options.redirectDefaults.ignoreCase},getDefaultSourceUrls(){return[JSON.parse(JSON.stringify(this.getDefaultSourceUrl))]},getDefaultSourceUrl(){return{id:null,url:null,regex:!1,ignoreSlash:this.slash||this.getDefaultSlash||!1,ignoreCase:this.case||this.getDefaultCase||!1,errors:[],warnings:[]}},redirectQueryParams(){return 0<this.sourceUrls.filter(t=>t.regex).length?this.$constants.REDIRECT_QUERY_PARAMS.map(t=>(t.$isDisabled=!1,t.value==="exact"&&(t.$isDisabled=!0,this.queryParam.value==="exact"&&(this.queryParam=this.$constants.REDIRECT_QUERY_PARAMS.find(s=>!s.$isDisabled))),t)):this.$constants.REDIRECT_QUERY_PARAMS.map(t=>(t.$isDisabled=!1,t))}}),methods:u(n({},d("redirects",["create","update"])),{beginsWith(t,s){return s.indexOf(t)===0||t.substr(0,s.length)===s},addUrl(){this.sourceUrls.push(JSON.parse(JSON.stringify(this.getDefaultSourceUrl)))},removeUrl(t){this.$delete(this.sourceUrls,t)},addRedirects(){this.genericError=!1,this.addingRedirect=!0,this.sourceUrls.map(t=>(t.url.substr(0,4)!=="http"&&t.url.substr(0,1)!=="/"&&0<t.url.length&&!t.regex&&(t.url="/"+t.url),t)),this.create({sourceUrls:this.sourceUrls,targetUrl:this.targetUrl,queryParam:this.queryParam.value,customRules:this.customRules,redirectType:this.redirectType.value,redirectTypeHasTarget:this.redirectTypeHasTarget(),group:this.log404?"404":"manual"}).then(()=>{this.$emit("added-redirect"),this.$bus.$emit("added-redirect"),this.reset()}).catch(t=>{this.handleError(t)})},saveChanges(){this.genericError=!1,this.addingRedirect=!0,this.sourceUrls[0].url.substr(0,4)!=="http"&&this.sourceUrls[0].url.substr(0,1)!=="/"&&0<this.sourceUrls[0].url.length&&!this.sourceUrls[0].regex&&(this.sourceUrls[0].url="/"+this.sourceUrls[0].url),this.update({id:this.sourceUrls[0].id,payload:{sourceUrls:this.sourceUrls,targetUrl:this.targetUrl,queryParam:this.queryParam.value,customRules:this.customRules,redirectType:this.redirectType.value,redirectTypeHasTarget:this.redirectTypeHasTarget()}}).then(()=>{this.reset()}).catch(t=>{console.error(t),this.handleError(t)})},handleError(t){if(t.response.status!==409||!t.response.body.failed||!t.response.body.failed.length){this.genericError=!0,this.addingRedirect=!1;return}const s=[],e=t.response.body.failed,r=this.$t.__("A redirect already exists for this source URL. To make changes, edit the original instead.",this.$td);e.forEach(i=>{const a=this.sourceUrls.findIndex(l=>l.url===i.url||i);a!==-1&&(this.sourceUrls[a].errors.find(l=>l===i.error||l===r)||this.sourceUrls[a].errors.push(i.error||r),s.push(a))});for(let i=this.sourceUrls.length-1;0<=i;i--)s.includes(i)||this.$delete(this.sourceUrls,i);this.addingRedirect=!1},updateTargetUrl(t){this.targetUrl=t,this.targetUrlErrors=this.hasTargetUrlErrors,this.targetUrlWarnings=this.hasTargetUrlWarnings},reset(){if(this.showAdvancedSettings=!1,this.addingRedirect=!1,this.edit)return;const t=this.$constants.REDIRECT_TYPES.find(e=>e.value===this.type),s=this.$constants.REDIRECT_QUERY_PARAMS.find(e=>e.value===this.query);this.sourceUrls=[JSON.parse(JSON.stringify(this.getDefaultSourceUrl))],this.targetUrl=null,this.targetUrlErrors=[],this.targetUrlWarnings=[],this.redirectType=t||{label:"301 "+this.$t.__("Moved Permanently",this.$td),value:301},this.queryParam=s||{label:this.$t.__("Ignore all parameters",this.$td),value:"ignore"},this.customRules=[]},checkForDuplicates(){const t=[];this.sourceUrls.forEach((s,e)=>{if(!(!s.url||s.errors.length)){if(t.includes(s.url.replace(/\/$/,""))){this.sourceUrls[e].errors.push(this.$t.__("This is a duplicate of a URL you are already adding. You can only add unique source URLs.",this.$td));return}t.push(s.url.replace(/\/$/,""))}}),this.updateTargetUrl(this.targetUrl)},redirectTypeHasTarget(){return this.redirectType&&(typeof this.redirectType.noTarget=="undefined"||!this.redirectType.noTarget)}}),mounted(){this.sourceUrls=this.getDefaultSourceUrls,this.url&&(this.sourceUrls=[n(n({},this.getDefaultSourceUrl),this.url)]),this.urls&&this.urls.length&&(this.sourceUrls=this.urls.map(e=>n(n({},this.getDefaultSourceUrl),e))),this.target&&(this.targetUrl=this.target),this.rules&&(this.customRules=this.rules);const t=this.$constants.REDIRECT_TYPES.find(e=>e.value===this.type)||this.getDefaultRedirectType;t&&(this.redirectType=t);const s=this.$constants.REDIRECT_QUERY_PARAMS.find(e=>e.value===this.query)||this.getDefaultQueryParam;s&&(this.queryParam=s)}},T={};var qt=o(Yt,Bt,Ft,!1,Ht,null,null,null);function Ht(t){for(let s in T)this[s]=T[s]}var Y=function(){return qt.exports}(),Nt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"aioseo-redirects-table"},[e("core-wp-table",{key:t.wpTableKey,ref:"table",attrs:{filters:t.filters,totals:t.totals.main,columns:t.columns,rows:t.getRows,initialPageNumber:t.tableFields.main.paginatedPage,initialSearchTerm:t.tableFields.main.searchTerm,loading:t.wpTableLoading,"search-label":t.strings.searchUrls,"bulk-options":t.bulkOptions,"additional-filters":t.additionalFilters,showBulkActions:t.showBulkActions,showTableFooter:t.showTableFooter,showHeader:t.showHeader},on:{"filter-table":t.filterTable,"process-bulk-action":t.processBulkAction,"process-additional-filters":t.processAdditionalFilters,paginate:t.processPagination,search:t.processSearch},scopedSlots:t._u([{key:"source_url",fn:function(r){var i=r.row,a=r.index,l=r.column,h=r.editRow;return[e("strong",[e("a",{staticClass:"edit-link",attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),h(a)}}},[t._v(t._s(l))])]),e("div",{staticClass:"row-actions"},[e("span",{staticClass:"edit"},[e("a",{attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),h(a)}}},[t._v(t._s(t.strings.edit))]),t._v(" | ")]),i.enabled?e("span",{staticClass:"test"},[e("a",{attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),t.showRedirectTest(i)}}},[t._v(t._s(t.strings.checkRedirect))]),t._v(" | ")]):t._e(),e("span",{staticClass:"trash"},[e("a",{staticClass:"submitdelete",attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),t.maybeDeleteRow(a)}}},[t._v(t._s(t.strings.delete))])])])]}},{key:"type",fn:function(r){var i=r.column;return[t._v(" "+t._s(t.getColumnLabel(i))+" ")]}},{key:"enabled",fn:function(r){var i=r.column,a=r.row;return[e("div",{staticStyle:{"text-align":"right"}},[e("base-toggle",{attrs:{value:i},on:{input:function(l){return t.toggleInput(a,i)}}})],1)]}},{key:"edit-row",fn:function(r){var i=r.row,a=r.editRow;return[e("core-add-redirection",{attrs:{edit:"",url:{id:i.id,url:i.source_url,regex:i.regex,ignoreSlash:i.ignore_slash,ignoreCase:i.ignore_case,showOptions:!0,errors:[],warnings:[]},target:i.target_url,type:i.type,query:i.query_param,rules:i.custom_rules,disableSource:t.disableSource},on:{cancel:function(l){return a(null)}}})]}},{key:"actions",fn:function(r){var i=r.row;return[i.custom_rules&&0<i.custom_rules.length?e("span",[e("core-tooltip",{attrs:{type:"action"},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.strings.rules)+" ")]},proxy:!0}],null,!0)},[e("svg-circle-information",{staticClass:"log-info",nativeOn:{click:function(a){return t.showCustomRuleInfo(i)}}})],1)],1):t._e()]}}])}),t.showDeleteModal?e("core-modal",{attrs:{"no-header":""},scopedSlots:t._u([{key:"body",fn:function(){return[e("div",{staticClass:"aioseo-modal-body"},[e("button",{staticClass:"close",on:{click:function(r){r.stopPropagation(),t.showDeleteModal=!1}}},[e("svg-close",{on:{click:function(r){t.showDeleteModal=!1}}})],1),e("h3",[t._v(t._s(t.areYouSureDeleteRedirect))]),e("div",{staticClass:"reset-description",domProps:{innerHTML:t._s(t.strings.actionCannotBeUndone)}}),e("base-button",{attrs:{type:"blue",size:"medium",loading:t.deletingRow},on:{click:t.processDeleteRow}},[t._v(" "+t._s(t.yesDeleteRedirect)+" ")]),e("base-button",{attrs:{type:"gray",size:"medium"},on:{click:function(r){t.showDeleteModal=!1}}},[t._v(" "+t._s(t.strings.noChangedMind)+" ")])],1)]},proxy:!0}],null,!1,1995483884)}):t._e(),t.customRuleInfo?e("core-modal",{on:{close:function(r){t.customRuleInfo=null}},scopedSlots:t._u([{key:"headerTitle",fn:function(){return[t._v(" "+t._s(t.strings.customRules)+" ")]},proxy:!0},{key:"body",fn:function(){return[e("div",{staticClass:"aioseo-modal-body custom-rule-info"},t._l(t.customRuleInfo,function(r,i){return e("div",{key:i},[e("div",{staticClass:"rule"},[e("strong",[t._v(t._s(t.$constants.REDIRECTS_CUSTOM_RULES_LABELS[r.type])+":")]),t._v(" "+t._s(typeof r.value!="object"&&!r.key?t.$constants.REDIRECTS_CUSTOM_RULES_LABELS[r.value]||r.value:"")+" "),t.isObject(r.value)?e("ul",t._l(r.value,function(a,l){return e("li",{key:l},[t._v(t._s(t.$constants.REDIRECTS_CUSTOM_RULES_LABELS[a]||a)+" ")])}),0):t._e(),r.key?e("ul",[e("li",[e("strong",[t._v(t._s(r.key)+":")]),t._v(" "+t._s(r.value))])]):t._e()]),r.regex?e("div",{staticClass:"regex"},[e("base-toggle",{attrs:{value:r.regex,disabled:!0}},[t._v(" "+t._s(t.strings.regex)+" ")])],1):t._e()])}),0)]},proxy:!0}],null,!1,2065651901)}):t._e(),t.redirectTestInfo?e("core-modal",{staticClass:"aioseo-redirects redirect-test",attrs:{isolate:""},on:{close:function(r){t.redirectTestInfo=null}},scopedSlots:t._u([{key:"headerTitle",fn:function(){return[e("div",{staticClass:"title"},[t._v(t._s(t.strings.redirectTest)+":")]),e("core-tooltip",{scopedSlots:t._u([{key:"tooltip",fn:function(){return[e("div",[t._v(" "+t._s(t.redirectTestInfo.source_url)+" ")])]},proxy:!0}],null,!1,1774762636)},[e("div",{staticClass:"source"},[t._v(t._s(t.redirectTestInfo.source_url))])])]},proxy:!0},{key:"body",fn:function(){return[e("div",{staticClass:"aioseo-modal-body"},[e("div",{staticClass:"custom-url"},[t.redirectTestInfo.regex?e("core-alert",{staticClass:"alert-regex",attrs:{type:"blue",size:"medium"}},[e("svg-circle-information"),e("span",{domProps:{innerHTML:t._s(t.strings.regexNeedsUrl)}})],1):t._e(),e("div",{staticClass:"label"},[t._v(" "+t._s(t.strings.customUrl)+" "),e("core-tooltip",{scopedSlots:t._u([{key:"tooltip",fn:function(){return[e("span",{domProps:{innerHTML:t._s(t.customUrlDescription(t.redirectTestInfo))}})]},proxy:!0}],null,!1,2322812326)},[e("svg-circle-question-mark")],1)],1),e("div",{staticClass:"custom-url-input"},[e("base-input",{attrs:{size:"medium",value:t.redirectTestUrl,disabled:t.redirectTestLoading},on:{input:function(r){return t.redirectTestUrl=r}}}),e("base-button",{attrs:{type:"green",size:"medium",loading:t.redirectTestLoading},on:{click:function(r){return r.preventDefault(),t.redirectTest(t.redirectTestInfo.id)}}},[t._v(" "+t._s(t.strings.testUrl)+" ")])],1)],1),t.redirectTestResult?e("div",{staticClass:"redirect-results"},[e("div",{staticClass:"result"},[t.redirectTestResult.errors.length===0?e("core-alert",{attrs:{type:"green",size:"medium"}},[e("svg-circle-check"),t._v(" "+t._s(t.strings.redirectResultOk)+" ")],1):t._e(),0<t.redirectTestResult.errors.length?e("core-alert",{attrs:{type:"red",size:"medium"}},[e("svg-circle-close"),t._v(" "+t._s(t.strings.redirectResultError)+" ")],1):t._e()],1),e("div",{staticClass:"summary"},[e("div",{staticClass:"label"},[t._v(t._s(t.strings.summary))]),e("table",{staticClass:"redirects-options-table small",attrs:{"aria-label":"Redirect Check Results"}},[e("thead",[e("tr",[e("td"),e("td",[t._v(t._s(t.strings.expected))]),e("td",[t._v(t._s(t.strings.result))])])]),e("tbody",[e("tr",{staticClass:"even"},[e("td",[t._v(t._s(t.strings.responseCode)+":")]),e("td",[t._v(t._s(t.redirectTestInfo.type))]),e("td",[t._v(t._s(t.redirectTestResult.redirect.responseCode))])]),t.redirectTestResult.redirect.location?e("tr",[e("td",[t._v(t._s(t.strings.targetUrl)+":")]),e("td",[t._v(t._s(t.redirectTestResult.redirect.targetUrl))]),e("td",[t._v(t._s(t.redirectTestResult.redirect.location))])]):t._e(),t.redirectTestResult.redirect.xRedirectBy?e("tr",{staticClass:"even"},[e("td",[t._v(t._s(t.strings.xRedirectBy)+":")]),e("td",[t._v("AIOSEO")]),e("td",[t._v(t._s(t.redirectTestResult.redirect.xRedirectBy))])]):t._e()])])]),0<t.redirectTestResult.errors.length?e("div",{staticClass:"errors"},[e("div",{staticClass:"label"},[t._v(t._s(t.strings.errors))]),e("core-alert",{attrs:{type:"red",size:"medium"}},[e("ul",t._l(t.redirectTestResult.errors,function(r,i){return e("li",{key:i},[e("span",{domProps:{innerHTML:t._s(r)}})])}),0)])],1):t._e()]):t._e()])]},proxy:!0}],null,!1,1369932862)}):t._e()],1)},zt=[];const jt={components:{CoreAddRedirection:Y,CoreAlert:_,CoreModal:Q,CoreTooltip:A,CoreWpTable:P,SvgCircleCheck:p,SvgCircleClose:v,SvgCircleInformation:J,SvgCircleQuestionMark:K,SvgClose:V},mixins:[k],props:{showBulkActions:{type:Boolean,default(){return!0}},showTableFooter:{type:Boolean,default(){return!0}},showHeader:{type:Boolean,default(){return!0}},disableSource:{type:Boolean,default(){return!1}},excludeColumns:Array},data(){return{queryUrls:[],deletingRow:!1,showDeleteModal:!1,shouldDeleteRow:null,wpTableKey:0,wpTableLoading:!1,strings:{searchUrls:this.$t.__("Search URLs",this.$td),edit:this.$t.__("Edit",this.$td),checkRedirect:this.$t.__("Check Redirect",this.$td),delete:this.$t.__("Delete",this.$td),areYouSureDeleteRedirect:this.$t.__("Are you sure you want to delete this redirect?",this.$td),areYouSureDeleteRedirects:this.$t.__("Are you sure you want to delete these redirects?",this.$td),actionCannotBeUndone:this.$t.__("This action cannot be undone.",this.$td),yesDeleteRedirect:this.$t.__("Yes, I want to delete this redirect",this.$td),yesDeleteRedirects:this.$t.__("Yes, I want to delete these redirects",this.$td),noChangedMind:this.$t.__("No, I changed my mind",this.$td),rules:this.$t.__("Rules",this.$td),customRules:this.$t.__("Custom Rules",this.$td),regex:this.$t.__("Regex",this.$td),redirectTest:this.$t.__("Check redirect for",this.$td),summary:this.$t.__("Summary",this.$td),errors:this.$t.__("Errors",this.$td),responseCode:this.$t.__("Response Code",this.$td),sourceUrl:this.$t.__("Source URL",this.$td),targetUrl:this.$t.__("Target URL",this.$td),xRedirectBy:this.$t.__("Redirected By",this.$td),customUrl:this.$t.__("Custom URL",this.$td),testUrl:this.$t.__("Test Redirect",this.$td),redirectResultOk:this.$t.__("Woohoo! Your redirect worked perfectly!",this.$td)+" \u{1F389}",redirectResultError:this.$t.__("Whoops! Your URL failed to redirect properly.",this.$td)+" \u{1F914}",expected:this.$t.__("Expected",this.$td),result:this.$t.__("Result",this.$td),regexNeedsUrl:this.$t.sprintf(this.$t.__("You are using %1$sRegex%2$s for this redirect so you will need to manually add a URL to test.",this.$td),"<strong>","</strong>")},bulkOptions:[{label:this.$t.__("Enable",this.$td),value:"enable"},{label:this.$t.__("Disable",this.$td),value:"disable"},{label:this.$t.__("Reset Hits",this.$td),value:"reset-hits"},{label:this.$t.__("Delete",this.$td),value:"delete"}],customRuleInfo:null,redirectTestInfo:null,redirectTestResult:!1,redirectTestLoading:!1,redirectTestUrl:""}},watch:{rows:{deep:!0,handler(){this.wpTableKey+=1}}},computed:u(n(n({},G("redirects",["rows","getCurrentFilter"])),g("redirects",["filters","totals","tableFields","options","selectedFilters"])),{areYouSureDeleteRedirect(){return Array.isArray(this.shouldDeleteRow)?this.strings.areYouSureDeleteRedirects:this.strings.areYouSureDeleteRedirect},yesDeleteRedirect(){return Array.isArray(this.shouldDeleteRow)?this.strings.yesDeleteRedirects:this.strings.yesDeleteRedirect},columns(){const t=[{slug:"source_url",label:this.$t.__("Source URL",this.$td)},{slug:"target_url",label:this.$t.__("Target URL",this.$td)},{slug:"hits",label:this.$t.__("Hits",this.$td),width:"97px"},{slug:"type",label:this.$t.__("Type",this.$td),width:"100px"},{slug:"group",label:this.$t.__("Group",this.$td),width:"150px"},{slug:"enabled",label:this.$constants.GLOBAL_STRINGS.enabled,width:"80px"},{slug:"actions",label:"",width:"40px"}];if(this.options.main.method==="server"){const s=t.findIndex(e=>e.slug==="hits");s!==-1&&this.$delete(t,s)}return this.excludeColumns&&this.excludeColumns.length?t.filter(s=>!this.excludeColumns.find(e=>e===s.slug)):t},additionalFilters(){return[{label:this.$t.__("Filter by Group",this.$td),name:"group",options:[{label:this.$t.__("All Groups",this.$td),value:"all"}].concat(this.$constants.REDIRECT_GROUPS)}]},getRows(){return this.rows.map(t=>(t.target_url=t.target_url||"-",t))}}),methods:u(n(n({},d("redirects",["filter","bulk","paginate","search","delete","test"])),x("redirects",["setPaginatedPage"])),{filterTable(t){this.wpTableLoading=!0,this.tableFields.main.searchTerm="",this.filter(t).then(()=>{this.wpTableLoading=!1})},refreshTable(){this.filterTable({slug:"all",page:this.$refs.table.pageNumber})},toggleInput(t,s){this.wpTableLoading=!0,this.bulk({action:s?"disable":"enable",rowIds:[t.id]}).then(()=>{this.wpTableLoading=!1})},processBulkAction({action:t,selectedRows:s}){if(!!s.length){if(t==="delete"){this.shouldDeleteRow=s,this.showDeleteModal=!0;return}this.wpTableLoading=!0,this.bulk({action:t,rowIds:s}).then(()=>{this.wpTableLoading=!1})}},processAdditionalFilters({filters:t}){const s=this.getCurrentFilter||{slug:"all"};this.filterTable({slug:s.slug,additional:t,page:this.$refs.table.pageNumber})},processPagination(t,s){this.setPaginatedPage({group:"main",page:t}),this.wpTableLoading=!0,this[s?"search":"paginate"]({searchTerm:s,page:t,additional:this.selectedFilters}).then(()=>{this.wpTableLoading=!1})},processSearch(t){this.wpTableLoading=!0,this.tableFields.main.searchTerm=t,this.search({searchTerm:t,page:1}).then(()=>{this.wpTableLoading=!1})},getColumnLabel(t){return t===0?this.$t.__("Pass through",this.$td):t},maybeDeleteRow(t){const s=this.rows.find((e,r)=>r===t);s&&(this.showDeleteModal=!0,this.shouldDeleteRow=s.id)},processDeleteRow(){if(this.deletingRow=!0,Array.isArray(this.shouldDeleteRow))return this.bulk({action:"delete",rowIds:this.shouldDeleteRow}).then(()=>{this.deletingRow=!1,this.showDeleteModal=!1,this.shouldDeleteRow=null,this.refreshTable()});this.delete(this.shouldDeleteRow).then(()=>{this.deletingRow=!1,this.showDeleteModal=!1,this.shouldDeleteRow=null,this.refreshTable()})},showCustomRuleInfo(t){this.customRuleInfo=t.custom_rules.map(s=>{switch(s.type){case"role":s.value=s.value.map(e=>e.charAt(0).toUpperCase()+e.slice(1));break}return s})},isObject(t){return typeof t=="object"},showRedirectTest(t){this.redirectTestResult=!1,this.redirectTestUrl=t.regex?"":t.source_url,t.regex||this.redirectTest(t.id),this.redirectTestInfo=t},redirectTest(t){this.redirectTestLoading=!0,this.test({id:t,payload:{sourceUrl:this.redirectTestUrl}}).then(s=>{this.redirectTestLoading=!1,this.redirectTestResult=s.body}).catch(()=>{this.redirectTestLoading=!1})},customUrlDescription(t){const s=t.source_url.replace(this.$aioseo.urls.mainSiteUrl,"");return this.$t.sprintf(this.$t.__("You can test redirects with a URL that includes your domain name ( %1$s ) or just the path ( %2$s )",this.$td),this.$aioseo.urls.mainSiteUrl+s,s)}}),mounted(){this.$bus.$on("added-redirect",this.refreshTable)},beforeDestroy(){this.$bus.$off("added-redirect",this.refreshTable)}},U={};var Wt=o(jt,Nt,zt,!1,Gt,null,null,null);function Gt(t){for(let s in U)this[s]=U[s]}var Oe=function(){return Wt.exports}(),Vt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"aioseo-redirects-blur"},[t.noCoreCard?t._e():e("core-card",{attrs:{slug:"addNewRedirection","header-text":t.strings.addNewRedirection,noSlide:!0}},[e("core-blur",[e("core-add-redirection",{attrs:{type:t.$constants.REDIRECT_TYPES[0].value,query:t.$constants.REDIRECT_QUERY_PARAMS[0].value,slash:!0,case:!0}})],1)],1),t.noCoreCard?e("core-blur",[e("core-add-redirection",{attrs:{type:t.$constants.REDIRECT_TYPES[0].value,query:t.$constants.REDIRECT_QUERY_PARAMS[0].value,slash:!0,case:!0}})],1):t._e(),e("core-blur",[e("core-wp-table",{attrs:{filters:[],totals:{total:0,pages:0,page:1},columns:t.columns,rows:[],"search-label":t.strings.searchUrls,"bulk-options":t.bulkOptions,"additional-filters":t.additionalFilters}})],1)],1)},Qt=[];const Jt={components:{CoreAddRedirection:Y,CoreBlur:at,CoreCard:lt,CoreWpTable:P},props:{noCoreCard:Boolean},data(){return{strings:{addNewRedirection:this.$t.__("Add New Redirection",this.$td),searchUrls:this.$t.__("Search URLs",this.$td)},bulkOptions:[{label:"",value:""}]}},computed:{columns(){return[{slug:"source_url",label:this.$t.__("Source URL",this.$td)},{slug:"target_url",label:this.$t.__("Target URL",this.$td)},{slug:"hits",label:this.$t.__("Hits",this.$td),width:"97px"},{slug:"type",label:this.$t.__("Type",this.$td),width:"100px"},{slug:"group",label:this.$t.__("Group",this.$td),width:"150px"},{slug:"enabled",label:this.$constants.GLOBAL_STRINGS.enabled,width:"80px"}]},additionalFilters(){return[{label:this.$t.__("Filter by Group",this.$td),name:"group",options:[{label:this.$t.__("All Groups",this.$td),value:"all"}].concat(this.$constants.REDIRECT_GROUPS)}]}}},w={};var Kt=o(Jt,Vt,Qt,!1,Zt,null,null,null);function Zt(t){for(let s in w)this[s]=w[s]}var q=function(){return Kt.exports}(),Xt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{class:{"aioseo-redirects":!0,"core-card":!t.noCoreCard}},[e("blur",{attrs:{noCoreCard:t.noCoreCard}}),e("cta",{attrs:{"cta-button-visible":t.$addons.userCanInstallOrActivate("aioseo-redirects"),"cta-button-visible-warning":t.strings.permissionWarning,"cta-link":t.$aioseo.urls.aio.featureManager+"&aioseo-activate=aioseo-redirects","cta-button-action":"","cta-button-loading":t.activationLoading,"same-tab":"","button-text":t.strings.ctaButtonText,"learn-more-link":t.$links.getDocUrl("redirects"),"feature-list":[t.strings.serverRedirects,t.strings.automaticRedirects,t.strings.redirectMonitoring,t.strings.monitoring404,t.strings.fullSiteRedirects,t.strings.siteAliases]},on:{"cta-button-click":t.activateAddon},scopedSlots:t._u([{key:"header-text",fn:function(){return[t._v(" "+t._s(t.strings.ctaHeader)+" ")]},proxy:!0},{key:"description",fn:function(){return[t.failed?e("core-alert",{attrs:{type:"red"}},[t._v(" "+t._s(t.strings.activateError)+" ")]):t._e(),t._v(" "+t._s(t.strings.ctaDescription)+" ")]},proxy:!0},{key:"learn-more-text",fn:function(){return[t._v(" "+t._s(t.strings.learnMoreText)+" ")]},proxy:!0}])})],1)},te=[];const ee={components:{Blur:q,CoreAlert:_,Cta:I},props:{noCoreCard:Boolean},data(){return{strings:{ctaButtonText:this.$t.__("Activate Redirects",this.$tdPro),ctaHeader:this.$t.__("Enable Redirects on your Site",this.$tdPro),serverRedirects:this.$t.__("Fast Server Redirects",this.$td),automaticRedirects:this.$t.__("Automatic Redirects",this.$td),redirectMonitoring:this.$t.__("Redirect Monitoring",this.$td),monitoring404:this.$t.__("404 Monitoring",this.$td),fullSiteRedirects:this.$t.__("Full Site Redirects",this.$td),siteAliases:this.$t.__("Site Aliases",this.$td),ctaDescription:this.$t.__("Our Redirection Manager allows you to easily create and manage redirects for your broken links to avoid confusing search engines and users, as well as losing valuable backlinks. It even automatically sends users and search engines from your old URLs to your new ones.",this.$td),activateError:this.$t.__("An error occurred while activating the addon. Please upload it manually or contact support for more information.",this.$td),permissionWarning:this.$t.__("You currently don't have permission to activate this addon. Please ask a site administrator to activate first.",this.$td)},failed:!1,activationLoading:!1}},computed:n({},g("redirects",["filters","totals","options"])),methods:u(n(n(n({},d("redirects",["filter","getRedirectOptions"])),d(["installPlugins"])),x(["updateAddon"])),{activateAddon(){this.failed=!1,this.activationLoading=!0;const t=this.$addons.getAddon("aioseo-redirects");this.installPlugins([{plugin:t.basename}]).then(s=>{if(s.body.failed.length){this.activationLoading=!1,this.failed=!0;return}const e=[this.filter({slug:"all",page:1}),this.filter({slug:"logs",page:1}),this.filter({slug:"404",page:1}),this.getRedirectOptions()];Promise.all(e).then(()=>{this.activationLoading=!1,t.hasMinimumVersion=!0,t.isActive=!0,this.updateAddon(t),this.$bus.$emit("redirects-activated")})}).catch(()=>{this.activationLoading=!1})}})},E={};var se=o(ee,Xt,te,!1,re,null,null,null);function re(t){for(let s in E)this[s]=E[s]}var Me=function(){return se.exports}(),ie=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{class:{"aioseo-redirects":!0,"core-card":!t.noCoreCard}},[e("blur",{attrs:{noCoreCard:t.noCoreCard}}),e("cta",{attrs:{"cta-link":t.$links.getPricingUrl("redirects","redirects-upsell",t.parentComponentContext?t.parentComponentContext:null),"button-text":t.strings.ctaButtonText,"learn-more-link":t.$links.getUpsellUrl("redirects",t.parentComponentContext?t.parentComponentContext:null,"home"),"feature-list":[t.strings.serverRedirects,t.strings.automaticRedirects,t.strings.redirectMonitoring,t.strings.monitoring404,t.strings.fullSiteRedirects,t.strings.siteAliases]},scopedSlots:t._u([{key:"header-text",fn:function(){return[t._v(" "+t._s(t.strings.ctaHeader)+" ")]},proxy:!0},{key:"description",fn:function(){return[e("required-plans",{attrs:{addon:"aioseo-redirects"}}),t._v(" "+t._s(t.strings.redirectsDescription)+" ")]},proxy:!0}])})],1)},ae=[];const le={components:{Blur:q,RequiredPlans:nt,Cta:I},props:{noCoreCard:Boolean,parentComponentContext:String},data(){return{strings:{ctaButtonText:this.$t.__("Upgrade to Pro and Unlock Redirects",this.$td),ctaHeader:this.$t.sprintf(this.$t.__("Redirects are only available for licensed %1$s %2$s users.",this.$td),"AIOSEO","Pro"),serverRedirects:this.$t.__("Fast Server Redirects",this.$td),automaticRedirects:this.$t.__("Automatic Redirects",this.$td),redirectMonitoring:this.$t.__("Redirect Monitoring",this.$td),monitoring404:this.$t.__("404 Monitoring",this.$td),fullSiteRedirects:this.$t.__("Full Site Redirects",this.$td),siteAliases:this.$t.__("Site Aliases",this.$td),redirectsDescription:this.$t.__("Our Redirection Manager allows you to easily create and manage redirects for your broken links to avoid confusing search engines and users, as well as losing valuable backlinks. It even automatically sends users and search engines from your old URLs to your new ones.",this.$td)}}}},L={};var ne=o(le,ie,ae,!1,oe,null,null,null);function oe(t){for(let s in L)this[s]=L[s]}var Be=function(){return ne.exports}();export{Me as A,q as B,Y as C,Be as L,Mt as S,Oe as T};
